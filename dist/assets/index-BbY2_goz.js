var Cg=r=>{throw TypeError(r)};var hd=(r,a,n)=>a.has(r)||Cg("Cannot "+n);var E=(r,a,n)=>(hd(r,a,"read from private field"),n?n.call(r):a.get(r)),ue=(r,a,n)=>a.has(r)?Cg("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(r):a.set(r,n),ae=(r,a,n,l)=>(hd(r,a,"write to private field"),l?l.call(r,n):a.set(r,n),n),Se=(r,a,n)=>(hd(r,a,"access private method"),n);var jo=(r,a,n,l)=>({set _(o){ae(r,a,o,n)},get _(){return E(r,a,l)}});function Dx(r,a){for(var n=0;n<a.length;n++){const l=a[n];if(typeof l!="string"&&!Array.isArray(l)){for(const o in l)if(o!=="default"&&!(o in r)){const d=Object.getOwnPropertyDescriptor(l,o);d&&Object.defineProperty(r,o,d.get?d:{enumerable:!0,get:()=>l[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}})();function lh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Mx(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var a=r.default;if(typeof a=="function"){var n=function l(){return this instanceof l?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};n.prototype=a.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(l){var o=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(n,l,o.get?o:{enumerable:!0,get:function(){return r[l]}})}),n}var fd={exports:{}},zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function Ux(){if(Og)return zl;Og=1;var r=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(l,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var m in o)m!=="key"&&(d[m]=o[m])}else d=o;return o=d.ref,{$$typeof:r,type:l,key:f,ref:o!==void 0?o:null,props:d}}return zl.Fragment=a,zl.jsx=n,zl.jsxs=n,zl}var Ag;function zx(){return Ag||(Ag=1,fd.exports=Ux()),fd.exports}var u=zx(),md={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function Lx(){if(Rg)return be;Rg=1;var r=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function _(C){return C===null||typeof C!="object"?null:(C=S&&C[S]||C["@@iterator"],typeof C=="function"?C:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,N={};function U(C,Q,W){this.props=C,this.context=Q,this.refs=N,this.updater=W||A}U.prototype.isReactComponent={},U.prototype.setState=function(C,Q){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,Q,"setState")},U.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function D(){}D.prototype=U.prototype;function w(C,Q,W){this.props=C,this.context=Q,this.refs=N,this.updater=W||A}var k=w.prototype=new D;k.constructor=w,O(k,U.prototype),k.isPureReactComponent=!0;var q=Array.isArray;function $(){}var P={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function ee(C,Q,W){var te=W.ref;return{$$typeof:r,type:C,key:Q,ref:te!==void 0?te:null,props:W}}function se(C,Q){return ee(C.type,Q,C.props)}function fe(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function J(C){var Q={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(W){return Q[W]})}var re=/\/+/g;function ve(C,Q){return typeof C=="object"&&C!==null&&C.key!=null?J(""+C.key):Q.toString(36)}function ze(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then($,$):(C.status="pending",C.then(function(Q){C.status==="pending"&&(C.status="fulfilled",C.value=Q)},function(Q){C.status==="pending"&&(C.status="rejected",C.reason=Q)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function G(C,Q,W,te,ye){var we=typeof C;(we==="undefined"||we==="boolean")&&(C=null);var Ne=!1;if(C===null)Ne=!0;else switch(we){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(C.$$typeof){case r:case a:Ne=!0;break;case b:return Ne=C._init,G(Ne(C._payload),Q,W,te,ye)}}if(Ne)return ye=ye(C),Ne=te===""?"."+ve(C,0):te,q(ye)?(W="",Ne!=null&&(W=Ne.replace(re,"$&/")+"/"),G(ye,Q,W,"",function(ua){return ua})):ye!=null&&(fe(ye)&&(ye=se(ye,W+(ye.key==null||C&&C.key===ye.key?"":(""+ye.key).replace(re,"$&/")+"/")+Ne)),Q.push(ye)),1;Ne=0;var tt=te===""?".":te+":";if(q(C))for(var Me=0;Me<C.length;Me++)te=C[Me],we=tt+ve(te,Me),Ne+=G(te,Q,W,we,ye);else if(Me=_(C),typeof Me=="function")for(C=Me.call(C),Me=0;!(te=C.next()).done;)te=te.value,we=tt+ve(te,Me++),Ne+=G(te,Q,W,we,ye);else if(we==="object"){if(typeof C.then=="function")return G(ze(C),Q,W,te,ye);throw Q=String(C),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function Z(C,Q,W){if(C==null)return C;var te=[],ye=0;return G(C,te,"","",function(we){return Q.call(W,we,ye++)}),te}function H(C){if(C._status===-1){var Q=C._result;Q=Q(),Q.then(function(W){(C._status===0||C._status===-1)&&(C._status=1,C._result=W)},function(W){(C._status===0||C._status===-1)&&(C._status=2,C._result=W)}),C._status===-1&&(C._status=0,C._result=Q)}if(C._status===1)return C._result.default;throw C._result}var oe=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},de={map:Z,forEach:function(C,Q,W){Z(C,function(){Q.apply(this,arguments)},W)},count:function(C){var Q=0;return Z(C,function(){Q++}),Q},toArray:function(C){return Z(C,function(Q){return Q})||[]},only:function(C){if(!fe(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return be.Activity=v,be.Children=de,be.Component=U,be.Fragment=n,be.Profiler=o,be.PureComponent=w,be.StrictMode=l,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,be.__COMPILER_RUNTIME={__proto__:null,c:function(C){return P.H.useMemoCache(C)}},be.cache=function(C){return function(){return C.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(C,Q,W){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var te=O({},C.props),ye=C.key;if(Q!=null)for(we in Q.key!==void 0&&(ye=""+Q.key),Q)!X.call(Q,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Q.ref===void 0||(te[we]=Q[we]);var we=arguments.length-2;if(we===1)te.children=W;else if(1<we){for(var Ne=Array(we),tt=0;tt<we;tt++)Ne[tt]=arguments[tt+2];te.children=Ne}return ee(C.type,ye,te)},be.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:d,_context:C},C},be.createElement=function(C,Q,W){var te,ye={},we=null;if(Q!=null)for(te in Q.key!==void 0&&(we=""+Q.key),Q)X.call(Q,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ye[te]=Q[te]);var Ne=arguments.length-2;if(Ne===1)ye.children=W;else if(1<Ne){for(var tt=Array(Ne),Me=0;Me<Ne;Me++)tt[Me]=arguments[Me+2];ye.children=tt}if(C&&C.defaultProps)for(te in Ne=C.defaultProps,Ne)ye[te]===void 0&&(ye[te]=Ne[te]);return ee(C,we,ye)},be.createRef=function(){return{current:null}},be.forwardRef=function(C){return{$$typeof:m,render:C}},be.isValidElement=fe,be.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:H}},be.memo=function(C,Q){return{$$typeof:p,type:C,compare:Q===void 0?null:Q}},be.startTransition=function(C){var Q=P.T,W={};P.T=W;try{var te=C(),ye=P.S;ye!==null&&ye(W,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then($,oe)}catch(we){oe(we)}finally{Q!==null&&W.types!==null&&(Q.types=W.types),P.T=Q}},be.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},be.use=function(C){return P.H.use(C)},be.useActionState=function(C,Q,W){return P.H.useActionState(C,Q,W)},be.useCallback=function(C,Q){return P.H.useCallback(C,Q)},be.useContext=function(C){return P.H.useContext(C)},be.useDebugValue=function(){},be.useDeferredValue=function(C,Q){return P.H.useDeferredValue(C,Q)},be.useEffect=function(C,Q){return P.H.useEffect(C,Q)},be.useEffectEvent=function(C){return P.H.useEffectEvent(C)},be.useId=function(){return P.H.useId()},be.useImperativeHandle=function(C,Q,W){return P.H.useImperativeHandle(C,Q,W)},be.useInsertionEffect=function(C,Q){return P.H.useInsertionEffect(C,Q)},be.useLayoutEffect=function(C,Q){return P.H.useLayoutEffect(C,Q)},be.useMemo=function(C,Q){return P.H.useMemo(C,Q)},be.useOptimistic=function(C,Q){return P.H.useOptimistic(C,Q)},be.useReducer=function(C,Q,W){return P.H.useReducer(C,Q,W)},be.useRef=function(C){return P.H.useRef(C)},be.useState=function(C){return P.H.useState(C)},be.useSyncExternalStore=function(C,Q,W){return P.H.useSyncExternalStore(C,Q,W)},be.useTransition=function(){return P.H.useTransition()},be.version="19.2.0",be}var Dg;function ih(){return Dg||(Dg=1,md.exports=Lx()),md.exports}var j=ih();const qx=lh(j);var gd={exports:{}},Ll={},pd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function Bx(){return Mg||(Mg=1,(function(r){function a(G,Z){var H=G.length;G.push(Z);e:for(;0<H;){var oe=H-1>>>1,de=G[oe];if(0<o(de,Z))G[oe]=Z,G[H]=de,H=oe;else break e}}function n(G){return G.length===0?null:G[0]}function l(G){if(G.length===0)return null;var Z=G[0],H=G.pop();if(H!==Z){G[0]=H;e:for(var oe=0,de=G.length,C=de>>>1;oe<C;){var Q=2*(oe+1)-1,W=G[Q],te=Q+1,ye=G[te];if(0>o(W,H))te<de&&0>o(ye,W)?(G[oe]=ye,G[te]=H,oe=te):(G[oe]=W,G[Q]=H,oe=Q);else if(te<de&&0>o(ye,H))G[oe]=ye,G[te]=H,oe=te;else break e}}return Z}function o(G,Z){var H=G.sortIndex-Z.sortIndex;return H!==0?H:G.id-Z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],p=[],b=1,v=null,S=3,_=!1,A=!1,O=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function k(G){for(var Z=n(p);Z!==null;){if(Z.callback===null)l(p);else if(Z.startTime<=G)l(p),Z.sortIndex=Z.expirationTime,a(g,Z);else break;Z=n(p)}}function q(G){if(O=!1,k(G),!A)if(n(g)!==null)A=!0,$||($=!0,J());else{var Z=n(p);Z!==null&&ze(q,Z.startTime-G)}}var $=!1,P=-1,X=5,ee=-1;function se(){return N?!0:!(r.unstable_now()-ee<X)}function fe(){if(N=!1,$){var G=r.unstable_now();ee=G;var Z=!0;try{e:{A=!1,O&&(O=!1,D(P),P=-1),_=!0;var H=S;try{t:{for(k(G),v=n(g);v!==null&&!(v.expirationTime>G&&se());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,S=v.priorityLevel;var de=oe(v.expirationTime<=G);if(G=r.unstable_now(),typeof de=="function"){v.callback=de,k(G),Z=!0;break t}v===n(g)&&l(g),k(G)}else l(g);v=n(g)}if(v!==null)Z=!0;else{var C=n(p);C!==null&&ze(q,C.startTime-G),Z=!1}}break e}finally{v=null,S=H,_=!1}Z=void 0}}finally{Z?J():$=!1}}}var J;if(typeof w=="function")J=function(){w(fe)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ve=re.port2;re.port1.onmessage=fe,J=function(){ve.postMessage(null)}}else J=function(){U(fe,0)};function ze(G,Z){P=U(function(){G(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(G){switch(S){case 1:case 2:case 3:var Z=3;break;default:Z=S}var H=S;S=Z;try{return G()}finally{S=H}},r.unstable_requestPaint=function(){N=!0},r.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var H=S;S=G;try{return Z()}finally{S=H}},r.unstable_scheduleCallback=function(G,Z,H){var oe=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?oe+H:oe):H=oe,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=H+de,G={id:b++,callback:Z,priorityLevel:G,startTime:H,expirationTime:de,sortIndex:-1},H>oe?(G.sortIndex=H,a(p,G),n(g)===null&&G===n(p)&&(O?(D(P),P=-1):O=!0,ze(q,H-oe))):(G.sortIndex=de,a(g,G),A||_||(A=!0,$||($=!0,J()))),G},r.unstable_shouldYield=se,r.unstable_wrapCallback=function(G){var Z=S;return function(){var H=S;S=Z;try{return G.apply(this,arguments)}finally{S=H}}}})(yd)),yd}var Ug;function Hx(){return Ug||(Ug=1,pd.exports=Bx()),pd.exports}var bd={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function $x(){if(zg)return _t;zg=1;var r=ih();function a(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(g,p,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:p,implementation:b}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,_t.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(g,p,null,b)},_t.flushSync=function(g){var p=f.T,b=l.p;try{if(f.T=null,l.p=2,g)return g()}finally{f.T=p,l.p=b,l.d.f()}},_t.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},_t.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},_t.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,v=m(b,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:_}):b==="script"&&l.d.X(g,{crossOrigin:v,integrity:S,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_t.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},_t.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,v=m(b,p.crossOrigin);l.d.L(g,b,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_t.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},_t.requestFormReset=function(g){l.d.r(g)},_t.unstable_batchedUpdates=function(g,p){return g(p)},_t.useFormState=function(g,p,b){return f.H.useFormState(g,p,b)},_t.useFormStatus=function(){return f.H.useHostTransitionStatus()},_t.version="19.2.0",_t}var Lg;function Px(){if(Lg)return bd.exports;Lg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}return r(),bd.exports=$x(),bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function Gx(){if(qg)return Ll;qg=1;var r=Hx(),a=ih(),n=Px();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(d(e)!==e)throw Error(l(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(l(188));return t!==e?null:e}for(var s=e,i=t;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(i=c.return,i!==null){s=i;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return g(c),e;if(h===i)return g(c),t;h=h.sibling}throw Error(l(188))}if(s.return!==i.return)s=c,i=h;else{for(var y=!1,x=c.child;x;){if(x===s){y=!0,s=c,i=h;break}if(x===i){y=!0,i=c,s=h;break}x=x.sibling}if(!y){for(x=h.child;x;){if(x===s){y=!0,s=h,i=c;break}if(x===i){y=!0,i=h,s=c;break}x=x.sibling}if(!y)throw Error(l(189))}}if(s.alternate!==i)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=fe&&e[fe]||e["@@iterator"],typeof e=="function"?e:null)}var re=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case U:return"Profiler";case N:return"StrictMode";case q:return"Suspense";case $:return"SuspenseList";case ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case w:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}var ze=Array.isArray,G=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},oe=[],de=-1;function C(e){return{current:e}}function Q(e){0>de||(e.current=oe[de],oe[de]=null,de--)}function W(e,t){de++,oe[de]=e.current,e.current=t}var te=C(null),ye=C(null),we=C(null),Ne=C(null);function tt(e,t){switch(W(we,t),W(ye,e),W(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Fm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Fm(t),e=Wm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(te),W(te,e)}function Me(){Q(te),Q(ye),Q(we)}function ua(e){e.memoizedState!==null&&W(Ne,e);var t=te.current,s=Wm(t,e.type);t!==s&&(W(ye,e),W(te,s))}function ca(e){ye.current===e&&(Q(te),Q(ye)),Ne.current===e&&(Q(Ne),Rl._currentValue=H)}var Pr,ri;function Sa(e){if(Pr===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Pr=t&&t[1]||"",ri=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pr+e+ri}var F=!1;function Ae(e,t){if(!e||F)return"";F=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(K){var B=K}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(K){B=K}e.call(Y.prototype)}}else{try{throw Error()}catch(K){B=K}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(K){if(K&&B&&typeof K.stack=="string")return[K.stack,B.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=i.DetermineComponentFrameRoot(),y=h[0],x=h[1];if(y&&x){var T=y.split(`
`),L=x.split(`
`);for(c=i=0;i<T.length&&!T[i].includes("DetermineComponentFrameRoot");)i++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(i===T.length||c===L.length)for(i=T.length-1,c=L.length-1;1<=i&&0<=c&&T[i]!==L[c];)c--;for(;1<=i&&0<=c;i--,c--)if(T[i]!==L[c]){if(i!==1||c!==1)do if(i--,c--,0>c||T[i]!==L[c]){var V=`
`+T[i].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=i&&0<=c);break}}}finally{F=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Sa(s):""}function it(e,t){switch(e.tag){case 26:case 27:case 5:return Sa(e.type);case 16:return Sa("Lazy");case 13:return e.child!==t&&t!==null?Sa("Suspense Fallback"):Sa("Suspense");case 19:return Sa("SuspenseList");case 0:case 15:return Ae(e.type,!1);case 11:return Ae(e.type.render,!1);case 1:return Ae(e.type,!0);case 31:return Sa("Activity");default:return""}}function wt(e){try{var t="",s=null;do t+=it(e,s),s=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var dt=Object.prototype.hasOwnProperty,Gr=r.unstable_scheduleCallback,Wo=r.unstable_cancelCallback,db=r.unstable_shouldYield,hb=r.unstable_requestPaint,qt=r.unstable_now,fb=r.unstable_getCurrentPriorityLevel,Ch=r.unstable_ImmediatePriority,Oh=r.unstable_UserBlockingPriority,li=r.unstable_NormalPriority,mb=r.unstable_LowPriority,Ah=r.unstable_IdlePriority,gb=r.log,pb=r.unstable_setDisableYieldValue,Kr=null,Bt=null;function ls(e){if(typeof gb=="function"&&pb(e),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Kr,e)}catch{}}var Ht=Math.clz32?Math.clz32:vb,yb=Math.log,bb=Math.LN2;function vb(e){return e>>>=0,e===0?32:31-(yb(e)/bb|0)|0}var ii=256,oi=262144,ui=4194304;function Qs(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ci(e,t,s){var i=e.pendingLanes;if(i===0)return 0;var c=0,h=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var x=i&134217727;return x!==0?(i=x&~h,i!==0?c=Qs(i):(y&=x,y!==0?c=Qs(y):s||(s=x&~e,s!==0&&(c=Qs(s))))):(x=i&~h,x!==0?c=Qs(x):y!==0?c=Qs(y):s||(s=i&~e,s!==0&&(c=Qs(s)))),c===0?0:t!==0&&t!==c&&(t&h)===0&&(h=c&-c,s=t&-t,h>=s||h===32&&(s&4194048)!==0)?t:c}function Vr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function xb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rh(){var e=ui;return ui<<=1,(ui&62914560)===0&&(ui=4194304),e}function eu(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Qr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function wb(e,t,s,i,c,h){var y=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var x=e.entanglements,T=e.expirationTimes,L=e.hiddenUpdates;for(s=y&~s;0<s;){var V=31-Ht(s),Y=1<<V;x[V]=0,T[V]=-1;var B=L[V];if(B!==null)for(L[V]=null,V=0;V<B.length;V++){var K=B[V];K!==null&&(K.lane&=-536870913)}s&=~Y}i!==0&&Dh(e,i,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(y&~t))}function Dh(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ht(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|s&261930}function Mh(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-Ht(s),c=1<<i;c&t|e[i]&t&&(e[i]|=t),s&=~c}}function Uh(e,t){var s=t&-t;return s=(s&42)!==0?1:tu(s),(s&(e.suspendedLanes|t))!==0?0:s}function tu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function au(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function zh(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:_g(e.type))}function Lh(e,t){var s=Z.p;try{return Z.p=e,t()}finally{Z.p=s}}var is=Math.random().toString(36).slice(2),gt="__reactFiber$"+is,Ct="__reactProps$"+is,An="__reactContainer$"+is,su="__reactEvents$"+is,_b="__reactListeners$"+is,Sb="__reactHandles$"+is,qh="__reactResources$"+is,Ir="__reactMarker$"+is;function nu(e){delete e[gt],delete e[Ct],delete e[su],delete e[_b],delete e[Sb]}function Rn(e){var t=e[gt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[An]||s[gt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=lg(e);e!==null;){if(s=e[gt])return s;e=lg(e)}return t}e=s,s=e.parentNode}return null}function Dn(e){if(e=e[gt]||e[An]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Yr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Mn(e){var t=e[qh];return t||(t=e[qh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ht(e){e[Ir]=!0}var Bh=new Set,Hh={};function Is(e,t){Un(e,t),Un(e+"Capture",t)}function Un(e,t){for(Hh[e]=t,e=0;e<t.length;e++)Bh.add(t[e])}var jb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$h={},Ph={};function kb(e){return dt.call(Ph,e)?!0:dt.call($h,e)?!1:jb.test(e)?Ph[e]=!0:($h[e]=!0,!1)}function di(e,t,s){if(kb(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function hi(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Ra(e,t,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+i)}}function Jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nb(e,t,s){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){s=""+y,h.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ru(e){if(!e._valueTracker){var t=Gh(e)?"checked":"value";e._valueTracker=Nb(e,t,""+e[t])}}function Kh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=Gh(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function fi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Tb=/[\n"\\]/g;function Zt(e){return e.replace(Tb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function lu(e,t,s,i,c,h,y,x){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Jt(t)):e.value!==""+Jt(t)&&(e.value=""+Jt(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?iu(e,y,Jt(t)):s!=null?iu(e,y,Jt(s)):i!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Jt(x):e.removeAttribute("name")}function Vh(e,t,s,i,c,h,y,x){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){ru(e);return}s=s!=null?""+Jt(s):"",t=t!=null?""+Jt(t):s,x||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=x?e.checked:!!i,e.defaultChecked=!!i,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),ru(e)}function iu(e,t,s){t==="number"&&fi(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function zn(e,t,s,i){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&i&&(e[s].defaultSelected=!0)}else{for(s=""+Jt(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Qh(e,t,s){if(t!=null&&(t=""+Jt(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Jt(s):""}function Ih(e,t,s,i){if(t==null){if(i!=null){if(s!=null)throw Error(l(92));if(ze(i)){if(1<i.length)throw Error(l(93));i=i[0]}s=i}s==null&&(s=""),t=s}s=Jt(t),e.defaultValue=s,i=e.textContent,i===s&&i!==""&&i!==null&&(e.value=i),ru(e)}function Ln(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Eb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yh(e,t,s){var i=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,s):typeof s!="number"||s===0||Eb.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Xh(e,t,s){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,s!=null){for(var i in s)!s.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&s[c]!==i&&Yh(e,c,i)}else for(var h in t)t.hasOwnProperty(h)&&Yh(e,h,t[h])}function ou(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ob=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(e){return Ob.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Da(){}var uu=null;function cu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qn=null,Bn=null;function Jh(e){var t=Dn(e);if(t&&(e=t.stateNode)){var s=e[Ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(lu(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Zt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var c=i[Ct]||null;if(!c)throw Error(l(90));lu(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<s.length;t++)i=s[t],i.form===e.form&&Kh(i)}break e;case"textarea":Qh(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&zn(e,!!s.multiple,t,!1)}}}var du=!1;function Zh(e,t,s){if(du)return e(t,s);du=!0;try{var i=e(t);return i}finally{if(du=!1,(qn!==null||Bn!==null)&&(to(),qn&&(t=qn,e=Bn,Bn=qn=null,Jh(t),e)))for(t=0;t<e.length;t++)Jh(e[t])}}function Xr(e,t){var s=e.stateNode;if(s===null)return null;var i=s[Ct]||null;if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(l(231,t,typeof s));return s}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=!1;if(Ma)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){hu=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{hu=!1}var os=null,fu=null,gi=null;function Fh(){if(gi)return gi;var e,t=fu,s=t.length,i,c="value"in os?os.value:os.textContent,h=c.length;for(e=0;e<s&&t[e]===c[e];e++);var y=s-e;for(i=1;i<=y&&t[s-i]===c[h-i];i++);return gi=c.slice(e,1<i?1-i:void 0)}function pi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yi(){return!0}function Wh(){return!1}function Ot(e){function t(s,i,c,h,y){this._reactName=s,this._targetInst=c,this.type=i,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(s=e[x],this[x]=s?s(h):h[x]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?yi:Wh,this.isPropagationStopped=Wh,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),t}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Ot(Ys),Zr=v({},Ys,{view:0,detail:0}),Ab=Ot(Zr),mu,gu,Fr,vi=v({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fr&&(Fr&&e.type==="mousemove"?(mu=e.screenX-Fr.screenX,gu=e.screenY-Fr.screenY):gu=mu=0,Fr=e),mu)},movementY:function(e){return"movementY"in e?e.movementY:gu}}),ef=Ot(vi),Rb=v({},vi,{dataTransfer:0}),Db=Ot(Rb),Mb=v({},Zr,{relatedTarget:0}),pu=Ot(Mb),Ub=v({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),zb=Ot(Ub),Lb=v({},Ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qb=Ot(Lb),Bb=v({},Ys,{data:0}),tf=Ot(Bb),Hb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$b={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pb[e])?!!t[e]:!1}function yu(){return Gb}var Kb=v({},Zr,{key:function(e){if(e.key){var t=Hb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$b[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(e){return e.type==="keypress"?pi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vb=Ot(Kb),Qb=v({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),af=Ot(Qb),Ib=v({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),Yb=Ot(Ib),Xb=v({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jb=Ot(Xb),Zb=v({},vi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fb=Ot(Zb),Wb=v({},Ys,{newState:0,oldState:0}),ev=Ot(Wb),tv=[9,13,27,32],bu=Ma&&"CompositionEvent"in window,Wr=null;Ma&&"documentMode"in document&&(Wr=document.documentMode);var av=Ma&&"TextEvent"in window&&!Wr,sf=Ma&&(!bu||Wr&&8<Wr&&11>=Wr),nf=" ",rf=!1;function lf(e,t){switch(e){case"keyup":return tv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hn=!1;function sv(e,t){switch(e){case"compositionend":return of(t);case"keypress":return t.which!==32?null:(rf=!0,nf);case"textInput":return e=t.data,e===nf&&rf?null:e;default:return null}}function nv(e,t){if(Hn)return e==="compositionend"||!bu&&lf(e,t)?(e=Fh(),gi=fu=os=null,Hn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sf&&t.locale!=="ko"?null:t.data;default:return null}}var rv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rv[e.type]:t==="textarea"}function cf(e,t,s,i){qn?Bn?Bn.push(i):Bn=[i]:qn=i,t=oo(t,"onChange"),0<t.length&&(s=new bi("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var el=null,tl=null;function lv(e){Qm(e,0)}function xi(e){var t=Yr(e);if(Kh(t))return e}function df(e,t){if(e==="change")return t}var hf=!1;if(Ma){var vu;if(Ma){var xu="oninput"in document;if(!xu){var ff=document.createElement("div");ff.setAttribute("oninput","return;"),xu=typeof ff.oninput=="function"}vu=xu}else vu=!1;hf=vu&&(!document.documentMode||9<document.documentMode)}function mf(){el&&(el.detachEvent("onpropertychange",gf),tl=el=null)}function gf(e){if(e.propertyName==="value"&&xi(tl)){var t=[];cf(t,tl,e,cu(e)),Zh(lv,t)}}function iv(e,t,s){e==="focusin"?(mf(),el=t,tl=s,el.attachEvent("onpropertychange",gf)):e==="focusout"&&mf()}function ov(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xi(tl)}function uv(e,t){if(e==="click")return xi(t)}function cv(e,t){if(e==="input"||e==="change")return xi(t)}function dv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:dv;function al(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var c=s[i];if(!dt.call(t,c)||!$t(e[c],t[c]))return!1}return!0}function pf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yf(e,t){var s=pf(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=pf(s)}}function bf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=fi(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=fi(e.document)}return t}function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hv=Ma&&"documentMode"in document&&11>=document.documentMode,$n=null,_u=null,sl=null,Su=!1;function xf(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Su||$n==null||$n!==fi(i)||(i=$n,"selectionStart"in i&&wu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),sl&&al(sl,i)||(sl=i,i=oo(_u,"onSelect"),0<i.length&&(t=new bi("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=$n)))}function Xs(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Pn={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},ju={},wf={};Ma&&(wf=document.createElement("div").style,"AnimationEvent"in window||(delete Pn.animationend.animation,delete Pn.animationiteration.animation,delete Pn.animationstart.animation),"TransitionEvent"in window||delete Pn.transitionend.transition);function Js(e){if(ju[e])return ju[e];if(!Pn[e])return e;var t=Pn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in wf)return ju[e]=t[s];return e}var _f=Js("animationend"),Sf=Js("animationiteration"),jf=Js("animationstart"),fv=Js("transitionrun"),mv=Js("transitionstart"),gv=Js("transitioncancel"),kf=Js("transitionend"),Nf=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function da(e,t){Nf.set(e,t),Is(t,[e])}var wi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ft=[],Gn=0,Nu=0;function _i(){for(var e=Gn,t=Nu=Gn=0;t<e;){var s=Ft[t];Ft[t++]=null;var i=Ft[t];Ft[t++]=null;var c=Ft[t];Ft[t++]=null;var h=Ft[t];if(Ft[t++]=null,i!==null&&c!==null){var y=i.pending;y===null?c.next=c:(c.next=y.next,y.next=c),i.pending=c}h!==0&&Tf(s,c,h)}}function Si(e,t,s,i){Ft[Gn++]=e,Ft[Gn++]=t,Ft[Gn++]=s,Ft[Gn++]=i,Nu|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Tu(e,t,s,i){return Si(e,t,s,i),ji(e)}function Zs(e,t){return Si(e,null,null,t),ji(e)}function Tf(e,t,s){e.lanes|=s;var i=e.alternate;i!==null&&(i.lanes|=s);for(var c=!1,h=e.return;h!==null;)h.childLanes|=s,i=h.alternate,i!==null&&(i.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&t!==null&&(c=31-Ht(s),e=h.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=s|536870912),h):null}function ji(e){if(50<kl)throw kl=0,zc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Kn={};function pv(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,s,i){return new pv(e,t,s,i)}function Eu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ua(e,t){var s=e.alternate;return s===null?(s=Pt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ef(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ki(e,t,s,i,c,h){var y=0;if(i=e,typeof e=="function")Eu(e)&&(y=1);else if(typeof e=="string")y=wx(e,s,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ee:return e=Pt(31,s,t,c),e.elementType=ee,e.lanes=h,e;case O:return Fs(s.children,c,h,t);case N:y=8,c|=24;break;case U:return e=Pt(12,s,t,c|2),e.elementType=U,e.lanes=h,e;case q:return e=Pt(13,s,t,c),e.elementType=q,e.lanes=h,e;case $:return e=Pt(19,s,t,c),e.elementType=$,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w:y=10;break e;case D:y=9;break e;case k:y=11;break e;case P:y=14;break e;case X:y=16,i=null;break e}y=29,s=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=Pt(y,s,t,c),t.elementType=e,t.type=i,t.lanes=h,t}function Fs(e,t,s,i){return e=Pt(7,e,i,t),e.lanes=s,e}function Cu(e,t,s){return e=Pt(6,e,null,t),e.lanes=s,e}function Cf(e){var t=Pt(18,null,null,0);return t.stateNode=e,t}function Ou(e,t,s){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Of=new WeakMap;function Wt(e,t){if(typeof e=="object"&&e!==null){var s=Of.get(e);return s!==void 0?s:(t={value:e,source:t,stack:wt(t)},Of.set(e,t),t)}return{value:e,source:t,stack:wt(t)}}var Vn=[],Qn=0,Ni=null,nl=0,ea=[],ta=0,us=null,ja=1,ka="";function za(e,t){Vn[Qn++]=nl,Vn[Qn++]=Ni,Ni=e,nl=t}function Af(e,t,s){ea[ta++]=ja,ea[ta++]=ka,ea[ta++]=us,us=e;var i=ja;e=ka;var c=32-Ht(i)-1;i&=~(1<<c),s+=1;var h=32-Ht(t)+c;if(30<h){var y=c-c%5;h=(i&(1<<y)-1).toString(32),i>>=y,c-=y,ja=1<<32-Ht(t)+c|s<<c|i,ka=h+e}else ja=1<<h|s<<c|i,ka=e}function Au(e){e.return!==null&&(za(e,1),Af(e,1,0))}function Ru(e){for(;e===Ni;)Ni=Vn[--Qn],Vn[Qn]=null,nl=Vn[--Qn],Vn[Qn]=null;for(;e===us;)us=ea[--ta],ea[ta]=null,ka=ea[--ta],ea[ta]=null,ja=ea[--ta],ea[ta]=null}function Rf(e,t){ea[ta++]=ja,ea[ta++]=ka,ea[ta++]=us,ja=t.id,ka=t.overflow,us=e}var pt=null,Ve=null,Ce=!1,cs=null,aa=!1,Du=Error(l(519));function ds(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rl(Wt(t,e)),Du}function Df(e){var t=e.stateNode,s=e.type,i=e.memoizedProps;switch(t[gt]=e,t[Ct]=i,s){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(s=0;s<Tl.length;s++)ke(Tl[s],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),Vh(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),Ih(t,i.value,i.defaultValue,i.children)}s=i.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||i.suppressHydrationWarning===!0||Jm(t.textContent,s)?(i.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),i.onScroll!=null&&ke("scroll",t),i.onScrollEnd!=null&&ke("scrollend",t),i.onClick!=null&&(t.onclick=Da),t=!0):t=!1,t||ds(e,!0)}function Mf(e){for(pt=e.return;pt;)switch(pt.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:pt=pt.return}}function In(e){if(e!==pt)return!1;if(!Ce)return Mf(e),Ce=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Zc(e.type,e.memoizedProps)),s=!s),s&&Ve&&ds(e),Mf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ve=rg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ve=rg(e)}else t===27?(t=Ve,ks(e.type)?(e=ad,ad=null,Ve=e):Ve=t):Ve=pt?na(e.stateNode.nextSibling):null;return!0}function Ws(){Ve=pt=null,Ce=!1}function Mu(){var e=cs;return e!==null&&(Mt===null?Mt=e:Mt.push.apply(Mt,e),cs=null),e}function rl(e){cs===null?cs=[e]:cs.push(e)}var Uu=C(null),en=null,La=null;function hs(e,t,s){W(Uu,t._currentValue),t._currentValue=s}function qa(e){e._currentValue=Uu.current,Q(Uu)}function zu(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Lu(e,t,s,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var y=c.child;h=h.firstContext;e:for(;h!==null;){var x=h;h=c;for(var T=0;T<t.length;T++)if(x.context===t[T]){h.lanes|=s,x=h.alternate,x!==null&&(x.lanes|=s),zu(h.return,s,e),i||(y=null);break e}h=x.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(l(341));y.lanes|=s,h=y.alternate,h!==null&&(h.lanes|=s),zu(y,s,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function Yn(e,t,s,i){e=null;for(var c=t,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(l(387));if(y=y.memoizedProps,y!==null){var x=c.type;$t(c.pendingProps.value,y.value)||(e!==null?e.push(x):e=[x])}}else if(c===Ne.current){if(y=c.alternate,y===null)throw Error(l(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Rl):e=[Rl])}c=c.return}e!==null&&Lu(t,e,s,i),t.flags|=262144}function Ti(e){for(e=e.firstContext;e!==null;){if(!$t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function tn(e){en=e,La=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yt(e){return Uf(en,e)}function Ei(e,t){return en===null&&tn(e),Uf(e,t)}function Uf(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},La===null){if(e===null)throw Error(l(308));La=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else La=La.next=t;return s}var yv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},bv=r.unstable_scheduleCallback,vv=r.unstable_NormalPriority,at={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qu(){return{controller:new yv,data:new Map,refCount:0}}function ll(e){e.refCount--,e.refCount===0&&bv(vv,function(){e.controller.abort()})}var il=null,Bu=0,Xn=0,Jn=null;function xv(e,t){if(il===null){var s=il=[];Bu=0,Xn=Pc(),Jn={status:"pending",value:void 0,then:function(i){s.push(i)}}}return Bu++,t.then(zf,zf),t}function zf(){if(--Bu===0&&il!==null){Jn!==null&&(Jn.status="fulfilled");var e=il;il=null,Xn=0,Jn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function wv(e,t){var s=[],i={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<s.length;c++)(0,s[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),i}var Lf=G.S;G.S=function(e,t){xm=qt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&xv(e,t),Lf!==null&&Lf(e,t)};var an=C(null);function Hu(){var e=an.current;return e!==null?e:Ge.pooledCache}function Ci(e,t){t===null?W(an,an.current):W(an,t.pool)}function qf(){var e=Hu();return e===null?null:{parent:at._currentValue,pool:e}}var Zn=Error(l(460)),$u=Error(l(474)),Oi=Error(l(542)),Ai={then:function(){}};function Bf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hf(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Da,Da),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pf(e),e;default:if(typeof t.status=="string")t.then(Da,Da);else{if(e=Ge,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pf(e),e}throw nn=t,Zn}}function sn(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(nn=s,Zn):s}}var nn=null;function $f(){if(nn===null)throw Error(l(459));var e=nn;return nn=null,e}function Pf(e){if(e===Zn||e===Oi)throw Error(l(483))}var Fn=null,ol=0;function Ri(e){var t=ol;return ol+=1,Fn===null&&(Fn=[]),Hf(Fn,e,t)}function ul(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Di(e,t){throw t.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Gf(e){function t(M,R){if(e){var z=M.deletions;z===null?(M.deletions=[R],M.flags|=16):z.push(R)}}function s(M,R){if(!e)return null;for(;R!==null;)t(M,R),R=R.sibling;return null}function i(M){for(var R=new Map;M!==null;)M.key!==null?R.set(M.key,M):R.set(M.index,M),M=M.sibling;return R}function c(M,R){return M=Ua(M,R),M.index=0,M.sibling=null,M}function h(M,R,z){return M.index=z,e?(z=M.alternate,z!==null?(z=z.index,z<R?(M.flags|=67108866,R):z):(M.flags|=67108866,R)):(M.flags|=1048576,R)}function y(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function x(M,R,z,I){return R===null||R.tag!==6?(R=Cu(z,M.mode,I),R.return=M,R):(R=c(R,z),R.return=M,R)}function T(M,R,z,I){var he=z.type;return he===O?V(M,R,z.props.children,I,z.key):R!==null&&(R.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===X&&sn(he)===R.type)?(R=c(R,z.props),ul(R,z),R.return=M,R):(R=ki(z.type,z.key,z.props,null,M.mode,I),ul(R,z),R.return=M,R)}function L(M,R,z,I){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=Ou(z,M.mode,I),R.return=M,R):(R=c(R,z.children||[]),R.return=M,R)}function V(M,R,z,I,he){return R===null||R.tag!==7?(R=Fs(z,M.mode,I,he),R.return=M,R):(R=c(R,z),R.return=M,R)}function Y(M,R,z){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Cu(""+R,M.mode,z),R.return=M,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _:return z=ki(R.type,R.key,R.props,null,M.mode,z),ul(z,R),z.return=M,z;case A:return R=Ou(R,M.mode,z),R.return=M,R;case X:return R=sn(R),Y(M,R,z)}if(ze(R)||J(R))return R=Fs(R,M.mode,z,null),R.return=M,R;if(typeof R.then=="function")return Y(M,Ri(R),z);if(R.$$typeof===w)return Y(M,Ei(M,R),z);Di(M,R)}return null}function B(M,R,z,I){var he=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return he!==null?null:x(M,R,""+z,I);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _:return z.key===he?T(M,R,z,I):null;case A:return z.key===he?L(M,R,z,I):null;case X:return z=sn(z),B(M,R,z,I)}if(ze(z)||J(z))return he!==null?null:V(M,R,z,I,null);if(typeof z.then=="function")return B(M,R,Ri(z),I);if(z.$$typeof===w)return B(M,R,Ei(M,z),I);Di(M,z)}return null}function K(M,R,z,I,he){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return M=M.get(z)||null,x(R,M,""+I,he);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _:return M=M.get(I.key===null?z:I.key)||null,T(R,M,I,he);case A:return M=M.get(I.key===null?z:I.key)||null,L(R,M,I,he);case X:return I=sn(I),K(M,R,z,I,he)}if(ze(I)||J(I))return M=M.get(z)||null,V(R,M,I,he,null);if(typeof I.then=="function")return K(M,R,z,Ri(I),he);if(I.$$typeof===w)return K(M,R,z,Ei(R,I),he);Di(R,I)}return null}function ne(M,R,z,I){for(var he=null,Re=null,le=R,_e=R=0,Ee=null;le!==null&&_e<z.length;_e++){le.index>_e?(Ee=le,le=null):Ee=le.sibling;var De=B(M,le,z[_e],I);if(De===null){le===null&&(le=Ee);break}e&&le&&De.alternate===null&&t(M,le),R=h(De,R,_e),Re===null?he=De:Re.sibling=De,Re=De,le=Ee}if(_e===z.length)return s(M,le),Ce&&za(M,_e),he;if(le===null){for(;_e<z.length;_e++)le=Y(M,z[_e],I),le!==null&&(R=h(le,R,_e),Re===null?he=le:Re.sibling=le,Re=le);return Ce&&za(M,_e),he}for(le=i(le);_e<z.length;_e++)Ee=K(le,M,_e,z[_e],I),Ee!==null&&(e&&Ee.alternate!==null&&le.delete(Ee.key===null?_e:Ee.key),R=h(Ee,R,_e),Re===null?he=Ee:Re.sibling=Ee,Re=Ee);return e&&le.forEach(function(Os){return t(M,Os)}),Ce&&za(M,_e),he}function me(M,R,z,I){if(z==null)throw Error(l(151));for(var he=null,Re=null,le=R,_e=R=0,Ee=null,De=z.next();le!==null&&!De.done;_e++,De=z.next()){le.index>_e?(Ee=le,le=null):Ee=le.sibling;var Os=B(M,le,De.value,I);if(Os===null){le===null&&(le=Ee);break}e&&le&&Os.alternate===null&&t(M,le),R=h(Os,R,_e),Re===null?he=Os:Re.sibling=Os,Re=Os,le=Ee}if(De.done)return s(M,le),Ce&&za(M,_e),he;if(le===null){for(;!De.done;_e++,De=z.next())De=Y(M,De.value,I),De!==null&&(R=h(De,R,_e),Re===null?he=De:Re.sibling=De,Re=De);return Ce&&za(M,_e),he}for(le=i(le);!De.done;_e++,De=z.next())De=K(le,M,_e,De.value,I),De!==null&&(e&&De.alternate!==null&&le.delete(De.key===null?_e:De.key),R=h(De,R,_e),Re===null?he=De:Re.sibling=De,Re=De);return e&&le.forEach(function(Rx){return t(M,Rx)}),Ce&&za(M,_e),he}function Pe(M,R,z,I){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case _:e:{for(var he=z.key;R!==null;){if(R.key===he){if(he=z.type,he===O){if(R.tag===7){s(M,R.sibling),I=c(R,z.props.children),I.return=M,M=I;break e}}else if(R.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===X&&sn(he)===R.type){s(M,R.sibling),I=c(R,z.props),ul(I,z),I.return=M,M=I;break e}s(M,R);break}else t(M,R);R=R.sibling}z.type===O?(I=Fs(z.props.children,M.mode,I,z.key),I.return=M,M=I):(I=ki(z.type,z.key,z.props,null,M.mode,I),ul(I,z),I.return=M,M=I)}return y(M);case A:e:{for(he=z.key;R!==null;){if(R.key===he)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){s(M,R.sibling),I=c(R,z.children||[]),I.return=M,M=I;break e}else{s(M,R);break}else t(M,R);R=R.sibling}I=Ou(z,M.mode,I),I.return=M,M=I}return y(M);case X:return z=sn(z),Pe(M,R,z,I)}if(ze(z))return ne(M,R,z,I);if(J(z)){if(he=J(z),typeof he!="function")throw Error(l(150));return z=he.call(z),me(M,R,z,I)}if(typeof z.then=="function")return Pe(M,R,Ri(z),I);if(z.$$typeof===w)return Pe(M,R,Ei(M,z),I);Di(M,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,R!==null&&R.tag===6?(s(M,R.sibling),I=c(R,z),I.return=M,M=I):(s(M,R),I=Cu(z,M.mode,I),I.return=M,M=I),y(M)):s(M,R)}return function(M,R,z,I){try{ol=0;var he=Pe(M,R,z,I);return Fn=null,he}catch(le){if(le===Zn||le===Oi)throw le;var Re=Pt(29,le,null,M.mode);return Re.lanes=I,Re.return=M,Re}finally{}}}var rn=Gf(!0),Kf=Gf(!1),fs=!1;function Pu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ms(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gs(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ue&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=ji(e),Tf(e,null,s),t}return Si(e,i,t,s),ji(e)}function cl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Mh(e,s)}}function Ku(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?c=h=y:h=h.next=y,s=s.next}while(s!==null);h===null?c=h=t:h=h.next=t}else c=h=t;s={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:i.shared,callbacks:i.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Vu=!1;function dl(){if(Vu){var e=Jn;if(e!==null)throw e}}function hl(e,t,s,i){Vu=!1;var c=e.updateQueue;fs=!1;var h=c.firstBaseUpdate,y=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var T=x,L=T.next;T.next=null,y===null?h=L:y.next=L,y=T;var V=e.alternate;V!==null&&(V=V.updateQueue,x=V.lastBaseUpdate,x!==y&&(x===null?V.firstBaseUpdate=L:x.next=L,V.lastBaseUpdate=T))}if(h!==null){var Y=c.baseState;y=0,V=L=T=null,x=h;do{var B=x.lane&-536870913,K=B!==x.lane;if(K?(Te&B)===B:(i&B)===B){B!==0&&B===Xn&&(Vu=!0),V!==null&&(V=V.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ne=e,me=x;B=t;var Pe=s;switch(me.tag){case 1:if(ne=me.payload,typeof ne=="function"){Y=ne.call(Pe,Y,B);break e}Y=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=me.payload,B=typeof ne=="function"?ne.call(Pe,Y,B):ne,B==null)break e;Y=v({},Y,B);break e;case 2:fs=!0}}B=x.callback,B!==null&&(e.flags|=64,K&&(e.flags|=8192),K=c.callbacks,K===null?c.callbacks=[B]:K.push(B))}else K={lane:B,tag:x.tag,payload:x.payload,callback:x.callback,next:null},V===null?(L=V=K,T=Y):V=V.next=K,y|=B;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;K=x,x=K.next,K.next=null,c.lastBaseUpdate=K,c.shared.pending=null}}while(!0);V===null&&(T=Y),c.baseState=T,c.firstBaseUpdate=L,c.lastBaseUpdate=V,h===null&&(c.shared.lanes=0),xs|=y,e.lanes=y,e.memoizedState=Y}}function Vf(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Qf(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Vf(s[e],t)}var Wn=C(null),Mi=C(0);function If(e,t){e=Ia,W(Mi,e),W(Wn,t),Ia=e|t.baseLanes}function Qu(){W(Mi,Ia),W(Wn,Wn.current)}function Iu(){Ia=Mi.current,Q(Wn),Q(Mi)}var Gt=C(null),sa=null;function ps(e){var t=e.alternate;W(We,We.current&1),W(Gt,e),sa===null&&(t===null||Wn.current!==null||t.memoizedState!==null)&&(sa=e)}function Yu(e){W(We,We.current),W(Gt,e),sa===null&&(sa=e)}function Yf(e){e.tag===22?(W(We,We.current),W(Gt,e),sa===null&&(sa=e)):ys()}function ys(){W(We,We.current),W(Gt,Gt.current)}function Kt(e){Q(Gt),sa===e&&(sa=null),Q(We)}var We=C(0);function Ui(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||ed(s)||td(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=0,xe=null,He=null,st=null,zi=!1,er=!1,ln=!1,Li=0,fl=0,tr=null,_v=0;function Je(){throw Error(l(321))}function Xu(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!$t(e[s],t[s]))return!1;return!0}function Ju(e,t,s,i,c,h){return Ba=h,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?A0:dc,ln=!1,h=s(i,c),ln=!1,er&&(h=Jf(t,s,i,c)),Xf(e),h}function Xf(e){G.H=pl;var t=He!==null&&He.next!==null;if(Ba=0,st=He=xe=null,zi=!1,fl=0,tr=null,t)throw Error(l(300));e===null||nt||(e=e.dependencies,e!==null&&Ti(e)&&(nt=!0))}function Jf(e,t,s,i){xe=e;var c=0;do{if(er&&(tr=null),fl=0,er=!1,25<=c)throw Error(l(301));if(c+=1,st=He=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}G.H=R0,h=t(s,i)}while(er);return h}function Sv(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?ml(t):t,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(xe.flags|=1024),t}function Zu(){var e=Li!==0;return Li=0,e}function Fu(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Wu(e){if(zi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}zi=!1}Ba=0,st=He=xe=null,er=!1,fl=Li=0,tr=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?xe.memoizedState=st=e:st=st.next=e,st}function et(){if(He===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=st===null?xe.memoizedState:st.next;if(t!==null)st=t,He=e;else{if(e===null)throw xe.alternate===null?Error(l(467)):Error(l(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},st===null?xe.memoizedState=st=e:st=st.next=e}return st}function qi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(e){var t=fl;return fl+=1,tr===null&&(tr=[]),e=Hf(tr,e,t),t=xe,(st===null?t.memoizedState:st.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?A0:dc),e}function Bi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ml(e);if(e.$$typeof===w)return yt(e)}throw Error(l(438,String(e)))}function ec(e){var t=null,s=xe.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var i=xe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=qi(),xe.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),i=0;i<e;i++)s[i]=se;return t.index++,s}function Ha(e,t){return typeof t=="function"?t(e):t}function Hi(e){var t=et();return tc(t,He,e)}function tc(e,t,s){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=s;var c=e.baseQueue,h=i.pending;if(h!==null){if(c!==null){var y=c.next;c.next=h.next,h.next=y}t.baseQueue=c=h,i.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{t=c.next;var x=y=null,T=null,L=t,V=!1;do{var Y=L.lane&-536870913;if(Y!==L.lane?(Te&Y)===Y:(Ba&Y)===Y){var B=L.revertLane;if(B===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Y===Xn&&(V=!0);else if((Ba&B)===B){L=L.next,B===Xn&&(V=!0);continue}else Y={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},T===null?(x=T=Y,y=h):T=T.next=Y,xe.lanes|=B,xs|=B;Y=L.action,ln&&s(h,Y),h=L.hasEagerState?L.eagerState:s(h,Y)}else B={lane:Y,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},T===null?(x=T=B,y=h):T=T.next=B,xe.lanes|=Y,xs|=Y;L=L.next}while(L!==null&&L!==t);if(T===null?y=h:T.next=x,!$t(h,e.memoizedState)&&(nt=!0,V&&(s=Jn,s!==null)))throw s;e.memoizedState=h,e.baseState=y,e.baseQueue=T,i.lastRenderedState=h}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function ac(e){var t=et(),s=t.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var i=s.dispatch,c=s.pending,h=t.memoizedState;if(c!==null){s.pending=null;var y=c=c.next;do h=e(h,y.action),y=y.next;while(y!==c);$t(h,t.memoizedState)||(nt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,i]}function Zf(e,t,s){var i=xe,c=et(),h=Ce;if(h){if(s===void 0)throw Error(l(407));s=s()}else s=t();var y=!$t((He||c).memoizedState,s);if(y&&(c.memoizedState=s,nt=!0),c=c.queue,rc(e0.bind(null,i,c,e),[e]),c.getSnapshot!==t||y||st!==null&&st.memoizedState.tag&1){if(i.flags|=2048,ar(9,{destroy:void 0},Wf.bind(null,i,c,s,t),null),Ge===null)throw Error(l(349));h||(Ba&127)!==0||Ff(i,t,s)}return s}function Ff(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=xe.updateQueue,t===null?(t=qi(),xe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Wf(e,t,s,i){t.value=s,t.getSnapshot=i,t0(t)&&a0(e)}function e0(e,t,s){return s(function(){t0(t)&&a0(e)})}function t0(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!$t(e,s)}catch{return!0}}function a0(e){var t=Zs(e,2);t!==null&&Ut(t,e,2)}function sc(e){var t=kt();if(typeof e=="function"){var s=e;if(e=s(),ln){ls(!0);try{s()}finally{ls(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t}function s0(e,t,s,i){return e.baseState=s,tc(e,He,typeof i=="function"?i:Ha)}function jv(e,t,s,i,c){if(Gi(e))throw Error(l(485));if(e=t.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};G.T!==null?s(!0):h.isTransition=!1,i(h),s=t.pending,s===null?(h.next=t.pending=h,n0(t,h)):(h.next=s.next,t.pending=s.next=h)}}function n0(e,t){var s=t.action,i=t.payload,c=e.state;if(t.isTransition){var h=G.T,y={};G.T=y;try{var x=s(c,i),T=G.S;T!==null&&T(y,x),r0(e,t,x)}catch(L){nc(e,t,L)}finally{h!==null&&y.types!==null&&(h.types=y.types),G.T=h}}else try{h=s(c,i),r0(e,t,h)}catch(L){nc(e,t,L)}}function r0(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(i){l0(e,t,i)},function(i){return nc(e,t,i)}):l0(e,t,s)}function l0(e,t,s){t.status="fulfilled",t.value=s,i0(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,n0(e,s)))}function nc(e,t,s){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=s,i0(t),t=t.next;while(t!==i)}e.action=null}function i0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function o0(e,t){return t}function u0(e,t){if(Ce){var s=Ge.formState;if(s!==null){e:{var i=xe;if(Ce){if(Ve){t:{for(var c=Ve,h=aa;c.nodeType!==8;){if(!h){c=null;break t}if(c=na(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){Ve=na(c.nextSibling),i=c.data==="F!";break e}}ds(i)}i=!1}i&&(t=s[0])}}return s=kt(),s.memoizedState=s.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o0,lastRenderedState:t},s.queue=i,s=E0.bind(null,xe,i),i.dispatch=s,i=sc(!1),h=cc.bind(null,xe,!1,i.queue),i=kt(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,s=jv.bind(null,xe,c,h,s),c.dispatch=s,i.memoizedState=e,[t,s,!1]}function c0(e){var t=et();return d0(t,He,e)}function d0(e,t,s){if(t=tc(e,t,o0)[0],e=Hi(Ha)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ml(t)}catch(y){throw y===Zn?Oi:y}else i=t;t=et();var c=t.queue,h=c.dispatch;return s!==t.memoizedState&&(xe.flags|=2048,ar(9,{destroy:void 0},kv.bind(null,c,s),null)),[i,h,e]}function kv(e,t){e.action=t}function h0(e){var t=et(),s=He;if(s!==null)return d0(t,s,e);et(),t=t.memoizedState,s=et();var i=s.queue.dispatch;return s.memoizedState=e,[t,i,!1]}function ar(e,t,s,i){return e={tag:e,create:s,deps:i,inst:t,next:null},t=xe.updateQueue,t===null&&(t=qi(),xe.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e),e}function f0(){return et().memoizedState}function $i(e,t,s,i){var c=kt();xe.flags|=e,c.memoizedState=ar(1|t,{destroy:void 0},s,i===void 0?null:i)}function Pi(e,t,s,i){var c=et();i=i===void 0?null:i;var h=c.memoizedState.inst;He!==null&&i!==null&&Xu(i,He.memoizedState.deps)?c.memoizedState=ar(t,h,s,i):(xe.flags|=e,c.memoizedState=ar(1|t,h,s,i))}function m0(e,t){$i(8390656,8,e,t)}function rc(e,t){Pi(2048,8,e,t)}function Nv(e){xe.flags|=4;var t=xe.updateQueue;if(t===null)t=qi(),xe.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function g0(e){var t=et().memoizedState;return Nv({ref:t,nextImpl:e}),function(){if((Ue&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function p0(e,t){return Pi(4,2,e,t)}function y0(e,t){return Pi(4,4,e,t)}function b0(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function v0(e,t,s){s=s!=null?s.concat([e]):null,Pi(4,4,b0.bind(null,t,e),s)}function lc(){}function x0(e,t){var s=et();t=t===void 0?null:t;var i=s.memoizedState;return t!==null&&Xu(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function w0(e,t){var s=et();t=t===void 0?null:t;var i=s.memoizedState;if(t!==null&&Xu(t,i[1]))return i[0];if(i=e(),ln){ls(!0);try{e()}finally{ls(!1)}}return s.memoizedState=[i,t],i}function ic(e,t,s){return s===void 0||(Ba&1073741824)!==0&&(Te&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=_m(),xe.lanes|=e,xs|=e,s)}function _0(e,t,s,i){return $t(s,t)?s:Wn.current!==null?(e=ic(e,s,i),$t(e,t)||(nt=!0),e):(Ba&42)===0||(Ba&1073741824)!==0&&(Te&261930)===0?(nt=!0,e.memoizedState=s):(e=_m(),xe.lanes|=e,xs|=e,t)}function S0(e,t,s,i,c){var h=Z.p;Z.p=h!==0&&8>h?h:8;var y=G.T,x={};G.T=x,cc(e,!1,t,s);try{var T=c(),L=G.S;if(L!==null&&L(x,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var V=wv(T,i);gl(e,t,V,It(e))}else gl(e,t,i,It(e))}catch(Y){gl(e,t,{then:function(){},status:"rejected",reason:Y},It())}finally{Z.p=h,y!==null&&x.types!==null&&(y.types=x.types),G.T=y}}function Tv(){}function oc(e,t,s,i){if(e.tag!==5)throw Error(l(476));var c=j0(e).queue;S0(e,c,t,H,s===null?Tv:function(){return k0(e),s(i)})}function j0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:H},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function k0(e){var t=j0(e);t.next===null&&(t=e.alternate.memoizedState),gl(e,t.next.queue,{},It())}function uc(){return yt(Rl)}function N0(){return et().memoizedState}function T0(){return et().memoizedState}function Ev(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=It();e=ms(s);var i=gs(t,e,s);i!==null&&(Ut(i,t,s),cl(i,t,s)),t={cache:qu()},e.payload=t;return}t=t.return}}function Cv(e,t,s){var i=It();s={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Gi(e)?C0(t,s):(s=Tu(e,t,s,i),s!==null&&(Ut(s,e,i),O0(s,t,i)))}function E0(e,t,s){var i=It();gl(e,t,s,i)}function gl(e,t,s,i){var c={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Gi(e))C0(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var y=t.lastRenderedState,x=h(y,s);if(c.hasEagerState=!0,c.eagerState=x,$t(x,y))return Si(e,t,c,0),Ge===null&&_i(),!1}catch{}finally{}if(s=Tu(e,t,c,i),s!==null)return Ut(s,e,i),O0(s,t,i),!0}return!1}function cc(e,t,s,i){if(i={lane:2,revertLane:Pc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Gi(e)){if(t)throw Error(l(479))}else t=Tu(e,s,i,2),t!==null&&Ut(t,e,2)}function Gi(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function C0(e,t){er=zi=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function O0(e,t,s){if((s&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Mh(e,s)}}var pl={readContext:yt,use:Bi,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};pl.useEffectEvent=Je;var A0={readContext:yt,use:Bi,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:m0,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,$i(4194308,4,b0.bind(null,t,e),s)},useLayoutEffect:function(e,t){return $i(4194308,4,e,t)},useInsertionEffect:function(e,t){$i(4,2,e,t)},useMemo:function(e,t){var s=kt();t=t===void 0?null:t;var i=e();if(ln){ls(!0);try{e()}finally{ls(!1)}}return s.memoizedState=[i,t],i},useReducer:function(e,t,s){var i=kt();if(s!==void 0){var c=s(t);if(ln){ls(!0);try{s(t)}finally{ls(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=Cv.bind(null,xe,e),[i.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=sc(e);var t=e.queue,s=E0.bind(null,xe,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:lc,useDeferredValue:function(e,t){var s=kt();return ic(s,e,t)},useTransition:function(){var e=sc(!1);return e=S0.bind(null,xe,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var i=xe,c=kt();if(Ce){if(s===void 0)throw Error(l(407));s=s()}else{if(s=t(),Ge===null)throw Error(l(349));(Te&127)!==0||Ff(i,t,s)}c.memoizedState=s;var h={value:s,getSnapshot:t};return c.queue=h,m0(e0.bind(null,i,h,e),[e]),i.flags|=2048,ar(9,{destroy:void 0},Wf.bind(null,i,h,s,t),null),s},useId:function(){var e=kt(),t=Ge.identifierPrefix;if(Ce){var s=ka,i=ja;s=(i&~(1<<32-Ht(i)-1)).toString(32)+s,t="_"+t+"R_"+s,s=Li++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=_v++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:uc,useFormState:u0,useActionState:u0,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=cc.bind(null,xe,!0,s),s.dispatch=t,[e,t]},useMemoCache:ec,useCacheRefresh:function(){return kt().memoizedState=Ev.bind(null,xe)},useEffectEvent:function(e){var t=kt(),s={impl:e};return t.memoizedState=s,function(){if((Ue&2)!==0)throw Error(l(440));return s.impl.apply(void 0,arguments)}}},dc={readContext:yt,use:Bi,useCallback:x0,useContext:yt,useEffect:rc,useImperativeHandle:v0,useInsertionEffect:p0,useLayoutEffect:y0,useMemo:w0,useReducer:Hi,useRef:f0,useState:function(){return Hi(Ha)},useDebugValue:lc,useDeferredValue:function(e,t){var s=et();return _0(s,He.memoizedState,e,t)},useTransition:function(){var e=Hi(Ha)[0],t=et().memoizedState;return[typeof e=="boolean"?e:ml(e),t]},useSyncExternalStore:Zf,useId:N0,useHostTransitionStatus:uc,useFormState:c0,useActionState:c0,useOptimistic:function(e,t){var s=et();return s0(s,He,e,t)},useMemoCache:ec,useCacheRefresh:T0};dc.useEffectEvent=g0;var R0={readContext:yt,use:Bi,useCallback:x0,useContext:yt,useEffect:rc,useImperativeHandle:v0,useInsertionEffect:p0,useLayoutEffect:y0,useMemo:w0,useReducer:ac,useRef:f0,useState:function(){return ac(Ha)},useDebugValue:lc,useDeferredValue:function(e,t){var s=et();return He===null?ic(s,e,t):_0(s,He.memoizedState,e,t)},useTransition:function(){var e=ac(Ha)[0],t=et().memoizedState;return[typeof e=="boolean"?e:ml(e),t]},useSyncExternalStore:Zf,useId:N0,useHostTransitionStatus:uc,useFormState:h0,useActionState:h0,useOptimistic:function(e,t){var s=et();return He!==null?s0(s,He,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ec,useCacheRefresh:T0};R0.useEffectEvent=g0;function hc(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:v({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var fc={enqueueSetState:function(e,t,s){e=e._reactInternals;var i=It(),c=ms(i);c.payload=t,s!=null&&(c.callback=s),t=gs(e,c,i),t!==null&&(Ut(t,e,i),cl(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=It(),c=ms(i);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=gs(e,c,i),t!==null&&(Ut(t,e,i),cl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=It(),i=ms(s);i.tag=2,t!=null&&(i.callback=t),t=gs(e,i,s),t!==null&&(Ut(t,e,s),cl(t,e,s))}};function D0(e,t,s,i,c,h,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,y):t.prototype&&t.prototype.isPureReactComponent?!al(s,i)||!al(c,h):!0}function M0(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&fc.enqueueReplaceState(t,t.state,null)}function on(e,t){var s=t;if("ref"in t){s={};for(var i in t)i!=="ref"&&(s[i]=t[i])}if(e=e.defaultProps){s===t&&(s=v({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}function U0(e){wi(e)}function z0(e){console.error(e)}function L0(e){wi(e)}function Ki(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function q0(e,t,s){try{var i=e.onCaughtError;i(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function mc(e,t,s){return s=ms(s),s.tag=3,s.payload={element:null},s.callback=function(){Ki(e,t)},s}function B0(e){return e=ms(e),e.tag=3,e}function H0(e,t,s,i){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;e.payload=function(){return c(h)},e.callback=function(){q0(t,s,i)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){q0(t,s,i),typeof c!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})})}function Ov(e,t,s,i,c){if(s.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=s.alternate,t!==null&&Yn(t,s,c,!0),s=Gt.current,s!==null){switch(s.tag){case 31:case 13:return sa===null?ao():s.alternate===null&&Ze===0&&(Ze=3),s.flags&=-257,s.flags|=65536,s.lanes=c,i===Ai?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([i]):t.add(i),Bc(e,i,c)),!1;case 22:return s.flags|=65536,i===Ai?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([i]):s.add(i)),Bc(e,i,c)),!1}throw Error(l(435,s.tag))}return Bc(e,i,c),ao(),!1}if(Ce)return t=Gt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==Du&&(e=Error(l(422),{cause:i}),rl(Wt(e,s)))):(i!==Du&&(t=Error(l(423),{cause:i}),rl(Wt(t,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=Wt(i,s),c=mc(e.stateNode,i,c),Ku(e,c),Ze!==4&&(Ze=2)),!1;var h=Error(l(520),{cause:i});if(h=Wt(h,s),jl===null?jl=[h]:jl.push(h),Ze!==4&&(Ze=2),t===null)return!0;i=Wt(i,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=mc(s.stateNode,i,e),Ku(s,e),!1;case 1:if(t=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ws===null||!ws.has(h))))return s.flags|=65536,c&=-c,s.lanes|=c,c=B0(c),H0(c,e,s,i),Ku(s,c),!1}s=s.return}while(s!==null);return!1}var gc=Error(l(461)),nt=!1;function bt(e,t,s,i){t.child=e===null?Kf(t,null,s,i):rn(t,e.child,s,i)}function $0(e,t,s,i,c){s=s.render;var h=t.ref;if("ref"in i){var y={};for(var x in i)x!=="ref"&&(y[x]=i[x])}else y=i;return tn(t),i=Ju(e,t,s,y,h,c),x=Zu(),e!==null&&!nt?(Fu(e,t,c),$a(e,t,c)):(Ce&&x&&Au(t),t.flags|=1,bt(e,t,i,c),t.child)}function P0(e,t,s,i,c){if(e===null){var h=s.type;return typeof h=="function"&&!Eu(h)&&h.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=h,G0(e,t,h,i,c)):(e=ki(s.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Sc(e,c)){var y=h.memoizedProps;if(s=s.compare,s=s!==null?s:al,s(y,i)&&e.ref===t.ref)return $a(e,t,c)}return t.flags|=1,e=Ua(h,i),e.ref=t.ref,e.return=t,t.child=e}function G0(e,t,s,i,c){if(e!==null){var h=e.memoizedProps;if(al(h,i)&&e.ref===t.ref)if(nt=!1,t.pendingProps=i=h,Sc(e,c))(e.flags&131072)!==0&&(nt=!0);else return t.lanes=e.lanes,$a(e,t,c)}return pc(e,t,s,i,c)}function K0(e,t,s,i){var c=i.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;i=c&~h}else i=0,t.child=null;return V0(e,t,h,s,i)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ci(t,h!==null?h.cachePool:null),h!==null?If(t,h):Qu(),Yf(t);else return i=t.lanes=536870912,V0(e,t,h!==null?h.baseLanes|s:s,s,i)}else h!==null?(Ci(t,h.cachePool),If(t,h),ys(),t.memoizedState=null):(e!==null&&Ci(t,null),Qu(),ys());return bt(e,t,c,s),t.child}function yl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function V0(e,t,s,i,c){var h=Hu();return h=h===null?null:{parent:at._currentValue,pool:h},t.memoizedState={baseLanes:s,cachePool:h},e!==null&&Ci(t,null),Qu(),Yf(t),e!==null&&Yn(e,t,i,!0),t.childLanes=c,null}function Vi(e,t){return t=Ii({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Q0(e,t,s){return rn(t,e.child,null,s),e=Vi(t,t.pendingProps),e.flags|=2,Kt(t),t.memoizedState=null,e}function Av(e,t,s){var i=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ce){if(i.mode==="hidden")return e=Vi(t,i),t.lanes=536870912,yl(null,e);if(Yu(t),(e=Ve)?(e=ng(e,aa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:us!==null?{id:ja,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},s=Cf(e),s.return=t,t.child=s,pt=t,Ve=null)):e=null,e===null)throw ds(t);return t.lanes=536870912,null}return Vi(t,i)}var h=e.memoizedState;if(h!==null){var y=h.dehydrated;if(Yu(t),c)if(t.flags&256)t.flags&=-257,t=Q0(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(nt||Yn(e,t,s,!1),c=(s&e.childLanes)!==0,nt||c){if(i=Ge,i!==null&&(y=Uh(i,s),y!==0&&y!==h.retryLane))throw h.retryLane=y,Zs(e,y),Ut(i,e,y),gc;ao(),t=Q0(e,t,s)}else e=h.treeContext,Ve=na(y.nextSibling),pt=t,Ce=!0,cs=null,aa=!1,e!==null&&Rf(t,e),t=Vi(t,i),t.flags|=4096;return t}return e=Ua(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Qi(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(l(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function pc(e,t,s,i,c){return tn(t),s=Ju(e,t,s,i,void 0,c),i=Zu(),e!==null&&!nt?(Fu(e,t,c),$a(e,t,c)):(Ce&&i&&Au(t),t.flags|=1,bt(e,t,s,c),t.child)}function I0(e,t,s,i,c,h){return tn(t),t.updateQueue=null,s=Jf(t,i,s,c),Xf(e),i=Zu(),e!==null&&!nt?(Fu(e,t,h),$a(e,t,h)):(Ce&&i&&Au(t),t.flags|=1,bt(e,t,s,h),t.child)}function Y0(e,t,s,i,c){if(tn(t),t.stateNode===null){var h=Kn,y=s.contextType;typeof y=="object"&&y!==null&&(h=yt(y)),h=new s(i,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=fc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=i,h.state=t.memoizedState,h.refs={},Pu(t),y=s.contextType,h.context=typeof y=="object"&&y!==null?yt(y):Kn,h.state=t.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(hc(t,s,y,i),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&fc.enqueueReplaceState(h,h.state,null),hl(t,i,h,c),dl(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){h=t.stateNode;var x=t.memoizedProps,T=on(s,x);h.props=T;var L=h.context,V=s.contextType;y=Kn,typeof V=="object"&&V!==null&&(y=yt(V));var Y=s.getDerivedStateFromProps;V=typeof Y=="function"||typeof h.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,V||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x||L!==y)&&M0(t,h,i,y),fs=!1;var B=t.memoizedState;h.state=B,hl(t,i,h,c),dl(),L=t.memoizedState,x||B!==L||fs?(typeof Y=="function"&&(hc(t,s,Y,i),L=t.memoizedState),(T=fs||D0(t,s,T,i,B,L,y))?(V||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=L),h.props=i,h.state=L,h.context=y,i=T):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,Gu(e,t),y=t.memoizedProps,V=on(s,y),h.props=V,Y=t.pendingProps,B=h.context,L=s.contextType,T=Kn,typeof L=="object"&&L!==null&&(T=yt(L)),x=s.getDerivedStateFromProps,(L=typeof x=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==Y||B!==T)&&M0(t,h,i,T),fs=!1,B=t.memoizedState,h.state=B,hl(t,i,h,c),dl();var K=t.memoizedState;y!==Y||B!==K||fs||e!==null&&e.dependencies!==null&&Ti(e.dependencies)?(typeof x=="function"&&(hc(t,s,x,i),K=t.memoizedState),(V=fs||D0(t,s,V,i,B,K,T)||e!==null&&e.dependencies!==null&&Ti(e.dependencies))?(L||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,K,T),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,K,T)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=K),h.props=i,h.state=K,h.context=T,i=V):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),i=!1)}return h=i,Qi(e,t),i=(t.flags&128)!==0,h||i?(h=t.stateNode,s=i&&typeof s.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&i?(t.child=rn(t,e.child,null,c),t.child=rn(t,null,s,c)):bt(e,t,s,c),t.memoizedState=h.state,e=t.child):e=$a(e,t,c),e}function X0(e,t,s,i){return Ws(),t.flags|=256,bt(e,t,s,i),t.child}var yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bc(e){return{baseLanes:e,cachePool:qf()}}function vc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Qt),e}function J0(e,t,s){var i=t.pendingProps,c=!1,h=(t.flags&128)!==0,y;if((y=h)||(y=e!==null&&e.memoizedState===null?!1:(We.current&2)!==0),y&&(c=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(c?ps(t):ys(),(e=Ve)?(e=ng(e,aa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:us!==null?{id:ja,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},s=Cf(e),s.return=t,t.child=s,pt=t,Ve=null)):e=null,e===null)throw ds(t);return td(e)?t.lanes=32:t.lanes=536870912,null}var x=i.children;return i=i.fallback,c?(ys(),c=t.mode,x=Ii({mode:"hidden",children:x},c),i=Fs(i,c,s,null),x.return=t,i.return=t,x.sibling=i,t.child=x,i=t.child,i.memoizedState=bc(s),i.childLanes=vc(e,y,s),t.memoizedState=yc,yl(null,i)):(ps(t),xc(t,x))}var T=e.memoizedState;if(T!==null&&(x=T.dehydrated,x!==null)){if(h)t.flags&256?(ps(t),t.flags&=-257,t=wc(e,t,s)):t.memoizedState!==null?(ys(),t.child=e.child,t.flags|=128,t=null):(ys(),x=i.fallback,c=t.mode,i=Ii({mode:"visible",children:i.children},c),x=Fs(x,c,s,null),x.flags|=2,i.return=t,x.return=t,i.sibling=x,t.child=i,rn(t,e.child,null,s),i=t.child,i.memoizedState=bc(s),i.childLanes=vc(e,y,s),t.memoizedState=yc,t=yl(null,i));else if(ps(t),td(x)){if(y=x.nextSibling&&x.nextSibling.dataset,y)var L=y.dgst;y=L,i=Error(l(419)),i.stack="",i.digest=y,rl({value:i,source:null,stack:null}),t=wc(e,t,s)}else if(nt||Yn(e,t,s,!1),y=(s&e.childLanes)!==0,nt||y){if(y=Ge,y!==null&&(i=Uh(y,s),i!==0&&i!==T.retryLane))throw T.retryLane=i,Zs(e,i),Ut(y,e,i),gc;ed(x)||ao(),t=wc(e,t,s)}else ed(x)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,Ve=na(x.nextSibling),pt=t,Ce=!0,cs=null,aa=!1,e!==null&&Rf(t,e),t=xc(t,i.children),t.flags|=4096);return t}return c?(ys(),x=i.fallback,c=t.mode,T=e.child,L=T.sibling,i=Ua(T,{mode:"hidden",children:i.children}),i.subtreeFlags=T.subtreeFlags&65011712,L!==null?x=Ua(L,x):(x=Fs(x,c,s,null),x.flags|=2),x.return=t,i.return=t,i.sibling=x,t.child=i,yl(null,i),i=t.child,x=e.child.memoizedState,x===null?x=bc(s):(c=x.cachePool,c!==null?(T=at._currentValue,c=c.parent!==T?{parent:T,pool:T}:c):c=qf(),x={baseLanes:x.baseLanes|s,cachePool:c}),i.memoizedState=x,i.childLanes=vc(e,y,s),t.memoizedState=yc,yl(e.child,i)):(ps(t),s=e.child,e=s.sibling,s=Ua(s,{mode:"visible",children:i.children}),s.return=t,s.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=s,t.memoizedState=null,s)}function xc(e,t){return t=Ii({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ii(e,t){return e=Pt(22,e,null,t),e.lanes=0,e}function wc(e,t,s){return rn(t,e.child,null,s),e=xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Z0(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),zu(e.return,t,s)}function _c(e,t,s,i,c,h){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:c,treeForkCount:h}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=i,y.tail=s,y.tailMode=c,y.treeForkCount=h)}function F0(e,t,s){var i=t.pendingProps,c=i.revealOrder,h=i.tail;i=i.children;var y=We.current,x=(y&2)!==0;if(x?(y=y&1|2,t.flags|=128):y&=1,W(We,y),bt(e,t,i,s),i=Ce?nl:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Z0(e,s,t);else if(e.tag===19)Z0(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&Ui(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),_c(t,!1,c,s,h,i);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ui(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}_c(t,!0,s,null,h,i);break;case"together":_c(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function $a(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),xs|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Yn(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,s=Ua(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ua(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Sc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ti(e)))}function Rv(e,t,s){switch(t.tag){case 3:tt(t,t.stateNode.containerInfo),hs(t,at,e.memoizedState.cache),Ws();break;case 27:case 5:ua(t);break;case 4:tt(t,t.stateNode.containerInfo);break;case 10:hs(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Yu(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ps(t),t.flags|=128,null):(s&t.child.childLanes)!==0?J0(e,t,s):(ps(t),e=$a(e,t,s),e!==null?e.sibling:null);ps(t);break;case 19:var c=(e.flags&128)!==0;if(i=(s&t.childLanes)!==0,i||(Yn(e,t,s,!1),i=(s&t.childLanes)!==0),c){if(i)return F0(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(We,We.current),i)break;return null;case 22:return t.lanes=0,K0(e,t,s,t.pendingProps);case 24:hs(t,at,e.memoizedState.cache)}return $a(e,t,s)}function W0(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)nt=!0;else{if(!Sc(e,s)&&(t.flags&128)===0)return nt=!1,Rv(e,t,s);nt=(e.flags&131072)!==0}else nt=!1,Ce&&(t.flags&1048576)!==0&&Af(t,nl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=sn(t.elementType),t.type=e,typeof e=="function")Eu(e)?(i=on(e,i),t.tag=1,t=Y0(null,t,e,i,s)):(t.tag=0,t=pc(null,t,e,i,s));else{if(e!=null){var c=e.$$typeof;if(c===k){t.tag=11,t=$0(null,t,e,i,s);break e}else if(c===P){t.tag=14,t=P0(null,t,e,i,s);break e}}throw t=ve(e)||e,Error(l(306,t,""))}}return t;case 0:return pc(e,t,t.type,t.pendingProps,s);case 1:return i=t.type,c=on(i,t.pendingProps),Y0(e,t,i,c,s);case 3:e:{if(tt(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var h=t.memoizedState;c=h.element,Gu(e,t),hl(t,i,null,s);var y=t.memoizedState;if(i=y.cache,hs(t,at,i),i!==h.cache&&Lu(t,[at],s,!0),dl(),i=y.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=X0(e,t,i,s);break e}else if(i!==c){c=Wt(Error(l(424)),t),rl(c),t=X0(e,t,i,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ve=na(e.firstChild),pt=t,Ce=!0,cs=null,aa=!0,s=Kf(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ws(),i===c){t=$a(e,t,s);break e}bt(e,t,i,s)}t=t.child}return t;case 26:return Qi(e,t),e===null?(s=cg(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ce||(s=t.type,e=t.pendingProps,i=uo(we.current).createElement(s),i[gt]=t,i[Ct]=e,vt(i,s,e),ht(i),t.stateNode=i):t.memoizedState=cg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ua(t),e===null&&Ce&&(i=t.stateNode=ig(t.type,t.pendingProps,we.current),pt=t,aa=!0,c=Ve,ks(t.type)?(ad=c,Ve=na(i.firstChild)):Ve=c),bt(e,t,t.pendingProps.children,s),Qi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((c=i=Ve)&&(i=ox(i,t.type,t.pendingProps,aa),i!==null?(t.stateNode=i,pt=t,Ve=na(i.firstChild),aa=!1,c=!0):c=!1),c||ds(t)),ua(t),c=t.type,h=t.pendingProps,y=e!==null?e.memoizedProps:null,i=h.children,Zc(c,h)?i=null:y!==null&&Zc(c,y)&&(t.flags|=32),t.memoizedState!==null&&(c=Ju(e,t,Sv,null,null,s),Rl._currentValue=c),Qi(e,t),bt(e,t,i,s),t.child;case 6:return e===null&&Ce&&((e=s=Ve)&&(s=ux(s,t.pendingProps,aa),s!==null?(t.stateNode=s,pt=t,Ve=null,e=!0):e=!1),e||ds(t)),null;case 13:return J0(e,t,s);case 4:return tt(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=rn(t,null,i,s):bt(e,t,i,s),t.child;case 11:return $0(e,t,t.type,t.pendingProps,s);case 7:return bt(e,t,t.pendingProps,s),t.child;case 8:return bt(e,t,t.pendingProps.children,s),t.child;case 12:return bt(e,t,t.pendingProps.children,s),t.child;case 10:return i=t.pendingProps,hs(t,t.type,i.value),bt(e,t,i.children,s),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,tn(t),c=yt(c),i=i(c),t.flags|=1,bt(e,t,i,s),t.child;case 14:return P0(e,t,t.type,t.pendingProps,s);case 15:return G0(e,t,t.type,t.pendingProps,s);case 19:return F0(e,t,s);case 31:return Av(e,t,s);case 22:return K0(e,t,s,t.pendingProps);case 24:return tn(t),i=yt(at),e===null?(c=Hu(),c===null&&(c=Ge,h=qu(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=s),c=h),t.memoizedState={parent:i,cache:c},Pu(t),hs(t,at,c)):((e.lanes&s)!==0&&(Gu(e,t),hl(t,null,null,s),dl()),c=e.memoizedState,h=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),hs(t,at,i)):(i=h.cache,hs(t,at,i),i!==c.cache&&Lu(t,[at],s,!0))),bt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Pa(e){e.flags|=4}function jc(e,t,s,i,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Nm())e.flags|=8192;else throw nn=Ai,$u}else e.flags&=-16777217}function em(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!gg(t))if(Nm())e.flags|=8192;else throw nn=Ai,$u}function Yi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Rh():536870912,e.lanes|=t,lr|=t)}function bl(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function Dv(e,t,s){var i=t.pendingProps;switch(Ru(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return s=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),qa(at),Me(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(In(t)?Pa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Mu())),Qe(t),null;case 26:var c=t.type,h=t.memoizedState;return e===null?(Pa(t),h!==null?(Qe(t),em(t,h)):(Qe(t),jc(t,c,null,i,s))):h?h!==e.memoizedState?(Pa(t),Qe(t),em(t,h)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Pa(t),Qe(t),jc(t,c,e,i,s)),null;case 27:if(ca(t),s=we.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Pa(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return Qe(t),null}e=te.current,In(t)?Df(t):(e=ig(c,i,s),t.stateNode=e,Pa(t))}return Qe(t),null;case 5:if(ca(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Pa(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return Qe(t),null}if(h=te.current,In(t))Df(t);else{var y=uo(we.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof i.is=="string"?y.createElement("select",{is:i.is}):y.createElement("select"),i.multiple?h.multiple=!0:i.size&&(h.size=i.size);break;default:h=typeof i.is=="string"?y.createElement(c,{is:i.is}):y.createElement(c)}}h[gt]=t,h[Ct]=i;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=h;e:switch(vt(h,c,i),c){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Pa(t)}}return Qe(t),jc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Pa(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=we.current,In(t)){if(e=t.stateNode,s=t.memoizedProps,i=null,c=pt,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[gt]=t,e=!!(e.nodeValue===s||i!==null&&i.suppressHydrationWarning===!0||Jm(e.nodeValue,s)),e||ds(t,!0)}else e=uo(e).createTextNode(i),e[gt]=t,t.stateNode=e}return Qe(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(i=In(t),s!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[gt]=t}else Ws(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else s=Mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Kt(t),t):(Kt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Qe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=In(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[gt]=t}else Ws(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),c=!1}else c=Mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Kt(t),t):(Kt(t),null)}return Kt(t),(t.flags&128)!==0?(t.lanes=s,t):(s=i!==null,e=e!==null&&e.memoizedState!==null,s&&(i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Yi(t,t.updateQueue),Qe(t),null);case 4:return Me(),e===null&&Qc(t.stateNode.containerInfo),Qe(t),null;case 10:return qa(t.type),Qe(t),null;case 19:if(Q(We),i=t.memoizedState,i===null)return Qe(t),null;if(c=(t.flags&128)!==0,h=i.rendering,h===null)if(c)bl(i,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Ui(e),h!==null){for(t.flags|=128,bl(i,!1),e=h.updateQueue,t.updateQueue=e,Yi(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Ef(s,e),s=s.sibling;return W(We,We.current&1|2),Ce&&za(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&qt()>Wi&&(t.flags|=128,c=!0,bl(i,!1),t.lanes=4194304)}else{if(!c)if(e=Ui(h),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Yi(t,e),bl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!Ce)return Qe(t),null}else 2*qt()-i.renderingStartTime>Wi&&s!==536870912&&(t.flags|=128,c=!0,bl(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qt(),e.sibling=null,s=We.current,W(We,c?s&1|2:s&1),Ce&&za(t,i.treeForkCount),e):(Qe(t),null);case 22:case 23:return Kt(t),Iu(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(s&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),s=t.updateQueue,s!==null&&Yi(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==s&&(t.flags|=2048),e!==null&&Q(an),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),qa(at),Qe(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function Mv(e,t){switch(Ru(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qa(at),Me(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ca(t),null;case 31:if(t.memoizedState!==null){if(Kt(t),t.alternate===null)throw Error(l(340));Ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Kt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(We),null;case 4:return Me(),null;case 10:return qa(t.type),null;case 22:case 23:return Kt(t),Iu(),e!==null&&Q(an),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return qa(at),null;case 25:return null;default:return null}}function tm(e,t){switch(Ru(t),t.tag){case 3:qa(at),Me();break;case 26:case 27:case 5:ca(t);break;case 4:Me();break;case 31:t.memoizedState!==null&&Kt(t);break;case 13:Kt(t);break;case 19:Q(We);break;case 10:qa(t.type);break;case 22:case 23:Kt(t),Iu(),e!==null&&Q(an);break;case 24:qa(at)}}function vl(e,t){try{var s=t.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var c=i.next;s=c;do{if((s.tag&e)===e){i=void 0;var h=s.create,y=s.inst;i=h(),y.destroy=i}s=s.next}while(s!==c)}}catch(x){Be(t,t.return,x)}}function bs(e,t,s){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var h=c.next;i=h;do{if((i.tag&e)===e){var y=i.inst,x=y.destroy;if(x!==void 0){y.destroy=void 0,c=t;var T=s,L=x;try{L()}catch(V){Be(c,T,V)}}}i=i.next}while(i!==h)}}catch(V){Be(t,t.return,V)}}function am(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Qf(t,s)}catch(i){Be(e,e.return,i)}}}function sm(e,t,s){s.props=on(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(i){Be(e,t,i)}}function xl(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof s=="function"?e.refCleanup=s(i):s.current=i}}catch(c){Be(e,t,c)}}function Na(e,t){var s=e.ref,i=e.refCleanup;if(s!==null)if(typeof i=="function")try{i()}catch(c){Be(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){Be(e,t,c)}else s.current=null}function nm(e){var t=e.type,s=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&i.focus();break e;case"img":s.src?i.src=s.src:s.srcSet&&(i.srcset=s.srcSet)}}catch(c){Be(e,e.return,c)}}function kc(e,t,s){try{var i=e.stateNode;ax(i,e.type,s,t),i[Ct]=t}catch(c){Be(e,e.return,c)}}function rm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ks(e.type)||e.tag===4}function Nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ks(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tc(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Da));else if(i!==4&&(i===27&&ks(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Tc(e,t,s),e=e.sibling;e!==null;)Tc(e,t,s),e=e.sibling}function Xi(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(i===27&&ks(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Xi(e,t,s),e=e.sibling;e!==null;)Xi(e,t,s),e=e.sibling}function lm(e){var t=e.stateNode,s=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);vt(t,i,s),t[gt]=e,t[Ct]=s}catch(h){Be(e,e.return,h)}}var Ga=!1,rt=!1,Ec=!1,im=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Uv(e,t){if(e=e.containerInfo,Xc=yo,e=vf(e),wu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var c=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var y=0,x=-1,T=-1,L=0,V=0,Y=e,B=null;t:for(;;){for(var K;Y!==s||c!==0&&Y.nodeType!==3||(x=y+c),Y!==h||i!==0&&Y.nodeType!==3||(T=y+i),Y.nodeType===3&&(y+=Y.nodeValue.length),(K=Y.firstChild)!==null;)B=Y,Y=K;for(;;){if(Y===e)break t;if(B===s&&++L===c&&(x=y),B===h&&++V===i&&(T=y),(K=Y.nextSibling)!==null)break;Y=B,B=Y.parentNode}Y=K}s=x===-1||T===-1?null:{start:x,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(Jc={focusedElem:e,selectionRange:s},yo=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){switch(t=ft,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)c=e[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=t,c=h.memoizedProps,h=h.memoizedState,i=s.stateNode;try{var ne=on(s.type,c);e=i.getSnapshotBeforeUpdate(ne,h),i.__reactInternalSnapshotBeforeUpdate=e}catch(me){Be(s,s.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Wc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Wc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}}function om(e,t,s){var i=s.flags;switch(s.tag){case 0:case 11:case 15:Va(e,s),i&4&&vl(5,s);break;case 1:if(Va(e,s),i&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(y){Be(s,s.return,y)}else{var c=on(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Be(s,s.return,y)}}i&64&&am(s),i&512&&xl(s,s.return);break;case 3:if(Va(e,s),i&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Qf(e,t)}catch(y){Be(s,s.return,y)}}break;case 27:t===null&&i&4&&lm(s);case 26:case 5:Va(e,s),t===null&&i&4&&nm(s),i&512&&xl(s,s.return);break;case 12:Va(e,s);break;case 31:Va(e,s),i&4&&dm(e,s);break;case 13:Va(e,s),i&4&&hm(e,s),i&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Kv.bind(null,s),cx(e,s))));break;case 22:if(i=s.memoizedState!==null||Ga,!i){t=t!==null&&t.memoizedState!==null||rt,c=Ga;var h=rt;Ga=i,(rt=t)&&!h?Qa(e,s,(s.subtreeFlags&8772)!==0):Va(e,s),Ga=c,rt=h}break;case 30:break;default:Va(e,s)}}function um(e){var t=e.alternate;t!==null&&(e.alternate=null,um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&nu(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ie=null,At=!1;function Ka(e,t,s){for(s=s.child;s!==null;)cm(e,t,s),s=s.sibling}function cm(e,t,s){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Kr,s)}catch{}switch(s.tag){case 26:rt||Na(s,t),Ka(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:rt||Na(s,t);var i=Ie,c=At;ks(s.type)&&(Ie=s.stateNode,At=!1),Ka(e,t,s),Cl(s.stateNode),Ie=i,At=c;break;case 5:rt||Na(s,t);case 6:if(i=Ie,c=At,Ie=null,Ka(e,t,s),Ie=i,At=c,Ie!==null)if(At)try{(Ie.nodeType===9?Ie.body:Ie.nodeName==="HTML"?Ie.ownerDocument.body:Ie).removeChild(s.stateNode)}catch(h){Be(s,t,h)}else try{Ie.removeChild(s.stateNode)}catch(h){Be(s,t,h)}break;case 18:Ie!==null&&(At?(e=Ie,ag(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),mr(e)):ag(Ie,s.stateNode));break;case 4:i=Ie,c=At,Ie=s.stateNode.containerInfo,At=!0,Ka(e,t,s),Ie=i,At=c;break;case 0:case 11:case 14:case 15:bs(2,s,t),rt||bs(4,s,t),Ka(e,t,s);break;case 1:rt||(Na(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"&&sm(s,t,i)),Ka(e,t,s);break;case 21:Ka(e,t,s);break;case 22:rt=(i=rt)||s.memoizedState!==null,Ka(e,t,s),rt=i;break;default:Ka(e,t,s)}}function dm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{mr(e)}catch(s){Be(t,t.return,s)}}}function hm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{mr(e)}catch(s){Be(t,t.return,s)}}function zv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new im),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new im),t;default:throw Error(l(435,e.tag))}}function Ji(e,t){var s=zv(e);t.forEach(function(i){if(!s.has(i)){s.add(i);var c=Vv.bind(null,e,i);i.then(c,c)}})}function Rt(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var c=s[i],h=e,y=t,x=y;e:for(;x!==null;){switch(x.tag){case 27:if(ks(x.type)){Ie=x.stateNode,At=!1;break e}break;case 5:Ie=x.stateNode,At=!1;break e;case 3:case 4:Ie=x.stateNode.containerInfo,At=!0;break e}x=x.return}if(Ie===null)throw Error(l(160));cm(h,y,c),Ie=null,At=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)fm(t,e),t=t.sibling}var ha=null;function fm(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rt(t,e),Dt(e),i&4&&(bs(3,e,e.return),vl(3,e),bs(5,e,e.return));break;case 1:Rt(t,e),Dt(e),i&512&&(rt||s===null||Na(s,s.return)),i&64&&Ga&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?i:s.concat(i))));break;case 26:var c=ha;if(Rt(t,e),Dt(e),i&512&&(rt||s===null||Na(s,s.return)),i&4){var h=s!==null?s.memoizedState:null;if(i=e.memoizedState,s===null)if(i===null)if(e.stateNode===null){e:{i=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Ir]||h[gt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(i),c.head.insertBefore(h,c.querySelector("head > title"))),vt(h,i,s),h[gt]=e,ht(h),i=h;break e;case"link":var y=fg("link","href",c).get(i+(s.href||""));if(y){for(var x=0;x<y.length;x++)if(h=y[x],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(x,1);break t}}h=c.createElement(i),vt(h,i,s),c.head.appendChild(h);break;case"meta":if(y=fg("meta","content",c).get(i+(s.content||""))){for(x=0;x<y.length;x++)if(h=y[x],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(x,1);break t}}h=c.createElement(i),vt(h,i,s),c.head.appendChild(h);break;default:throw Error(l(468,i))}h[gt]=e,ht(h),i=h}e.stateNode=i}else mg(c,e.type,e.stateNode);else e.stateNode=hg(c,i,e.memoizedProps);else h!==i?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,i===null?mg(c,e.type,e.stateNode):hg(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&kc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Rt(t,e),Dt(e),i&512&&(rt||s===null||Na(s,s.return)),s!==null&&i&4&&kc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Rt(t,e),Dt(e),i&512&&(rt||s===null||Na(s,s.return)),e.flags&32){c=e.stateNode;try{Ln(c,"")}catch(ne){Be(e,e.return,ne)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,kc(e,c,s!==null?s.memoizedProps:c)),i&1024&&(Ec=!0);break;case 6:if(Rt(t,e),Dt(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,s=e.stateNode;try{s.nodeValue=i}catch(ne){Be(e,e.return,ne)}}break;case 3:if(fo=null,c=ha,ha=co(t.containerInfo),Rt(t,e),ha=c,Dt(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{mr(t.containerInfo)}catch(ne){Be(e,e.return,ne)}Ec&&(Ec=!1,mm(e));break;case 4:i=ha,ha=co(e.stateNode.containerInfo),Rt(t,e),Dt(e),ha=i;break;case 12:Rt(t,e),Dt(e);break;case 31:Rt(t,e),Dt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ji(e,i)));break;case 13:Rt(t,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Fi=qt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ji(e,i)));break;case 22:c=e.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,L=Ga,V=rt;if(Ga=L||c,rt=V||T,Rt(t,e),rt=V,Ga=L,Dt(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(s===null||T||Ga||rt||un(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){T=s=t;try{if(h=T.stateNode,c)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{x=T.stateNode;var Y=T.memoizedProps.style,B=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;x.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ne){Be(T,T.return,ne)}}}else if(t.tag===6){if(s===null){T=t;try{T.stateNode.nodeValue=c?"":T.memoizedProps}catch(ne){Be(T,T.return,ne)}}}else if(t.tag===18){if(s===null){T=t;try{var K=T.stateNode;c?sg(K,!0):sg(T.stateNode,!1)}catch(ne){Be(T,T.return,ne)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(s=i.retryQueue,s!==null&&(i.retryQueue=null,Ji(e,s))));break;case 19:Rt(t,e),Dt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ji(e,i)));break;case 30:break;case 21:break;default:Rt(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{for(var s,i=e.return;i!==null;){if(rm(i)){s=i;break}i=i.return}if(s==null)throw Error(l(160));switch(s.tag){case 27:var c=s.stateNode,h=Nc(e);Xi(e,h,c);break;case 5:var y=s.stateNode;s.flags&32&&(Ln(y,""),s.flags&=-33);var x=Nc(e);Xi(e,x,y);break;case 3:case 4:var T=s.stateNode.containerInfo,L=Nc(e);Tc(e,L,T);break;default:throw Error(l(161))}}catch(V){Be(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;mm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Va(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)om(e,t.alternate,t),t=t.sibling}function un(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:bs(4,t,t.return),un(t);break;case 1:Na(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&sm(t,t.return,s),un(t);break;case 27:Cl(t.stateNode);case 26:case 5:Na(t,t.return),un(t);break;case 22:t.memoizedState===null&&un(t);break;case 30:un(t);break;default:un(t)}e=e.sibling}}function Qa(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,h=t,y=h.flags;switch(h.tag){case 0:case 11:case 15:Qa(c,h,s),vl(4,h);break;case 1:if(Qa(c,h,s),i=h,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){Be(i,i.return,L)}if(i=h,c=i.updateQueue,c!==null){var x=i.stateNode;try{var T=c.shared.hiddenCallbacks;if(T!==null)for(c.shared.hiddenCallbacks=null,c=0;c<T.length;c++)Vf(T[c],x)}catch(L){Be(i,i.return,L)}}s&&y&64&&am(h),xl(h,h.return);break;case 27:lm(h);case 26:case 5:Qa(c,h,s),s&&i===null&&y&4&&nm(h),xl(h,h.return);break;case 12:Qa(c,h,s);break;case 31:Qa(c,h,s),s&&y&4&&dm(c,h);break;case 13:Qa(c,h,s),s&&y&4&&hm(c,h);break;case 22:h.memoizedState===null&&Qa(c,h,s),xl(h,h.return);break;case 30:break;default:Qa(c,h,s)}t=t.sibling}}function Cc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&ll(s))}function Oc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ll(e))}function fa(e,t,s,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gm(e,t,s,i),t=t.sibling}function gm(e,t,s,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:fa(e,t,s,i),c&2048&&vl(9,t);break;case 1:fa(e,t,s,i);break;case 3:fa(e,t,s,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ll(e)));break;case 12:if(c&2048){fa(e,t,s,i),e=t.stateNode;try{var h=t.memoizedProps,y=h.id,x=h.onPostCommit;typeof x=="function"&&x(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Be(t,t.return,T)}}else fa(e,t,s,i);break;case 31:fa(e,t,s,i);break;case 13:fa(e,t,s,i);break;case 23:break;case 22:h=t.stateNode,y=t.alternate,t.memoizedState!==null?h._visibility&2?fa(e,t,s,i):wl(e,t):h._visibility&2?fa(e,t,s,i):(h._visibility|=2,sr(e,t,s,i,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Cc(y,t);break;case 24:fa(e,t,s,i),c&2048&&Oc(t.alternate,t);break;default:fa(e,t,s,i)}}function sr(e,t,s,i,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,y=t,x=s,T=i,L=y.flags;switch(y.tag){case 0:case 11:case 15:sr(h,y,x,T,c),vl(8,y);break;case 23:break;case 22:var V=y.stateNode;y.memoizedState!==null?V._visibility&2?sr(h,y,x,T,c):wl(h,y):(V._visibility|=2,sr(h,y,x,T,c)),c&&L&2048&&Cc(y.alternate,y);break;case 24:sr(h,y,x,T,c),c&&L&2048&&Oc(y.alternate,y);break;default:sr(h,y,x,T,c)}t=t.sibling}}function wl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,i=t,c=i.flags;switch(i.tag){case 22:wl(s,i),c&2048&&Cc(i.alternate,i);break;case 24:wl(s,i),c&2048&&Oc(i.alternate,i);break;default:wl(s,i)}t=t.sibling}}var _l=8192;function nr(e,t,s){if(e.subtreeFlags&_l)for(e=e.child;e!==null;)pm(e,t,s),e=e.sibling}function pm(e,t,s){switch(e.tag){case 26:nr(e,t,s),e.flags&_l&&e.memoizedState!==null&&_x(s,ha,e.memoizedState,e.memoizedProps);break;case 5:nr(e,t,s);break;case 3:case 4:var i=ha;ha=co(e.stateNode.containerInfo),nr(e,t,s),ha=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=_l,_l=16777216,nr(e,t,s),_l=i):nr(e,t,s));break;default:nr(e,t,s)}}function ym(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Sl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];ft=i,vm(i,e)}ym(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bm(e),e=e.sibling}function bm(e){switch(e.tag){case 0:case 11:case 15:Sl(e),e.flags&2048&&bs(9,e,e.return);break;case 3:Sl(e);break;case 12:Sl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zi(e)):Sl(e);break;default:Sl(e)}}function Zi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];ft=i,vm(i,e)}ym(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:bs(8,t,t.return),Zi(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Zi(t));break;default:Zi(t)}e=e.sibling}}function vm(e,t){for(;ft!==null;){var s=ft;switch(s.tag){case 0:case 11:case 15:bs(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var i=s.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ll(s.memoizedState.cache)}if(i=s.child,i!==null)i.return=s,ft=i;else e:for(s=e;ft!==null;){i=ft;var c=i.sibling,h=i.return;if(um(i),i===s){ft=null;break e}if(c!==null){c.return=h,ft=c;break e}ft=h}}}var Lv={getCacheForType:function(e){var t=yt(at),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return yt(at).controller.signal}},qv=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ge=null,je=null,Te=0,qe=0,Vt=null,vs=!1,rr=!1,Ac=!1,Ia=0,Ze=0,xs=0,cn=0,Rc=0,Qt=0,lr=0,jl=null,Mt=null,Dc=!1,Fi=0,xm=0,Wi=1/0,eo=null,ws=null,ot=0,_s=null,ir=null,Ya=0,Mc=0,Uc=null,wm=null,kl=0,zc=null;function It(){return(Ue&2)!==0&&Te!==0?Te&-Te:G.T!==null?Pc():zh()}function _m(){if(Qt===0)if((Te&536870912)===0||Ce){var e=oi;oi<<=1,(oi&3932160)===0&&(oi=262144),Qt=e}else Qt=536870912;return e=Gt.current,e!==null&&(e.flags|=32),Qt}function Ut(e,t,s){(e===Ge&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(or(e,0),Ss(e,Te,Qt,!1)),Qr(e,s),((Ue&2)===0||e!==Ge)&&(e===Ge&&((Ue&2)===0&&(cn|=s),Ze===4&&Ss(e,Te,Qt,!1)),Ta(e))}function Sm(e,t,s){if((Ue&6)!==0)throw Error(l(327));var i=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Vr(e,t),c=i?$v(e,t):qc(e,t,!0),h=i;do{if(c===0){rr&&!i&&Ss(e,t,0,!1);break}else{if(s=e.current.alternate,h&&!Bv(s)){c=qc(e,t,!1),h=!1;continue}if(c===2){if(h=t,e.errorRecoveryDisabledLanes&h)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var x=e;c=jl;var T=x.current.memoizedState.isDehydrated;if(T&&(or(x,y).flags|=256),y=qc(x,y,!1),y!==2){if(Ac&&!T){x.errorRecoveryDisabledLanes|=h,cn|=h,c=4;break e}h=Mt,Mt=c,h!==null&&(Mt===null?Mt=h:Mt.push.apply(Mt,h))}c=y}if(h=!1,c!==2)continue}}if(c===1){or(e,0),Ss(e,t,0,!0);break}e:{switch(i=e,h=c,h){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:Ss(i,t,Qt,!vs);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=Fi+300-qt(),10<c)){if(Ss(i,t,Qt,!vs),ci(i,0,!0)!==0)break e;Ya=t,i.timeoutHandle=eg(jm.bind(null,i,s,Mt,eo,Dc,t,Qt,cn,lr,vs,h,"Throttled",-0,0),c);break e}jm(i,s,Mt,eo,Dc,t,Qt,cn,lr,vs,h,null,-0,0)}}break}while(!0);Ta(e)}function jm(e,t,s,i,c,h,y,x,T,L,V,Y,B,K){if(e.timeoutHandle=-1,Y=t.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Da},pm(t,h,Y);var ne=(h&62914560)===h?Fi-qt():(h&4194048)===h?xm-qt():0;if(ne=Sx(Y,ne),ne!==null){Ya=h,e.cancelPendingCommit=ne(Rm.bind(null,e,t,h,s,i,c,y,x,T,V,Y,null,B,K)),Ss(e,h,y,!L);return}}Rm(e,t,h,s,i,c,y,x,T)}function Bv(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var i=0;i<s.length;i++){var c=s[i],h=c.getSnapshot;c=c.value;try{if(!$t(h(),c))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ss(e,t,s,i){t&=~Rc,t&=~cn,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var h=31-Ht(c),y=1<<h;i[h]=-1,c&=~y}s!==0&&Dh(e,s,t)}function to(){return(Ue&6)===0?(Nl(0),!1):!0}function Lc(){if(je!==null){if(qe===0)var e=je.return;else e=je,La=en=null,Wu(e),Fn=null,ol=0,e=je;for(;e!==null;)tm(e.alternate,e),e=e.return;je=null}}function or(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,rx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ya=0,Lc(),Ge=e,je=s=Ua(e.current,null),Te=t,qe=0,Vt=null,vs=!1,rr=Vr(e,t),Ac=!1,lr=Qt=Rc=cn=xs=Ze=0,Mt=jl=null,Dc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-Ht(i),h=1<<c;t|=e[c],i&=~h}return Ia=t,_i(),s}function km(e,t){xe=null,G.H=pl,t===Zn||t===Oi?(t=$f(),qe=3):t===$u?(t=$f(),qe=4):qe=t===gc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Vt=t,je===null&&(Ze=1,Ki(e,Wt(t,e.current)))}function Nm(){var e=Gt.current;return e===null?!0:(Te&4194048)===Te?sa===null:(Te&62914560)===Te||(Te&536870912)!==0?e===sa:!1}function Tm(){var e=G.H;return G.H=pl,e===null?pl:e}function Em(){var e=G.A;return G.A=Lv,e}function ao(){Ze=4,vs||(Te&4194048)!==Te&&Gt.current!==null||(rr=!0),(xs&134217727)===0&&(cn&134217727)===0||Ge===null||Ss(Ge,Te,Qt,!1)}function qc(e,t,s){var i=Ue;Ue|=2;var c=Tm(),h=Em();(Ge!==e||Te!==t)&&(eo=null,or(e,t)),t=!1;var y=Ze;e:do try{if(qe!==0&&je!==null){var x=je,T=Vt;switch(qe){case 8:Lc(),y=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(t=!0);var L=qe;if(qe=0,Vt=null,ur(e,x,T,L),s&&rr){y=0;break e}break;default:L=qe,qe=0,Vt=null,ur(e,x,T,L)}}Hv(),y=Ze;break}catch(V){km(e,V)}while(!0);return t&&e.shellSuspendCounter++,La=en=null,Ue=i,G.H=c,G.A=h,je===null&&(Ge=null,Te=0,_i()),y}function Hv(){for(;je!==null;)Cm(je)}function $v(e,t){var s=Ue;Ue|=2;var i=Tm(),c=Em();Ge!==e||Te!==t?(eo=null,Wi=qt()+500,or(e,t)):rr=Vr(e,t);e:do try{if(qe!==0&&je!==null){t=je;var h=Vt;t:switch(qe){case 1:qe=0,Vt=null,ur(e,t,h,1);break;case 2:case 9:if(Bf(h)){qe=0,Vt=null,Om(t);break}t=function(){qe!==2&&qe!==9||Ge!==e||(qe=7),Ta(e)},h.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Bf(h)?(qe=0,Vt=null,Om(t)):(qe=0,Vt=null,ur(e,t,h,7));break;case 5:var y=null;switch(je.tag){case 26:y=je.memoizedState;case 5:case 27:var x=je;if(y?gg(y):x.stateNode.complete){qe=0,Vt=null;var T=x.sibling;if(T!==null)je=T;else{var L=x.return;L!==null?(je=L,so(L)):je=null}break t}}qe=0,Vt=null,ur(e,t,h,5);break;case 6:qe=0,Vt=null,ur(e,t,h,6);break;case 8:Lc(),Ze=6;break e;default:throw Error(l(462))}}Pv();break}catch(V){km(e,V)}while(!0);return La=en=null,G.H=i,G.A=c,Ue=s,je!==null?0:(Ge=null,Te=0,_i(),Ze)}function Pv(){for(;je!==null&&!db();)Cm(je)}function Cm(e){var t=W0(e.alternate,e,Ia);e.memoizedProps=e.pendingProps,t===null?so(e):je=t}function Om(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=I0(s,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=I0(s,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:Wu(t);default:tm(s,t),t=je=Ef(t,Ia),t=W0(s,t,Ia)}e.memoizedProps=e.pendingProps,t===null?so(e):je=t}function ur(e,t,s,i){La=en=null,Wu(t),Fn=null,ol=0;var c=t.return;try{if(Ov(e,c,t,s,Te)){Ze=1,Ki(e,Wt(s,e.current)),je=null;return}}catch(h){if(c!==null)throw je=c,h;Ze=1,Ki(e,Wt(s,e.current)),je=null;return}t.flags&32768?(Ce||i===1?e=!0:rr||(Te&536870912)!==0?e=!1:(vs=e=!0,(i===2||i===9||i===3||i===6)&&(i=Gt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Am(t,e)):so(t)}function so(e){var t=e;do{if((t.flags&32768)!==0){Am(t,vs);return}e=t.return;var s=Dv(t.alternate,t,Ia);if(s!==null){je=s;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Ze===0&&(Ze=5)}function Am(e,t){do{var s=Mv(e.alternate,e);if(s!==null){s.flags&=32767,je=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=s}while(e!==null);Ze=6,je=null}function Rm(e,t,s,i,c,h,y,x,T){e.cancelPendingCommit=null;do no();while(ot!==0);if((Ue&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(h=t.lanes|t.childLanes,h|=Nu,wb(e,s,h,y,x,T),e===Ge&&(je=Ge=null,Te=0),ir=t,_s=e,Ya=s,Mc=h,Uc=c,wm=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Qv(li,function(){return Lm(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=G.T,G.T=null,c=Z.p,Z.p=2,y=Ue,Ue|=4;try{Uv(e,t,s)}finally{Ue=y,Z.p=c,G.T=i}}ot=1,Dm(),Mm(),Um()}}function Dm(){if(ot===1){ot=0;var e=_s,t=ir,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=G.T,G.T=null;var i=Z.p;Z.p=2;var c=Ue;Ue|=4;try{fm(t,e);var h=Jc,y=vf(e.containerInfo),x=h.focusedElem,T=h.selectionRange;if(y!==x&&x&&x.ownerDocument&&bf(x.ownerDocument.documentElement,x)){if(T!==null&&wu(x)){var L=T.start,V=T.end;if(V===void 0&&(V=L),"selectionStart"in x)x.selectionStart=L,x.selectionEnd=Math.min(V,x.value.length);else{var Y=x.ownerDocument||document,B=Y&&Y.defaultView||window;if(B.getSelection){var K=B.getSelection(),ne=x.textContent.length,me=Math.min(T.start,ne),Pe=T.end===void 0?me:Math.min(T.end,ne);!K.extend&&me>Pe&&(y=Pe,Pe=me,me=y);var M=yf(x,me),R=yf(x,Pe);if(M&&R&&(K.rangeCount!==1||K.anchorNode!==M.node||K.anchorOffset!==M.offset||K.focusNode!==R.node||K.focusOffset!==R.offset)){var z=Y.createRange();z.setStart(M.node,M.offset),K.removeAllRanges(),me>Pe?(K.addRange(z),K.extend(R.node,R.offset)):(z.setEnd(R.node,R.offset),K.addRange(z))}}}}for(Y=[],K=x;K=K.parentNode;)K.nodeType===1&&Y.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<Y.length;x++){var I=Y[x];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}yo=!!Xc,Jc=Xc=null}finally{Ue=c,Z.p=i,G.T=s}}e.current=t,ot=2}}function Mm(){if(ot===2){ot=0;var e=_s,t=ir,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=G.T,G.T=null;var i=Z.p;Z.p=2;var c=Ue;Ue|=4;try{om(e,t.alternate,t)}finally{Ue=c,Z.p=i,G.T=s}}ot=3}}function Um(){if(ot===4||ot===3){ot=0,hb();var e=_s,t=ir,s=Ya,i=wm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ot=5:(ot=0,ir=_s=null,zm(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ws=null),au(s),t=t.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Kr,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=G.T,c=Z.p,Z.p=2,G.T=null;try{for(var h=e.onRecoverableError,y=0;y<i.length;y++){var x=i[y];h(x.value,{componentStack:x.stack})}}finally{G.T=t,Z.p=c}}(Ya&3)!==0&&no(),Ta(e),c=e.pendingLanes,(s&261930)!==0&&(c&42)!==0?e===zc?kl++:(kl=0,zc=e):kl=0,Nl(0)}}function zm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ll(t)))}function no(){return Dm(),Mm(),Um(),Lm()}function Lm(){if(ot!==5)return!1;var e=_s,t=Mc;Mc=0;var s=au(Ya),i=G.T,c=Z.p;try{Z.p=32>s?32:s,G.T=null,s=Uc,Uc=null;var h=_s,y=Ya;if(ot=0,ir=_s=null,Ya=0,(Ue&6)!==0)throw Error(l(331));var x=Ue;if(Ue|=4,bm(h.current),gm(h,h.current,y,s),Ue=x,Nl(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Kr,h)}catch{}return!0}finally{Z.p=c,G.T=i,zm(e,t)}}function qm(e,t,s){t=Wt(s,t),t=mc(e.stateNode,t,2),e=gs(e,t,2),e!==null&&(Qr(e,2),Ta(e))}function Be(e,t,s){if(e.tag===3)qm(e,e,s);else for(;t!==null;){if(t.tag===3){qm(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ws===null||!ws.has(i))){e=Wt(s,e),s=B0(2),i=gs(t,s,2),i!==null&&(H0(s,i,t,e),Qr(i,2),Ta(i));break}}t=t.return}}function Bc(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new qv;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(s)||(Ac=!0,c.add(s),e=Gv.bind(null,e,t,s),t.then(e,e))}function Gv(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ge===e&&(Te&s)===s&&(Ze===4||Ze===3&&(Te&62914560)===Te&&300>qt()-Fi?(Ue&2)===0&&or(e,0):Rc|=s,lr===Te&&(lr=0)),Ta(e)}function Bm(e,t){t===0&&(t=Rh()),e=Zs(e,t),e!==null&&(Qr(e,t),Ta(e))}function Kv(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Bm(e,s)}function Vv(e,t){var s=0;switch(e.tag){case 31:case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),Bm(e,s)}function Qv(e,t){return Gr(e,t)}var ro=null,cr=null,Hc=!1,lo=!1,$c=!1,js=0;function Ta(e){e!==cr&&e.next===null&&(cr===null?ro=cr=e:cr=cr.next=e),lo=!0,Hc||(Hc=!0,Yv())}function Nl(e,t){if(!$c&&lo){$c=!0;do for(var s=!1,i=ro;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var h=0;else{var y=i.suspendedLanes,x=i.pingedLanes;h=(1<<31-Ht(42|e)+1)-1,h&=c&~(y&~x),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,Gm(i,h))}else h=Te,h=ci(i,i===Ge?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(h&3)===0||Vr(i,h)||(s=!0,Gm(i,h));i=i.next}while(s);$c=!1}}function Iv(){Hm()}function Hm(){lo=Hc=!1;var e=0;js!==0&&nx()&&(e=js);for(var t=qt(),s=null,i=ro;i!==null;){var c=i.next,h=$m(i,t);h===0?(i.next=null,s===null?ro=c:s.next=c,c===null&&(cr=s)):(s=i,(e!==0||(h&3)!==0)&&(lo=!0)),i=c}ot!==0&&ot!==5||Nl(e),js!==0&&(js=0)}function $m(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var y=31-Ht(h),x=1<<y,T=c[y];T===-1?((x&s)===0||(x&i)!==0)&&(c[y]=xb(x,t)):T<=t&&(e.expiredLanes|=x),h&=~x}if(t=Ge,s=Te,s=ci(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,s===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Wo(i),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Vr(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(i!==null&&Wo(i),au(s)){case 2:case 8:s=Oh;break;case 32:s=li;break;case 268435456:s=Ah;break;default:s=li}return i=Pm.bind(null,e),s=Gr(s,i),e.callbackPriority=t,e.callbackNode=s,t}return i!==null&&i!==null&&Wo(i),e.callbackPriority=2,e.callbackNode=null,2}function Pm(e,t){if(ot!==0&&ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(no()&&e.callbackNode!==s)return null;var i=Te;return i=ci(e,e===Ge?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Sm(e,i,t),$m(e,qt()),e.callbackNode!=null&&e.callbackNode===s?Pm.bind(null,e):null)}function Gm(e,t){if(no())return null;Sm(e,t,!0)}function Yv(){lx(function(){(Ue&6)!==0?Gr(Ch,Iv):Hm()})}function Pc(){if(js===0){var e=Xn;e===0&&(e=ii,ii<<=1,(ii&261888)===0&&(ii=256)),js=e}return js}function Km(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:mi(""+e)}function Vm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Xv(e,t,s,i,c){if(t==="submit"&&s&&s.stateNode===c){var h=Km((c[Ct]||null).action),y=i.submitter;y&&(t=(t=y[Ct]||null)?Km(t.formAction):y.getAttribute("formAction"),t!==null&&(h=t,y=null));var x=new bi("action","action",null,i,c);e.push({event:x,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(js!==0){var T=y?Vm(c,y):new FormData(c);oc(s,{pending:!0,data:T,method:c.method,action:h},null,T)}}else typeof h=="function"&&(x.preventDefault(),T=y?Vm(c,y):new FormData(c),oc(s,{pending:!0,data:T,method:c.method,action:h},h,T))},currentTarget:c}]})}}for(var Gc=0;Gc<ku.length;Gc++){var Kc=ku[Gc],Jv=Kc.toLowerCase(),Zv=Kc[0].toUpperCase()+Kc.slice(1);da(Jv,"on"+Zv)}da(_f,"onAnimationEnd"),da(Sf,"onAnimationIteration"),da(jf,"onAnimationStart"),da("dblclick","onDoubleClick"),da("focusin","onFocus"),da("focusout","onBlur"),da(fv,"onTransitionRun"),da(mv,"onTransitionStart"),da(gv,"onTransitionCancel"),da(kf,"onTransitionEnd"),Un("onMouseEnter",["mouseout","mouseover"]),Un("onMouseLeave",["mouseout","mouseover"]),Un("onPointerEnter",["pointerout","pointerover"]),Un("onPointerLeave",["pointerout","pointerover"]),Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Is("onBeforeInput",["compositionend","keypress","textInput","paste"]),Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function Qm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],c=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var y=i.length-1;0<=y;y--){var x=i[y],T=x.instance,L=x.currentTarget;if(x=x.listener,T!==h&&c.isPropagationStopped())break e;h=x,c.currentTarget=L;try{h(c)}catch(V){wi(V)}c.currentTarget=null,h=T}else for(y=0;y<i.length;y++){if(x=i[y],T=x.instance,L=x.currentTarget,x=x.listener,T!==h&&c.isPropagationStopped())break e;h=x,c.currentTarget=L;try{h(c)}catch(V){wi(V)}c.currentTarget=null,h=T}}}}function ke(e,t){var s=t[su];s===void 0&&(s=t[su]=new Set);var i=e+"__bubble";s.has(i)||(Im(t,e,2,!1),s.add(i))}function Vc(e,t,s){var i=0;t&&(i|=4),Im(s,e,i,t)}var io="_reactListening"+Math.random().toString(36).slice(2);function Qc(e){if(!e[io]){e[io]=!0,Bh.forEach(function(s){s!=="selectionchange"&&(Fv.has(s)||Vc(s,!1,e),Vc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[io]||(t[io]=!0,Vc("selectionchange",!1,t))}}function Im(e,t,s,i){switch(_g(t)){case 2:var c=Nx;break;case 8:c=Tx;break;default:c=id}s=c.bind(null,t,s,e),c=void 0,!hu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function Ic(e,t,s,i,c){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var y=i.tag;if(y===3||y===4){var x=i.stateNode.containerInfo;if(x===c)break;if(y===4)for(y=i.return;y!==null;){var T=y.tag;if((T===3||T===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;x!==null;){if(y=Rn(x),y===null)return;if(T=y.tag,T===5||T===6||T===26||T===27){i=h=y;continue e}x=x.parentNode}}i=i.return}Zh(function(){var L=h,V=cu(s),Y=[];e:{var B=Nf.get(e);if(B!==void 0){var K=bi,ne=e;switch(e){case"keypress":if(pi(s)===0)break e;case"keydown":case"keyup":K=Vb;break;case"focusin":ne="focus",K=pu;break;case"focusout":ne="blur",K=pu;break;case"beforeblur":case"afterblur":K=pu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Yb;break;case _f:case Sf:case jf:K=zb;break;case kf:K=Jb;break;case"scroll":case"scrollend":K=Ab;break;case"wheel":K=Fb;break;case"copy":case"cut":case"paste":K=qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=af;break;case"toggle":case"beforetoggle":K=ev}var me=(t&4)!==0,Pe=!me&&(e==="scroll"||e==="scrollend"),M=me?B!==null?B+"Capture":null:B;me=[];for(var R=L,z;R!==null;){var I=R;if(z=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||z===null||M===null||(I=Xr(R,M),I!=null&&me.push(El(R,I,z))),Pe)break;R=R.return}0<me.length&&(B=new K(B,ne,null,s,V),Y.push({event:B,listeners:me}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",B&&s!==uu&&(ne=s.relatedTarget||s.fromElement)&&(Rn(ne)||ne[An]))break e;if((K||B)&&(B=V.window===V?V:(B=V.ownerDocument)?B.defaultView||B.parentWindow:window,K?(ne=s.relatedTarget||s.toElement,K=L,ne=ne?Rn(ne):null,ne!==null&&(Pe=d(ne),me=ne.tag,ne!==Pe||me!==5&&me!==27&&me!==6)&&(ne=null)):(K=null,ne=L),K!==ne)){if(me=ef,I="onMouseLeave",M="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(me=af,I="onPointerLeave",M="onPointerEnter",R="pointer"),Pe=K==null?B:Yr(K),z=ne==null?B:Yr(ne),B=new me(I,R+"leave",K,s,V),B.target=Pe,B.relatedTarget=z,I=null,Rn(V)===L&&(me=new me(M,R+"enter",ne,s,V),me.target=z,me.relatedTarget=Pe,I=me),Pe=I,K&&ne)t:{for(me=Wv,M=K,R=ne,z=0,I=M;I;I=me(I))z++;I=0;for(var he=R;he;he=me(he))I++;for(;0<z-I;)M=me(M),z--;for(;0<I-z;)R=me(R),I--;for(;z--;){if(M===R||R!==null&&M===R.alternate){me=M;break t}M=me(M),R=me(R)}me=null}else me=null;K!==null&&Ym(Y,B,K,me,!1),ne!==null&&Pe!==null&&Ym(Y,Pe,ne,me,!0)}}e:{if(B=L?Yr(L):window,K=B.nodeName&&B.nodeName.toLowerCase(),K==="select"||K==="input"&&B.type==="file")var Re=df;else if(uf(B))if(hf)Re=cv;else{Re=ov;var le=iv}else K=B.nodeName,!K||K.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?L&&ou(L.elementType)&&(Re=df):Re=uv;if(Re&&(Re=Re(e,L))){cf(Y,Re,s,V);break e}le&&le(e,B,L),e==="focusout"&&L&&B.type==="number"&&L.memoizedProps.value!=null&&iu(B,"number",B.value)}switch(le=L?Yr(L):window,e){case"focusin":(uf(le)||le.contentEditable==="true")&&($n=le,_u=L,sl=null);break;case"focusout":sl=_u=$n=null;break;case"mousedown":Su=!0;break;case"contextmenu":case"mouseup":case"dragend":Su=!1,xf(Y,s,V);break;case"selectionchange":if(hv)break;case"keydown":case"keyup":xf(Y,s,V)}var _e;if(bu)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Hn?lf(e,s)&&(Ee="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ee="onCompositionStart");Ee&&(sf&&s.locale!=="ko"&&(Hn||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Hn&&(_e=Fh()):(os=V,fu="value"in os?os.value:os.textContent,Hn=!0)),le=oo(L,Ee),0<le.length&&(Ee=new tf(Ee,e,null,s,V),Y.push({event:Ee,listeners:le}),_e?Ee.data=_e:(_e=of(s),_e!==null&&(Ee.data=_e)))),(_e=av?sv(e,s):nv(e,s))&&(Ee=oo(L,"onBeforeInput"),0<Ee.length&&(le=new tf("onBeforeInput","beforeinput",null,s,V),Y.push({event:le,listeners:Ee}),le.data=_e)),Xv(Y,e,L,s,V)}Qm(Y,t)})}function El(e,t,s){return{instance:e,listener:t,currentTarget:s}}function oo(e,t){for(var s=t+"Capture",i=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Xr(e,s),c!=null&&i.unshift(El(e,c,h)),c=Xr(e,t),c!=null&&i.push(El(e,c,h))),e.tag===3)return i;e=e.return}return[]}function Wv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ym(e,t,s,i,c){for(var h=t._reactName,y=[];s!==null&&s!==i;){var x=s,T=x.alternate,L=x.stateNode;if(x=x.tag,T!==null&&T===i)break;x!==5&&x!==26&&x!==27||L===null||(T=L,c?(L=Xr(s,h),L!=null&&y.unshift(El(s,L,T))):c||(L=Xr(s,h),L!=null&&y.push(El(s,L,T)))),s=s.return}y.length!==0&&e.push({event:t,listeners:y})}var ex=/\r\n?/g,tx=/\u0000|\uFFFD/g;function Xm(e){return(typeof e=="string"?e:""+e).replace(ex,`
`).replace(tx,"")}function Jm(e,t){return t=Xm(t),Xm(e)===t}function $e(e,t,s,i,c,h){switch(s){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Ln(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Ln(e,""+i);break;case"className":hi(e,"class",i);break;case"tabIndex":hi(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(e,s,i);break;case"style":Xh(e,i,h);break;case"data":if(t!=="object"){hi(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=mi(""+i),e.setAttribute(s,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(t!=="input"&&$e(e,t,"name",c.name,c,null),$e(e,t,"formEncType",c.formEncType,c,null),$e(e,t,"formMethod",c.formMethod,c,null),$e(e,t,"formTarget",c.formTarget,c,null)):($e(e,t,"encType",c.encType,c,null),$e(e,t,"method",c.method,c,null),$e(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=mi(""+i),e.setAttribute(s,i);break;case"onClick":i!=null&&(e.onclick=Da);break;case"onScroll":i!=null&&ke("scroll",e);break;case"onScrollEnd":i!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(s=i.__html,s!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}s=mi(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""+i):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":i===!0?e.setAttribute(s,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,i):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(s,i):e.removeAttribute(s);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(s):e.setAttribute(s,i);break;case"popover":ke("beforetoggle",e),ke("toggle",e),di(e,"popover",i);break;case"xlinkActuate":Ra(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Ra(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Ra(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Ra(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Ra(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Ra(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Ra(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Ra(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Ra(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":di(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Cb.get(s)||s,di(e,s,i))}}function Yc(e,t,s,i,c,h){switch(s){case"style":Xh(e,i,h);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(s=i.__html,s!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"children":typeof i=="string"?Ln(e,i):(typeof i=="number"||typeof i=="bigint")&&Ln(e,""+i);break;case"onScroll":i!=null&&ke("scroll",e);break;case"onScrollEnd":i!=null&&ke("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),t=s.slice(2,c?s.length-7:void 0),h=e[Ct]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(t,h,c),typeof i=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,i,c);break e}s in e?e[s]=i:i===!0?e.setAttribute(s,""):di(e,s,i)}}}function vt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var i=!1,c=!1,h;for(h in s)if(s.hasOwnProperty(h)){var y=s[h];if(y!=null)switch(h){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:$e(e,t,h,y,s,null)}}c&&$e(e,t,"srcSet",s.srcSet,s,null),i&&$e(e,t,"src",s.src,s,null);return;case"input":ke("invalid",e);var x=h=y=c=null,T=null,L=null;for(i in s)if(s.hasOwnProperty(i)){var V=s[i];if(V!=null)switch(i){case"name":c=V;break;case"type":y=V;break;case"checked":T=V;break;case"defaultChecked":L=V;break;case"value":h=V;break;case"defaultValue":x=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(l(137,t));break;default:$e(e,t,i,V,s,null)}}Vh(e,h,x,T,L,y,c,!1);return;case"select":ke("invalid",e),i=y=h=null;for(c in s)if(s.hasOwnProperty(c)&&(x=s[c],x!=null))switch(c){case"value":h=x;break;case"defaultValue":y=x;break;case"multiple":i=x;default:$e(e,t,c,x,s,null)}t=h,s=y,e.multiple=!!i,t!=null?zn(e,!!i,t,!1):s!=null&&zn(e,!!i,s,!0);return;case"textarea":ke("invalid",e),h=c=i=null;for(y in s)if(s.hasOwnProperty(y)&&(x=s[y],x!=null))switch(y){case"value":i=x;break;case"defaultValue":c=x;break;case"children":h=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(l(91));break;default:$e(e,t,y,x,s,null)}Ih(e,i,c,h);return;case"option":for(T in s)if(s.hasOwnProperty(T)&&(i=s[T],i!=null))switch(T){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:$e(e,t,T,i,s,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(i=0;i<Tl.length;i++)ke(Tl[i],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in s)if(s.hasOwnProperty(L)&&(i=s[L],i!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:$e(e,t,L,i,s,null)}return;default:if(ou(t)){for(V in s)s.hasOwnProperty(V)&&(i=s[V],i!==void 0&&Yc(e,t,V,i,s,void 0));return}}for(x in s)s.hasOwnProperty(x)&&(i=s[x],i!=null&&$e(e,t,x,i,s,null))}function ax(e,t,s,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,y=null,x=null,T=null,L=null,V=null;for(K in s){var Y=s[K];if(s.hasOwnProperty(K)&&Y!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":T=Y;default:i.hasOwnProperty(K)||$e(e,t,K,null,i,Y)}}for(var B in i){var K=i[B];if(Y=s[B],i.hasOwnProperty(B)&&(K!=null||Y!=null))switch(B){case"type":h=K;break;case"name":c=K;break;case"checked":L=K;break;case"defaultChecked":V=K;break;case"value":y=K;break;case"defaultValue":x=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(l(137,t));break;default:K!==Y&&$e(e,t,B,K,i,Y)}}lu(e,y,x,T,L,V,h,c);return;case"select":K=y=x=B=null;for(h in s)if(T=s[h],s.hasOwnProperty(h)&&T!=null)switch(h){case"value":break;case"multiple":K=T;default:i.hasOwnProperty(h)||$e(e,t,h,null,i,T)}for(c in i)if(h=i[c],T=s[c],i.hasOwnProperty(c)&&(h!=null||T!=null))switch(c){case"value":B=h;break;case"defaultValue":x=h;break;case"multiple":y=h;default:h!==T&&$e(e,t,c,h,i,T)}t=x,s=y,i=K,B!=null?zn(e,!!s,B,!1):!!i!=!!s&&(t!=null?zn(e,!!s,t,!0):zn(e,!!s,s?[]:"",!1));return;case"textarea":K=B=null;for(x in s)if(c=s[x],s.hasOwnProperty(x)&&c!=null&&!i.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:$e(e,t,x,null,i,c)}for(y in i)if(c=i[y],h=s[y],i.hasOwnProperty(y)&&(c!=null||h!=null))switch(y){case"value":B=c;break;case"defaultValue":K=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==h&&$e(e,t,y,c,i,h)}Qh(e,B,K);return;case"option":for(var ne in s)if(B=s[ne],s.hasOwnProperty(ne)&&B!=null&&!i.hasOwnProperty(ne))switch(ne){case"selected":e.selected=!1;break;default:$e(e,t,ne,null,i,B)}for(T in i)if(B=i[T],K=s[T],i.hasOwnProperty(T)&&B!==K&&(B!=null||K!=null))switch(T){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:$e(e,t,T,B,i,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in s)B=s[me],s.hasOwnProperty(me)&&B!=null&&!i.hasOwnProperty(me)&&$e(e,t,me,null,i,B);for(L in i)if(B=i[L],K=s[L],i.hasOwnProperty(L)&&B!==K&&(B!=null||K!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(l(137,t));break;default:$e(e,t,L,B,i,K)}return;default:if(ou(t)){for(var Pe in s)B=s[Pe],s.hasOwnProperty(Pe)&&B!==void 0&&!i.hasOwnProperty(Pe)&&Yc(e,t,Pe,void 0,i,B);for(V in i)B=i[V],K=s[V],!i.hasOwnProperty(V)||B===K||B===void 0&&K===void 0||Yc(e,t,V,B,i,K);return}}for(var M in s)B=s[M],s.hasOwnProperty(M)&&B!=null&&!i.hasOwnProperty(M)&&$e(e,t,M,null,i,B);for(Y in i)B=i[Y],K=s[Y],!i.hasOwnProperty(Y)||B===K||B==null&&K==null||$e(e,t,Y,B,i,K)}function Zm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),i=0;i<s.length;i++){var c=s[i],h=c.transferSize,y=c.initiatorType,x=c.duration;if(h&&x&&Zm(y)){for(y=0,x=c.responseEnd,i+=1;i<s.length;i++){var T=s[i],L=T.startTime;if(L>x)break;var V=T.transferSize,Y=T.initiatorType;V&&Zm(Y)&&(T=T.responseEnd,y+=V*(T<x?1:(x-L)/(T-L)))}if(--i,t+=8*(h+y)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Xc=null,Jc=null;function uo(e){return e.nodeType===9?e:e.ownerDocument}function Fm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Zc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fc=null;function nx(){var e=window.event;return e&&e.type==="popstate"?e===Fc?!1:(Fc=e,!0):(Fc=null,!1)}var eg=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,lx=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(e){return tg.resolve(null).then(e).catch(ix)}:eg;function ix(e){setTimeout(function(){throw e})}function ks(e){return e==="head"}function ag(e,t){var s=t,i=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(i===0){e.removeChild(c),mr(t);return}i--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")i++;else if(s==="html")Cl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Cl(s);for(var h=s.firstChild;h;){var y=h.nextSibling,x=h.nodeName;h[Ir]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=y}}else s==="body"&&Cl(e.ownerDocument.body);s=c}while(s);mr(t)}function sg(e,t){var s=e;e=0;do{var i=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=i}while(s)}function Wc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Wc(s),nu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function ox(e,t,s,i){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Ir])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=na(e.nextSibling),e===null)break}return null}function ux(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=na(e.nextSibling),e===null))return null;return e}function ng(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=na(e.nextSibling),e===null))return null;return e}function ed(e){return e.data==="$?"||e.data==="$~"}function td(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function cx(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var i=function(){t(),s.removeEventListener("DOMContentLoaded",i)};s.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function na(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ad=null;function rg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return na(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function lg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function ig(e,t,s){switch(t=uo(s),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Cl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);nu(e)}var ra=new Map,og=new Set;function co(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xa=Z.d;Z.d={f:dx,r:hx,D:fx,C:mx,L:gx,m:px,X:bx,S:yx,M:vx};function dx(){var e=Xa.f(),t=to();return e||t}function hx(e){var t=Dn(e);t!==null&&t.tag===5&&t.type==="form"?k0(t):Xa.r(e)}var dr=typeof document>"u"?null:document;function ug(e,t,s){var i=dr;if(i&&typeof t=="string"&&t){var c=Zt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),og.has(c)||(og.add(c),e={rel:e,crossOrigin:s,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),vt(t,"link",e),ht(t),i.head.appendChild(t)))}}function fx(e){Xa.D(e),ug("dns-prefetch",e,null)}function mx(e,t){Xa.C(e,t),ug("preconnect",e,t)}function gx(e,t,s){Xa.L(e,t,s);var i=dr;if(i&&e&&t){var c='link[rel="preload"][as="'+Zt(t)+'"]';t==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Zt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Zt(s.imageSizes)+'"]')):c+='[href="'+Zt(e)+'"]';var h=c;switch(t){case"style":h=hr(e);break;case"script":h=fr(e)}ra.has(h)||(e=v({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),ra.set(h,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(Ol(h))||t==="script"&&i.querySelector(Al(h))||(t=i.createElement("link"),vt(t,"link",e),ht(t),i.head.appendChild(t)))}}function px(e,t){Xa.m(e,t);var s=dr;if(s&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Zt(i)+'"][href="'+Zt(e)+'"]',h=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=fr(e)}if(!ra.has(h)&&(e=v({rel:"modulepreload",href:e},t),ra.set(h,e),s.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Al(h)))return}i=s.createElement("link"),vt(i,"link",e),ht(i),s.head.appendChild(i)}}}function yx(e,t,s){Xa.S(e,t,s);var i=dr;if(i&&e){var c=Mn(i).hoistableStyles,h=hr(e);t=t||"default";var y=c.get(h);if(!y){var x={loading:0,preload:null};if(y=i.querySelector(Ol(h)))x.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},s),(s=ra.get(h))&&sd(e,s);var T=y=i.createElement("link");ht(T),vt(T,"link",e),T._p=new Promise(function(L,V){T.onload=L,T.onerror=V}),T.addEventListener("load",function(){x.loading|=1}),T.addEventListener("error",function(){x.loading|=2}),x.loading|=4,ho(y,t,i)}y={type:"stylesheet",instance:y,count:1,state:x},c.set(h,y)}}}function bx(e,t){Xa.X(e,t);var s=dr;if(s&&e){var i=Mn(s).hoistableScripts,c=fr(e),h=i.get(c);h||(h=s.querySelector(Al(c)),h||(e=v({src:e,async:!0},t),(t=ra.get(c))&&nd(e,t),h=s.createElement("script"),ht(h),vt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function vx(e,t){Xa.M(e,t);var s=dr;if(s&&e){var i=Mn(s).hoistableScripts,c=fr(e),h=i.get(c);h||(h=s.querySelector(Al(c)),h||(e=v({src:e,async:!0,type:"module"},t),(t=ra.get(c))&&nd(e,t),h=s.createElement("script"),ht(h),vt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function cg(e,t,s,i){var c=(c=we.current)?co(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=hr(s.href),s=Mn(c).hoistableStyles,i=s.get(t),i||(i={type:"style",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=hr(s.href);var h=Mn(c).hoistableStyles,y=h.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,y),(h=c.querySelector(Ol(e)))&&!h._p&&(y.instance=h,y.state.loading=5),ra.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ra.set(e,s),h||xx(c,e,s,y.state))),t&&i===null)throw Error(l(528,""));return y}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=fr(s),s=Mn(c).hoistableScripts,i=s.get(t),i||(i={type:"script",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function hr(e){return'href="'+Zt(e)+'"'}function Ol(e){return'link[rel="stylesheet"]['+e+"]"}function dg(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function xx(e,t,s,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),vt(t,"link",s),ht(t),e.head.appendChild(t))}function fr(e){return'[src="'+Zt(e)+'"]'}function Al(e){return"script[async]"+e}function hg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Zt(s.href)+'"]');if(i)return t.instance=i,ht(i),i;var c=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ht(i),vt(i,"style",c),ho(i,s.precedence,e),t.instance=i;case"stylesheet":c=hr(s.href);var h=e.querySelector(Ol(c));if(h)return t.state.loading|=4,t.instance=h,ht(h),h;i=dg(s),(c=ra.get(c))&&sd(i,c),h=(e.ownerDocument||e).createElement("link"),ht(h);var y=h;return y._p=new Promise(function(x,T){y.onload=x,y.onerror=T}),vt(h,"link",i),t.state.loading|=4,ho(h,s.precedence,e),t.instance=h;case"script":return h=fr(s.src),(c=e.querySelector(Al(h)))?(t.instance=c,ht(c),c):(i=s,(c=ra.get(h))&&(i=v({},s),nd(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),ht(c),vt(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,ho(i,s.precedence,e));return t.instance}function ho(e,t,s){for(var i=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,h=c,y=0;y<i.length;y++){var x=i[y];if(x.dataset.precedence===t)h=x;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function nd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fo=null;function fg(e,t,s){if(fo===null){var i=new Map,c=fo=new Map;c.set(s,i)}else c=fo,i=c.get(s),i||(i=new Map,c.set(s,i));if(i.has(e))return i;for(i.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var h=s[c];if(!(h[Ir]||h[gt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(t)||"";y=e+y;var x=i.get(y);x?x.push(h):i.set(y,[h])}}return i}function mg(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function wx(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function gg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _x(e,t,s,i){if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=hr(i.href),h=t.querySelector(Ol(c));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=mo.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=h,ht(h);return}h=t.ownerDocument||t,i=dg(i),(c=ra.get(c))&&sd(i,c),h=h.createElement("link"),ht(h);var y=h;y._p=new Promise(function(x,T){y.onload=x,y.onerror=T}),vt(h,"link",i),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=mo.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var rd=0;function Sx(e,t){return e.stylesheets&&e.count===0&&po(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var i=setTimeout(function(){if(e.stylesheets&&po(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&rd===0&&(rd=62500*sx());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&po(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>rd?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(c)}}:null}function mo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)po(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var go=null;function po(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,go=new Map,t.forEach(jx,e),go=null,mo.call(e))}function jx(e,t){if(!(t.state.loading&4)){var s=go.get(e);if(s)var i=s.get(null);else{s=new Map,go.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var y=c[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),i=y)}i&&s.set(null,i)}c=t.instance,y=c.getAttribute("data-precedence"),h=s.get(y)||i,h===i&&s.set(null,c),s.set(y,c),this.count++,i=mo.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Rl={$$typeof:w,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function kx(e,t,s,i,c,h,y,x,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eu(0),this.hiddenUpdates=eu(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function pg(e,t,s,i,c,h,y,x,T,L,V,Y){return e=new kx(e,t,s,y,T,L,V,Y,x),t=1,h===!0&&(t|=24),h=Pt(3,null,null,t),e.current=h,h.stateNode=e,t=qu(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:i,isDehydrated:s,cache:t},Pu(h),e}function yg(e){return e?(e=Kn,e):Kn}function bg(e,t,s,i,c,h){c=yg(c),i.context===null?i.context=c:i.pendingContext=c,i=ms(t),i.payload={element:s},h=h===void 0?null:h,h!==null&&(i.callback=h),s=gs(e,i,t),s!==null&&(Ut(s,e,t),cl(s,e,t))}function vg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ld(e,t){vg(e,t),(e=e.alternate)&&vg(e,t)}function xg(e){if(e.tag===13||e.tag===31){var t=Zs(e,67108864);t!==null&&Ut(t,e,67108864),ld(e,67108864)}}function wg(e){if(e.tag===13||e.tag===31){var t=It();t=tu(t);var s=Zs(e,t);s!==null&&Ut(s,e,t),ld(e,t)}}var yo=!0;function Nx(e,t,s,i){var c=G.T;G.T=null;var h=Z.p;try{Z.p=2,id(e,t,s,i)}finally{Z.p=h,G.T=c}}function Tx(e,t,s,i){var c=G.T;G.T=null;var h=Z.p;try{Z.p=8,id(e,t,s,i)}finally{Z.p=h,G.T=c}}function id(e,t,s,i){if(yo){var c=od(i);if(c===null)Ic(e,t,i,bo,s),Sg(e,i);else if(Cx(c,e,t,s,i))i.stopPropagation();else if(Sg(e,i),t&4&&-1<Ex.indexOf(e)){for(;c!==null;){var h=Dn(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=Qs(h.pendingLanes);if(y!==0){var x=h;for(x.pendingLanes|=2,x.entangledLanes|=2;y;){var T=1<<31-Ht(y);x.entanglements[1]|=T,y&=~T}Ta(h),(Ue&6)===0&&(Wi=qt()+500,Nl(0))}}break;case 31:case 13:x=Zs(h,2),x!==null&&Ut(x,h,2),to(),ld(h,2)}if(h=od(i),h===null&&Ic(e,t,i,bo,s),h===c)break;c=h}c!==null&&i.stopPropagation()}else Ic(e,t,i,null,s)}}function od(e){return e=cu(e),ud(e)}var bo=null;function ud(e){if(bo=null,e=Rn(e),e!==null){var t=d(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bo=e,null}function _g(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fb()){case Ch:return 2;case Oh:return 8;case li:case mb:return 32;case Ah:return 268435456;default:return 32}default:return 32}}var cd=!1,Ns=null,Ts=null,Es=null,Dl=new Map,Ml=new Map,Cs=[],Ex="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sg(e,t){switch(e){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Dl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(t.pointerId)}}function Ul(e,t,s,i,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Dn(t),t!==null&&xg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Cx(e,t,s,i,c){switch(t){case"focusin":return Ns=Ul(Ns,e,t,s,i,c),!0;case"dragenter":return Ts=Ul(Ts,e,t,s,i,c),!0;case"mouseover":return Es=Ul(Es,e,t,s,i,c),!0;case"pointerover":var h=c.pointerId;return Dl.set(h,Ul(Dl.get(h)||null,e,t,s,i,c)),!0;case"gotpointercapture":return h=c.pointerId,Ml.set(h,Ul(Ml.get(h)||null,e,t,s,i,c)),!0}return!1}function jg(e){var t=Rn(e.target);if(t!==null){var s=d(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Lh(e.priority,function(){wg(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,Lh(e.priority,function(){wg(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=od(e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);uu=i,s.target.dispatchEvent(i),uu=null}else return t=Dn(s),t!==null&&xg(t),e.blockedOn=s,!1;t.shift()}return!0}function kg(e,t,s){vo(e)&&s.delete(t)}function Ox(){cd=!1,Ns!==null&&vo(Ns)&&(Ns=null),Ts!==null&&vo(Ts)&&(Ts=null),Es!==null&&vo(Es)&&(Es=null),Dl.forEach(kg),Ml.forEach(kg)}function xo(e,t){e.blockedOn===t&&(e.blockedOn=null,cd||(cd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ox)))}var wo=null;function Ng(e){wo!==e&&(wo=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){wo===e&&(wo=null);for(var t=0;t<e.length;t+=3){var s=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(ud(i||s)===null)continue;break}var h=Dn(s);h!==null&&(e.splice(t,3),t-=3,oc(h,{pending:!0,data:c,method:s.method,action:i},i,c))}}))}function mr(e){function t(T){return xo(T,e)}Ns!==null&&xo(Ns,e),Ts!==null&&xo(Ts,e),Es!==null&&xo(Es,e),Dl.forEach(t),Ml.forEach(t);for(var s=0;s<Cs.length;s++){var i=Cs[s];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Cs.length&&(s=Cs[0],s.blockedOn===null);)jg(s),s.blockedOn===null&&Cs.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(i=0;i<s.length;i+=3){var c=s[i],h=s[i+1],y=c[Ct]||null;if(typeof h=="function")y||Ng(s);else if(y){var x=null;if(h&&h.hasAttribute("formAction")){if(c=h,y=h[Ct]||null)x=y.formAction;else if(ud(c)!==null)continue}else x=y.action;typeof x=="function"?s[i+1]=x:(s.splice(i,3),i-=3),Ng(s)}}}function Tg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return c=y})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),i||setTimeout(s,20)}function s(){if(!i&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function dd(e){this._internalRoot=e}_o.prototype.render=dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var s=t.current,i=It();bg(s,i,e,t,null,null)},_o.prototype.unmount=dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bg(e.current,2,null,e,null,null),to(),t[An]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var t=zh();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Cs.length&&t!==0&&t<Cs[s].priority;s++);Cs.splice(s,0,e),s===0&&jg(e)}};var Eg=a.version;if(Eg!=="19.2.0")throw Error(l(527,Eg,"19.2.0"));Z.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Ax={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{Kr=So.inject(Ax),Bt=So}catch{}}return Ll.createRoot=function(e,t){if(!o(e))throw Error(l(299));var s=!1,i="",c=U0,h=z0,y=L0;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=pg(e,1,!1,null,null,s,i,null,c,h,y,Tg),e[An]=t.current,Qc(e),new dd(t)},Ll.hydrateRoot=function(e,t,s){if(!o(e))throw Error(l(299));var i=!1,c="",h=U0,y=z0,x=L0,T=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.formState!==void 0&&(T=s.formState)),t=pg(e,1,!0,t,s??null,i,c,T,h,y,x,Tg),t.context=yg(null),s=t.current,i=It(),i=tu(i),c=ms(i),c.callback=null,gs(s,c,i),s=i,t.current.lanes=s,Qr(t,s),Ta(t),e[An]=t.current,Qc(e),new _o(t)},Ll.version="19.2.0",Ll}var Bg;function Kx(){if(Bg)return gd.exports;Bg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}return r(),gd.exports=Gx(),gd.exports}var Vx=Kx();const Qx=lh(Vx);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Hg="popstate";function Ix(r={}){function a(o,d){let{pathname:f="/",search:m="",hash:g=""}=Cn(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Od("",{pathname:f,search:m,hash:g},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(o,d){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let g=o.location.href,p=g.indexOf("#");m=p===-1?g:g.slice(0,p)}return m+"#"+(typeof d=="string"?d:Ql(d))}function l(o,d){oa(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return Xx(a,n,l,r)}function Ye(r,a){if(r===!1||r===null||typeof r>"u")throw new Error(a)}function oa(r,a){if(!r){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Yx(){return Math.random().toString(36).substring(2,10)}function $g(r,a){return{usr:r.state,key:r.key,idx:a}}function Od(r,a,n=null,l){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof a=="string"?Cn(a):a,state:n,key:a&&a.key||l||Yx()}}function Ql({pathname:r="/",search:a="",hash:n=""}){return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Cn(r){let a={};if(r){let n=r.indexOf("#");n>=0&&(a.hash=r.substring(n),r=r.substring(0,n));let l=r.indexOf("?");l>=0&&(a.search=r.substring(l),r=r.substring(0,l)),r&&(a.pathname=r)}return a}function Xx(r,a,n,l={}){let{window:o=document.defaultView,v5Compat:d=!1}=l,f=o.history,m="POP",g=null,p=b();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function b(){return(f.state||{idx:null}).idx}function v(){m="POP";let N=b(),U=N==null?null:N-p;p=N,g&&g({action:m,location:O.location,delta:U})}function S(N,U){m="PUSH";let D=Od(O.location,N,U);n&&n(D,N),p=b()+1;let w=$g(D,p),k=O.createHref(D);try{f.pushState(w,"",k)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;o.location.assign(k)}d&&g&&g({action:m,location:O.location,delta:1})}function _(N,U){m="REPLACE";let D=Od(O.location,N,U);n&&n(D,N),p=b();let w=$g(D,p),k=O.createHref(D);f.replaceState(w,"",k),d&&g&&g({action:m,location:O.location,delta:0})}function A(N){return Jx(N)}let O={get action(){return m},get location(){return r(o,f)},listen(N){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Hg,v),g=N,()=>{o.removeEventListener(Hg,v),g=null}},createHref(N){return a(o,N)},createURL:A,encodeLocation(N){let U=A(N);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:S,replace:_,go(N){return f.go(N)}};return O}function Jx(r,a=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ye(n,"No window.location.(origin|href) available to create URL");let l=typeof r=="string"?r:Ql(r);return l=l.replace(/ $/,"%20"),!a&&l.startsWith("//")&&(l=n+l),new URL(l,n)}function $p(r,a,n="/"){return Zx(r,a,n,!1)}function Zx(r,a,n,l){let o=typeof a=="string"?Cn(a):a,d=ns(o.pathname||"/",n);if(d==null)return null;let f=Pp(r);Fx(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let p=uw(d);m=iw(f[g],p,l)}return m}function Pp(r,a=[],n=[],l="",o=!1){let d=(f,m,g=o,p)=>{let b={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(l)&&g)return;Ye(b.relativePath.startsWith(l),`Absolute route path "${b.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(l.length)}let v=as([l,b.relativePath]),S=n.concat(b);f.children&&f.children.length>0&&(Ye(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Pp(f.children,a,S,v,g)),!(f.path==null&&!f.index)&&a.push({path:v,score:rw(v,f.index),routesMeta:S})};return r.forEach((f,m)=>{var g;if(f.path===""||!((g=f.path)!=null&&g.includes("?")))d(f,m);else for(let p of Gp(f.path))d(f,m,!0,p)}),a}function Gp(r){let a=r.split("/");if(a.length===0)return[];let[n,...l]=a,o=n.endsWith("?"),d=n.replace(/\?$/,"");if(l.length===0)return o?[d,""]:[d];let f=Gp(l.join("/")),m=[];return m.push(...f.map(g=>g===""?d:[d,g].join("/"))),o&&m.push(...f),m.map(g=>r.startsWith("/")&&g===""?"/":g)}function Fx(r){r.sort((a,n)=>a.score!==n.score?n.score-a.score:lw(a.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var Wx=/^:[\w-]+$/,ew=3,tw=2,aw=1,sw=10,nw=-2,Pg=r=>r==="*";function rw(r,a){let n=r.split("/"),l=n.length;return n.some(Pg)&&(l+=nw),a&&(l+=tw),n.filter(o=>!Pg(o)).reduce((o,d)=>o+(Wx.test(d)?ew:d===""?aw:sw),l)}function lw(r,a){return r.length===a.length&&r.slice(0,-1).every((l,o)=>l===a[o])?r[r.length-1]-a[a.length-1]:0}function iw(r,a,n=!1){let{routesMeta:l}=r,o={},d="/",f=[];for(let m=0;m<l.length;++m){let g=l[m],p=m===l.length-1,b=d==="/"?a:a.slice(d.length)||"/",v=Bo({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},b),S=g.route;if(!v&&p&&n&&!l[l.length-1].route.index&&(v=Bo({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!v)return null;Object.assign(o,v.params),f.push({params:o,pathname:as([d,v.pathname]),pathnameBase:fw(as([d,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(d=as([d,v.pathnameBase]))}return f}function Bo(r,a){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,l]=ow(r.path,r.caseSensitive,r.end),o=a.match(n);if(!o)return null;let d=o[0],f=d.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:l.reduce((p,{paramName:b,isOptional:v},S)=>{if(b==="*"){let A=m[S]||"";f=d.slice(0,d.length-A.length).replace(/(.)\/+$/,"$1")}const _=m[S];return v&&!_?p[b]=void 0:p[b]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:r}}function ow(r,a=!1,n=!0){oa(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let l=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(l.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(l.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),l]}function uw(r){try{return r.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return oa(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),r}}function ns(r,a){if(a==="/")return r;if(!r.toLowerCase().startsWith(a.toLowerCase()))return null;let n=a.endsWith("/")?a.length-1:a.length,l=r.charAt(n);return l&&l!=="/"?null:r.slice(n)||"/"}function cw(r,a="/"){let{pathname:n,search:l="",hash:o=""}=typeof r=="string"?Cn(r):r;return{pathname:n?n.startsWith("/")?n:dw(n,a):a,search:mw(l),hash:gw(o)}}function dw(r,a){let n=a.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function vd(r,a,n,l){return`Cannot include a '${r}' character in a manually specified \`to.${a}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hw(r){return r.filter((a,n)=>n===0||a.route.path&&a.route.path.length>0)}function oh(r){let a=hw(r);return a.map((n,l)=>l===a.length-1?n.pathname:n.pathnameBase)}function uh(r,a,n,l=!1){let o;typeof r=="string"?o=Cn(r):(o={...r},Ye(!o.pathname||!o.pathname.includes("?"),vd("?","pathname","search",o)),Ye(!o.pathname||!o.pathname.includes("#"),vd("#","pathname","hash",o)),Ye(!o.search||!o.search.includes("#"),vd("#","search","hash",o)));let d=r===""||o.pathname==="",f=d?"/":o.pathname,m;if(f==null)m=n;else{let v=a.length-1;if(!l&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),v-=1;o.pathname=S.join("/")}m=v>=0?a[v]:"/"}let g=cw(o,m),p=f&&f!=="/"&&f.endsWith("/"),b=(d||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||b)&&(g.pathname+="/"),g}var as=r=>r.join("/").replace(/\/\/+/g,"/"),fw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),mw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,gw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function pw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Kp=["POST","PUT","PATCH","DELETE"];new Set(Kp);var yw=["GET",...Kp];new Set(yw);var Lr=j.createContext(null);Lr.displayName="DataRouter";var Io=j.createContext(null);Io.displayName="DataRouterState";j.createContext(!1);var Vp=j.createContext({isTransitioning:!1});Vp.displayName="ViewTransition";var bw=j.createContext(new Map);bw.displayName="Fetchers";var vw=j.createContext(null);vw.displayName="Await";var _a=j.createContext(null);_a.displayName="Navigation";var ai=j.createContext(null);ai.displayName="Location";var Aa=j.createContext({outlet:null,matches:[],isDataRoute:!1});Aa.displayName="Route";var ch=j.createContext(null);ch.displayName="RouteError";function xw(r,{relative:a}={}){Ye(qr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=j.useContext(_a),{hash:o,pathname:d,search:f}=si(r,{relative:a}),m=d;return n!=="/"&&(m=d==="/"?n:as([n,d])),l.createHref({pathname:m,search:f,hash:o})}function qr(){return j.useContext(ai)!=null}function rs(){return Ye(qr(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(ai).location}var Qp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ip(r){j.useContext(_a).static||j.useLayoutEffect(r)}function Yp(){let{isDataRoute:r}=j.useContext(Aa);return r?Dw():ww()}function ww(){Ye(qr(),"useNavigate() may be used only in the context of a <Router> component.");let r=j.useContext(Lr),{basename:a,navigator:n}=j.useContext(_a),{matches:l}=j.useContext(Aa),{pathname:o}=rs(),d=JSON.stringify(oh(l)),f=j.useRef(!1);return Ip(()=>{f.current=!0}),j.useCallback((g,p={})=>{if(oa(f.current,Qp),!f.current)return;if(typeof g=="number"){n.go(g);return}let b=uh(g,JSON.parse(d),o,p.relative==="path");r==null&&a!=="/"&&(b.pathname=b.pathname==="/"?a:as([a,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[a,n,d,o,r])}j.createContext(null);function si(r,{relative:a}={}){let{matches:n}=j.useContext(Aa),{pathname:l}=rs(),o=JSON.stringify(oh(n));return j.useMemo(()=>uh(r,JSON.parse(o),l,a==="path"),[r,o,l,a])}function _w(r,a){return Xp(r,a)}function Xp(r,a,n,l,o){var D;Ye(qr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=j.useContext(_a),{matches:f}=j.useContext(Aa),m=f[f.length-1],g=m?m.params:{},p=m?m.pathname:"/",b=m?m.pathnameBase:"/",v=m&&m.route;{let w=v&&v.path||"";Jp(p,!v||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let S=rs(),_;if(a){let w=typeof a=="string"?Cn(a):a;Ye(b==="/"||((D=w.pathname)==null?void 0:D.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${w.pathname}" was given in the \`location\` prop.`),_=w}else _=S;let A=_.pathname||"/",O=A;if(b!=="/"){let w=b.replace(/^\//,"").split("/");O="/"+A.replace(/^\//,"").split("/").slice(w.length).join("/")}let N=$p(r,{pathname:O});oa(v||N!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),oa(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Tw(N&&N.map(w=>Object.assign({},w,{params:Object.assign({},g,w.params),pathname:as([b,d.encodeLocation?d.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?b:as([b,d.encodeLocation?d.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),f,n,l,o);return a&&U?j.createElement(ai.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},U):U}function Sw(){let r=Rw(),a=pw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,l="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:d},"ErrorBoundary")," or"," ",j.createElement("code",{style:d},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},a),n?j.createElement("pre",{style:o},n):null,f)}var jw=j.createElement(Sw,null),kw=class extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){this.props.unstable_onError?this.props.unstable_onError(r,a):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?j.createElement(Aa.Provider,{value:this.props.routeContext},j.createElement(ch.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Nw({routeContext:r,match:a,children:n}){let l=j.useContext(Lr);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),j.createElement(Aa.Provider,{value:r},n)}function Tw(r,a=[],n=null,l=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(a.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let d=r,f=n==null?void 0:n.errors;if(f!=null){let p=d.findIndex(b=>b.route.id&&(f==null?void 0:f[b.route.id])!==void 0);Ye(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,p+1))}let m=!1,g=-1;if(n)for(let p=0;p<d.length;p++){let b=d[p];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(g=p),b.route.id){let{loaderData:v,errors:S}=n,_=b.route.loader&&!v.hasOwnProperty(b.route.id)&&(!S||S[b.route.id]===void 0);if(b.route.lazy||_){m=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((p,b,v)=>{let S,_=!1,A=null,O=null;n&&(S=f&&b.route.id?f[b.route.id]:void 0,A=b.route.errorElement||jw,m&&(g<0&&v===0?(Jp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,O=null):g===v&&(_=!0,O=b.route.hydrateFallbackElement||null)));let N=a.concat(d.slice(0,v+1)),U=()=>{let D;return S?D=A:_?D=O:b.route.Component?D=j.createElement(b.route.Component,null):b.route.element?D=b.route.element:D=p,j.createElement(Nw,{match:b,routeContext:{outlet:p,matches:N,isDataRoute:n!=null},children:D})};return n&&(b.route.ErrorBoundary||b.route.errorElement||v===0)?j.createElement(kw,{location:n.location,revalidation:n.revalidation,component:A,error:S,children:U(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:l}):U()},null)}function dh(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ew(r){let a=j.useContext(Lr);return Ye(a,dh(r)),a}function Cw(r){let a=j.useContext(Io);return Ye(a,dh(r)),a}function Ow(r){let a=j.useContext(Aa);return Ye(a,dh(r)),a}function hh(r){let a=Ow(r),n=a.matches[a.matches.length-1];return Ye(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function Aw(){return hh("useRouteId")}function Rw(){var l;let r=j.useContext(ch),a=Cw("useRouteError"),n=hh("useRouteError");return r!==void 0?r:(l=a.errors)==null?void 0:l[n]}function Dw(){let{router:r}=Ew("useNavigate"),a=hh("useNavigate"),n=j.useRef(!1);return Ip(()=>{n.current=!0}),j.useCallback(async(o,d={})=>{oa(n.current,Qp),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:a,...d}))},[r,a])}var Gg={};function Jp(r,a,n){!a&&!Gg[r]&&(Gg[r]=!0,oa(!1,n))}j.memo(Mw);function Mw({routes:r,future:a,state:n,unstable_onError:l}){return Xp(r,void 0,n,l,a)}function Uw({to:r,replace:a,state:n,relative:l}){Ye(qr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(_a);oa(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=j.useContext(Aa),{pathname:f}=rs(),m=Yp(),g=uh(r,oh(d),f,l==="path"),p=JSON.stringify(g);return j.useEffect(()=>{m(JSON.parse(p),{replace:a,state:n,relative:l})},[m,p,l,a,n]),null}function ma(r){Ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zw({basename:r="/",children:a=null,location:n,navigationType:l="POP",navigator:o,static:d=!1}){Ye(!qr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=j.useMemo(()=>({basename:f,navigator:o,static:d,future:{}}),[f,o,d]);typeof n=="string"&&(n=Cn(n));let{pathname:g="/",search:p="",hash:b="",state:v=null,key:S="default"}=n,_=j.useMemo(()=>{let A=ns(g,f);return A==null?null:{location:{pathname:A,search:p,hash:b,state:v,key:S},navigationType:l}},[f,g,p,b,v,S,l]);return oa(_!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:j.createElement(_a.Provider,{value:m},j.createElement(ai.Provider,{children:a,value:_}))}function Lw({children:r,location:a}){return _w(Ad(r),a)}function Ad(r,a=[]){let n=[];return j.Children.forEach(r,(l,o)=>{if(!j.isValidElement(l))return;let d=[...a,o];if(l.type===j.Fragment){n.push.apply(n,Ad(l.props.children,d));return}Ye(l.type===ma,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ye(!l.props.index||!l.props.children,"An index route cannot have child routes.");let f={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(f.children=Ad(l.props.children,d)),n.push(f)}),n}var zo="get",Lo="application/x-www-form-urlencoded";function Yo(r){return r!=null&&typeof r.tagName=="string"}function qw(r){return Yo(r)&&r.tagName.toLowerCase()==="button"}function Bw(r){return Yo(r)&&r.tagName.toLowerCase()==="form"}function Hw(r){return Yo(r)&&r.tagName.toLowerCase()==="input"}function $w(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Pw(r,a){return r.button===0&&(!a||a==="_self")&&!$w(r)}var ko=null;function Gw(){if(ko===null)try{new FormData(document.createElement("form"),0),ko=!1}catch{ko=!0}return ko}var Kw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xd(r){return r!=null&&!Kw.has(r)?(oa(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lo}"`),null):r}function Vw(r,a){let n,l,o,d,f;if(Bw(r)){let m=r.getAttribute("action");l=m?ns(m,a):null,n=r.getAttribute("method")||zo,o=xd(r.getAttribute("enctype"))||Lo,d=new FormData(r)}else if(qw(r)||Hw(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||m.getAttribute("action");if(l=g?ns(g,a):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||zo,o=xd(r.getAttribute("formenctype"))||xd(m.getAttribute("enctype"))||Lo,d=new FormData(m,r),!Gw()){let{name:p,type:b,value:v}=r;if(b==="image"){let S=p?`${p}.`:"";d.append(`${S}x`,"0"),d.append(`${S}y`,"0")}else p&&d.append(p,v)}}else{if(Yo(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zo,l=null,o=Lo,f=r}return d&&o==="text/plain"&&(f=d,d=void 0),{action:l,method:n.toLowerCase(),encType:o,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fh(r,a){if(r===!1||r===null||typeof r>"u")throw new Error(a)}function Qw(r,a,n){let l=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return l.pathname==="/"?l.pathname=`_root.${n}`:a&&ns(l.pathname,a)==="/"?l.pathname=`${a.replace(/\/$/,"")}/_root.${n}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${n}`,l}async function Iw(r,a){if(r.id in a)return a[r.id];try{let n=await import(r.module);return a[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Yw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Xw(r,a,n){let l=await Promise.all(r.map(async o=>{let d=a.routes[o.route.id];if(d){let f=await Iw(d,n);return f.links?f.links():[]}return[]}));return Ww(l.flat(1).filter(Yw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Kg(r,a,n,l,o,d){let f=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,m=(g,p)=>{var b;return n[p].pathname!==g.pathname||((b=n[p].route.path)==null?void 0:b.endsWith("*"))&&n[p].params["*"]!==g.params["*"]};return d==="assets"?a.filter((g,p)=>f(g,p)||m(g,p)):d==="data"?a.filter((g,p)=>{var v;let b=l.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(f(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let S=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Jw(r,a,{includeHydrateFallback:n}={}){return Zw(r.map(l=>{let o=a.routes[l.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function Zw(r){return[...new Set(r)]}function Fw(r){let a={},n=Object.keys(r).sort();for(let l of n)a[l]=r[l];return a}function Ww(r,a){let n=new Set;return new Set(a),r.reduce((l,o)=>{let d=JSON.stringify(Fw(o));return n.has(d)||(n.add(d),l.push({key:d,link:o})),l},[])}function Zp(){let r=j.useContext(Lr);return fh(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function e_(){let r=j.useContext(Io);return fh(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var mh=j.createContext(void 0);mh.displayName="FrameworkContext";function Fp(){let r=j.useContext(mh);return fh(r,"You must render this element inside a <HydratedRouter> element"),r}function t_(r,a){let n=j.useContext(mh),[l,o]=j.useState(!1),[d,f]=j.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:b,onTouchStart:v}=a,S=j.useRef(null);j.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let O=U=>{U.forEach(D=>{f(D.isIntersecting)})},N=new IntersectionObserver(O,{threshold:.5});return S.current&&N.observe(S.current),()=>{N.disconnect()}}},[r]),j.useEffect(()=>{if(l){let O=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(O)}}},[l]);let _=()=>{o(!0)},A=()=>{o(!1),f(!1)};return n?r!=="intent"?[d,S,{}]:[d,S,{onFocus:ql(m,_),onBlur:ql(g,A),onMouseEnter:ql(p,_),onMouseLeave:ql(b,A),onTouchStart:ql(v,_)}]:[!1,S,{}]}function ql(r,a){return n=>{r&&r(n),n.defaultPrevented||a(n)}}function a_({page:r,...a}){let{router:n}=Zp(),l=j.useMemo(()=>$p(n.routes,r,n.basename),[n.routes,r,n.basename]);return l?j.createElement(n_,{page:r,matches:l,...a}):null}function s_(r){let{manifest:a,routeModules:n}=Fp(),[l,o]=j.useState([]);return j.useEffect(()=>{let d=!1;return Xw(r,a,n).then(f=>{d||o(f)}),()=>{d=!0}},[r,a,n]),l}function n_({page:r,matches:a,...n}){let l=rs(),{manifest:o,routeModules:d}=Fp(),{basename:f}=Zp(),{loaderData:m,matches:g}=e_(),p=j.useMemo(()=>Kg(r,a,g,o,l,"data"),[r,a,g,o,l]),b=j.useMemo(()=>Kg(r,a,g,o,l,"assets"),[r,a,g,o,l]),v=j.useMemo(()=>{if(r===l.pathname+l.search+l.hash)return[];let A=new Set,O=!1;if(a.forEach(U=>{var w;let D=o.routes[U.route.id];!D||!D.hasLoader||(!p.some(k=>k.route.id===U.route.id)&&U.route.id in m&&((w=d[U.route.id])!=null&&w.shouldRevalidate)||D.hasClientLoader?O=!0:A.add(U.route.id))}),A.size===0)return[];let N=Qw(r,f,"data");return O&&A.size>0&&N.searchParams.set("_routes",a.filter(U=>A.has(U.route.id)).map(U=>U.route.id).join(",")),[N.pathname+N.search]},[f,m,l,o,p,a,r,d]),S=j.useMemo(()=>Jw(b,o),[b,o]),_=s_(b);return j.createElement(j.Fragment,null,v.map(A=>j.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...n})),S.map(A=>j.createElement("link",{key:A,rel:"modulepreload",href:A,...n})),_.map(({key:A,link:O})=>j.createElement("link",{key:A,nonce:n.nonce,...O})))}function r_(...r){return a=>{r.forEach(n=>{typeof n=="function"?n(a):n!=null&&(n.current=a)})}}var Wp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wp&&(window.__reactRouterVersion="7.9.5")}catch{}function l_({basename:r,children:a,window:n}){let l=j.useRef();l.current==null&&(l.current=Ix({window:n,v5Compat:!0}));let o=l.current,[d,f]=j.useState({action:o.action,location:o.location}),m=j.useCallback(g=>{j.startTransition(()=>f(g))},[f]);return j.useLayoutEffect(()=>o.listen(m),[o,m]),j.createElement(zw,{basename:r,children:a,location:d.location,navigationType:d.action,navigator:o})}var ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xo=j.forwardRef(function({onClick:a,discover:n="render",prefetch:l="none",relative:o,reloadDocument:d,replace:f,state:m,target:g,to:p,preventScrollReset:b,viewTransition:v,...S},_){let{basename:A}=j.useContext(_a),O=typeof p=="string"&&ey.test(p),N,U=!1;if(typeof p=="string"&&O&&(N=p,Wp))try{let ee=new URL(window.location.href),se=p.startsWith("//")?new URL(ee.protocol+p):new URL(p),fe=ns(se.pathname,A);se.origin===ee.origin&&fe!=null?p=fe+se.search+se.hash:U=!0}catch{oa(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=xw(p,{relative:o}),[w,k,q]=t_(l,S),$=c_(p,{replace:f,state:m,target:g,preventScrollReset:b,relative:o,viewTransition:v});function P(ee){a&&a(ee),ee.defaultPrevented||$(ee)}let X=j.createElement("a",{...S,...q,href:N||D,onClick:U||d?a:P,ref:r_(_,k),target:g,"data-discover":!O&&n==="render"?"true":void 0});return w&&!O?j.createElement(j.Fragment,null,X,j.createElement(a_,{page:D})):X});Xo.displayName="Link";var i_=j.forwardRef(function({"aria-current":a="page",caseSensitive:n=!1,className:l="",end:o=!1,style:d,to:f,viewTransition:m,children:g,...p},b){let v=si(f,{relative:p.relative}),S=rs(),_=j.useContext(Io),{navigator:A,basename:O}=j.useContext(_a),N=_!=null&&g_(v)&&m===!0,U=A.encodeLocation?A.encodeLocation(v).pathname:v.pathname,D=S.pathname,w=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(D=D.toLowerCase(),w=w?w.toLowerCase():null,U=U.toLowerCase()),w&&O&&(w=ns(w,O)||w);const k=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let q=D===U||!o&&D.startsWith(U)&&D.charAt(k)==="/",$=w!=null&&(w===U||!o&&w.startsWith(U)&&w.charAt(U.length)==="/"),P={isActive:q,isPending:$,isTransitioning:N},X=q?a:void 0,ee;typeof l=="function"?ee=l(P):ee=[l,q?"active":null,$?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let se=typeof d=="function"?d(P):d;return j.createElement(Xo,{...p,"aria-current":X,className:ee,ref:b,style:se,to:f,viewTransition:m},typeof g=="function"?g(P):g)});i_.displayName="NavLink";var o_=j.forwardRef(({discover:r="render",fetcherKey:a,navigate:n,reloadDocument:l,replace:o,state:d,method:f=zo,action:m,onSubmit:g,relative:p,preventScrollReset:b,viewTransition:v,...S},_)=>{let A=f_(),O=m_(m,{relative:p}),N=f.toLowerCase()==="get"?"get":"post",U=typeof m=="string"&&ey.test(m),D=w=>{if(g&&g(w),w.defaultPrevented)return;w.preventDefault();let k=w.nativeEvent.submitter,q=(k==null?void 0:k.getAttribute("formmethod"))||f;A(k||w.currentTarget,{fetcherKey:a,method:q,navigate:n,replace:o,state:d,relative:p,preventScrollReset:b,viewTransition:v})};return j.createElement("form",{ref:_,method:N,action:O,onSubmit:l?g:D,...S,"data-discover":!U&&r==="render"?"true":void 0})});o_.displayName="Form";function u_(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ty(r){let a=j.useContext(Lr);return Ye(a,u_(r)),a}function c_(r,{target:a,replace:n,state:l,preventScrollReset:o,relative:d,viewTransition:f}={}){let m=Yp(),g=rs(),p=si(r,{relative:d});return j.useCallback(b=>{if(Pw(b,a)){b.preventDefault();let v=n!==void 0?n:Ql(g)===Ql(p);m(r,{replace:v,state:l,preventScrollReset:o,relative:d,viewTransition:f})}},[g,m,p,n,l,a,r,o,d,f])}var d_=0,h_=()=>`__${String(++d_)}__`;function f_(){let{router:r}=ty("useSubmit"),{basename:a}=j.useContext(_a),n=Aw();return j.useCallback(async(l,o={})=>{let{action:d,method:f,encType:m,formData:g,body:p}=Vw(l,a);if(o.navigate===!1){let b=o.fetcherKey||h_();await r.fetch(b,n,o.action||d,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,a,n])}function m_(r,{relative:a}={}){let{basename:n}=j.useContext(_a),l=j.useContext(Aa);Ye(l,"useFormAction must be used inside a RouteContext");let[o]=l.matches.slice(-1),d={...si(r||".",{relative:a})},f=rs();if(r==null){d.search=f.search;let m=new URLSearchParams(d.search),g=m.getAll("index");if(g.some(b=>b==="")){m.delete("index"),g.filter(v=>v).forEach(v=>m.append("index",v));let b=m.toString();d.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:as([n,d.pathname])),Ql(d)}function g_(r,{relative:a}={}){let n=j.useContext(Vp);Ye(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=ty("useViewTransitionState"),o=si(r,{relative:a});if(!n.isTransitioning)return!1;let d=ns(n.currentLocation.pathname,l)||n.currentLocation.pathname,f=ns(n.nextLocation.pathname,l)||n.nextLocation.pathname;return Bo(o.pathname,f)!=null||Bo(o.pathname,d)!=null}var Br=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},p_={setTimeout:(r,a)=>setTimeout(r,a),clearTimeout:r=>clearTimeout(r),setInterval:(r,a)=>setInterval(r,a),clearInterval:r=>clearInterval(r)},Us,rh,Op,y_=(Op=class{constructor(){ue(this,Us,p_);ue(this,rh,!1)}setTimeoutProvider(r){ae(this,Us,r)}setTimeout(r,a){return E(this,Us).setTimeout(r,a)}clearTimeout(r){E(this,Us).clearTimeout(r)}setInterval(r,a){return E(this,Us).setInterval(r,a)}clearInterval(r){E(this,Us).clearInterval(r)}},Us=new WeakMap,rh=new WeakMap,Op),pn=new y_;function b_(r){setTimeout(r,0)}var Tn=typeof window>"u"||"Deno"in globalThis;function Et(){}function v_(r,a){return typeof r=="function"?r(a):r}function Rd(r){return typeof r=="number"&&r>=0&&r!==1/0}function ay(r,a){return Math.max(r+(a||0)-Date.now(),0)}function Ks(r,a){return typeof r=="function"?r(a):r}function ia(r,a){return typeof r=="function"?r(a):r}function Vg(r,a){const{type:n="all",exact:l,fetchStatus:o,predicate:d,queryKey:f,stale:m}=r;if(f){if(l){if(a.queryHash!==gh(f,a.options))return!1}else if(!Il(a.queryKey,f))return!1}if(n!=="all"){const g=a.isActive();if(n==="active"&&!g||n==="inactive"&&g)return!1}return!(typeof m=="boolean"&&a.isStale()!==m||o&&o!==a.state.fetchStatus||d&&!d(a))}function Qg(r,a){const{exact:n,status:l,predicate:o,mutationKey:d}=r;if(d){if(!a.options.mutationKey)return!1;if(n){if(En(a.options.mutationKey)!==En(d))return!1}else if(!Il(a.options.mutationKey,d))return!1}return!(l&&a.state.status!==l||o&&!o(a))}function gh(r,a){return((a==null?void 0:a.queryKeyHashFn)||En)(r)}function En(r){return JSON.stringify(r,(a,n)=>Dd(n)?Object.keys(n).sort().reduce((l,o)=>(l[o]=n[o],l),{}):n)}function Il(r,a){return r===a?!0:typeof r!=typeof a?!1:r&&a&&typeof r=="object"&&typeof a=="object"?Object.keys(a).every(n=>Il(r[n],a[n])):!1}var x_=Object.prototype.hasOwnProperty;function sy(r,a){if(r===a)return r;const n=Ig(r)&&Ig(a);if(!n&&!(Dd(r)&&Dd(a)))return a;const o=(n?r:Object.keys(r)).length,d=n?a:Object.keys(a),f=d.length,m=n?new Array(f):{};let g=0;for(let p=0;p<f;p++){const b=n?p:d[p],v=r[b],S=a[b];if(v===S){m[b]=v,(n?p<o:x_.call(r,b))&&g++;continue}if(v===null||S===null||typeof v!="object"||typeof S!="object"){m[b]=S;continue}const _=sy(v,S);m[b]=_,_===v&&g++}return o===f&&g===o?r:m}function Ho(r,a){if(!a||Object.keys(r).length!==Object.keys(a).length)return!1;for(const n in r)if(r[n]!==a[n])return!1;return!0}function Ig(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Dd(r){if(!Yg(r))return!1;const a=r.constructor;if(a===void 0)return!0;const n=a.prototype;return!(!Yg(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Yg(r){return Object.prototype.toString.call(r)==="[object Object]"}function w_(r){return new Promise(a=>{pn.setTimeout(a,r)})}function Md(r,a,n){return typeof n.structuralSharing=="function"?n.structuralSharing(r,a):n.structuralSharing!==!1?sy(r,a):a}function __(r,a,n=0){const l=[...r,a];return n&&l.length>n?l.slice(1):l}function S_(r,a,n=0){const l=[a,...r];return n&&l.length>n?l.slice(0,-1):l}var ph=Symbol();function ny(r,a){return!r.queryFn&&(a!=null&&a.initialPromise)?()=>a.initialPromise:!r.queryFn||r.queryFn===ph?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function ry(r,a){return typeof r=="function"?r(...a):!!r}var bn,zs,jr,Ap,j_=(Ap=class extends Br{constructor(){super();ue(this,bn);ue(this,zs);ue(this,jr);ae(this,jr,a=>{if(!Tn&&window.addEventListener){const n=()=>a();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){E(this,zs)||this.setEventListener(E(this,jr))}onUnsubscribe(){var a;this.hasListeners()||((a=E(this,zs))==null||a.call(this),ae(this,zs,void 0))}setEventListener(a){var n;ae(this,jr,a),(n=E(this,zs))==null||n.call(this),ae(this,zs,a(l=>{typeof l=="boolean"?this.setFocused(l):this.onFocus()}))}setFocused(a){E(this,bn)!==a&&(ae(this,bn,a),this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(n=>{n(a)})}isFocused(){var a;return typeof E(this,bn)=="boolean"?E(this,bn):((a=globalThis.document)==null?void 0:a.visibilityState)!=="hidden"}},bn=new WeakMap,zs=new WeakMap,jr=new WeakMap,Ap),yh=new j_;function Ud(){let r,a;const n=new Promise((o,d)=>{r=o,a=d});n.status="pending",n.catch(()=>{});function l(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{l({status:"fulfilled",value:o}),r(o)},n.reject=o=>{l({status:"rejected",reason:o}),a(o)},n}var k_=b_;function N_(){let r=[],a=0,n=m=>{m()},l=m=>{m()},o=k_;const d=m=>{a?r.push(m):o(()=>{n(m)})},f=()=>{const m=r;r=[],m.length&&o(()=>{l(()=>{m.forEach(g=>{n(g)})})})};return{batch:m=>{let g;a++;try{g=m()}finally{a--,a||f()}return g},batchCalls:m=>(...g)=>{d(()=>{m(...g)})},schedule:d,setNotifyFunction:m=>{n=m},setBatchNotifyFunction:m=>{l=m},setScheduler:m=>{o=m}}}var ct=N_(),kr,Ls,Nr,Rp,T_=(Rp=class extends Br{constructor(){super();ue(this,kr,!0);ue(this,Ls);ue(this,Nr);ae(this,Nr,a=>{if(!Tn&&window.addEventListener){const n=()=>a(!0),l=()=>a(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",l)}}})}onSubscribe(){E(this,Ls)||this.setEventListener(E(this,Nr))}onUnsubscribe(){var a;this.hasListeners()||((a=E(this,Ls))==null||a.call(this),ae(this,Ls,void 0))}setEventListener(a){var n;ae(this,Nr,a),(n=E(this,Ls))==null||n.call(this),ae(this,Ls,a(this.setOnline.bind(this)))}setOnline(a){E(this,kr)!==a&&(ae(this,kr,a),this.listeners.forEach(l=>{l(a)}))}isOnline(){return E(this,kr)}},kr=new WeakMap,Ls=new WeakMap,Nr=new WeakMap,Rp),$o=new T_;function E_(r){return Math.min(1e3*2**r,3e4)}function ly(r){return(r??"online")==="online"?$o.isOnline():!0}var zd=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function iy(r){let a=!1,n=0,l;const o=Ud(),d=()=>o.status!=="pending",f=O=>{var N;if(!d()){const U=new zd(O);S(U),(N=r.onCancel)==null||N.call(r,U)}},m=()=>{a=!0},g=()=>{a=!1},p=()=>yh.isFocused()&&(r.networkMode==="always"||$o.isOnline())&&r.canRun(),b=()=>ly(r.networkMode)&&r.canRun(),v=O=>{d()||(l==null||l(),o.resolve(O))},S=O=>{d()||(l==null||l(),o.reject(O))},_=()=>new Promise(O=>{var N;l=U=>{(d()||p())&&O(U)},(N=r.onPause)==null||N.call(r)}).then(()=>{var O;l=void 0,d()||(O=r.onContinue)==null||O.call(r)}),A=()=>{if(d())return;let O;const N=n===0?r.initialPromise:void 0;try{O=N??r.fn()}catch(U){O=Promise.reject(U)}Promise.resolve(O).then(v).catch(U=>{var $;if(d())return;const D=r.retry??(Tn?0:3),w=r.retryDelay??E_,k=typeof w=="function"?w(n,U):w,q=D===!0||typeof D=="number"&&n<D||typeof D=="function"&&D(n,U);if(a||!q){S(U);return}n++,($=r.onFail)==null||$.call(r,n,U),w_(k).then(()=>p()?void 0:_()).then(()=>{a?S(U):A()})})};return{promise:o,status:()=>o.status,cancel:f,continue:()=>(l==null||l(),o),cancelRetry:m,continueRetry:g,canStart:b,start:()=>(b()?A():_().then(A),o)}}var vn,Dp,oy=(Dp=class{constructor(){ue(this,vn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rd(this.gcTime)&&ae(this,vn,pn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Tn?1/0:300*1e3))}clearGcTimeout(){E(this,vn)&&(pn.clearTimeout(E(this,vn)),ae(this,vn,void 0))}},vn=new WeakMap,Dp),xn,Tr,la,wn,mt,Zl,_n,ba,Ja,Mp,C_=(Mp=class extends oy{constructor(a){super();ue(this,ba);ue(this,xn);ue(this,Tr);ue(this,la);ue(this,wn);ue(this,mt);ue(this,Zl);ue(this,_n);ae(this,_n,!1),ae(this,Zl,a.defaultOptions),this.setOptions(a.options),this.observers=[],ae(this,wn,a.client),ae(this,la,E(this,wn).getQueryCache()),this.queryKey=a.queryKey,this.queryHash=a.queryHash,ae(this,xn,Jg(this.options)),this.state=a.state??E(this,xn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var a;return(a=E(this,mt))==null?void 0:a.promise}setOptions(a){if(this.options={...E(this,Zl),...a},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Jg(this.options);n.data!==void 0&&(this.setState(Xg(n.data,n.dataUpdatedAt)),ae(this,xn,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,la).remove(this)}setData(a,n){const l=Md(this.state.data,a,this.options);return Se(this,ba,Ja).call(this,{data:l,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),l}setState(a,n){Se(this,ba,Ja).call(this,{type:"setState",state:a,setStateOptions:n})}cancel(a){var l,o;const n=(l=E(this,mt))==null?void 0:l.promise;return(o=E(this,mt))==null||o.cancel(a),n?n.then(Et).catch(Et):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,xn))}isActive(){return this.observers.some(a=>ia(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ph||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>Ks(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!ay(this.state.dataUpdatedAt,a)}onFocus(){var n;const a=this.observers.find(l=>l.shouldFetchOnWindowFocus());a==null||a.refetch({cancelRefetch:!1}),(n=E(this,mt))==null||n.continue()}onOnline(){var n;const a=this.observers.find(l=>l.shouldFetchOnReconnect());a==null||a.refetch({cancelRefetch:!1}),(n=E(this,mt))==null||n.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),E(this,la).notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(n=>n!==a),this.observers.length||(E(this,mt)&&(E(this,_n)?E(this,mt).cancel({revert:!0}):E(this,mt).cancelRetry()),this.scheduleGc()),E(this,la).notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Se(this,ba,Ja).call(this,{type:"invalidate"})}async fetch(a,n){var g,p,b,v,S,_,A,O,N,U,D,w;if(this.state.fetchStatus!=="idle"&&((g=E(this,mt))==null?void 0:g.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(E(this,mt))return E(this,mt).continueRetry(),E(this,mt).promise}if(a&&this.setOptions(a),!this.options.queryFn){const k=this.observers.find(q=>q.options.queryFn);k&&this.setOptions(k.options)}const l=new AbortController,o=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ae(this,_n,!0),l.signal)})},d=()=>{const k=ny(this.options,n),$=(()=>{const P={client:E(this,wn),queryKey:this.queryKey,meta:this.meta};return o(P),P})();return ae(this,_n,!1),this.options.persister?this.options.persister(k,$,this):k($)},m=(()=>{const k={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:E(this,wn),state:this.state,fetchFn:d};return o(k),k})();(p=this.options.behavior)==null||p.onFetch(m,this),ae(this,Tr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((b=m.fetchOptions)==null?void 0:b.meta))&&Se(this,ba,Ja).call(this,{type:"fetch",meta:(v=m.fetchOptions)==null?void 0:v.meta}),ae(this,mt,iy({initialPromise:n==null?void 0:n.initialPromise,fn:m.fetchFn,onCancel:k=>{k instanceof zd&&k.revert&&this.setState({...E(this,Tr),fetchStatus:"idle"}),l.abort()},onFail:(k,q)=>{Se(this,ba,Ja).call(this,{type:"failed",failureCount:k,error:q})},onPause:()=>{Se(this,ba,Ja).call(this,{type:"pause"})},onContinue:()=>{Se(this,ba,Ja).call(this,{type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0}));try{const k=await E(this,mt).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(_=(S=E(this,la).config).onSuccess)==null||_.call(S,k,this),(O=(A=E(this,la).config).onSettled)==null||O.call(A,k,this.state.error,this),k}catch(k){if(k instanceof zd){if(k.silent)return E(this,mt).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Se(this,ba,Ja).call(this,{type:"error",error:k}),(U=(N=E(this,la).config).onError)==null||U.call(N,k,this),(w=(D=E(this,la).config).onSettled)==null||w.call(D,this.state.data,k,this),k}finally{this.scheduleGc()}}},xn=new WeakMap,Tr=new WeakMap,la=new WeakMap,wn=new WeakMap,mt=new WeakMap,Zl=new WeakMap,_n=new WeakMap,ba=new WeakSet,Ja=function(a){const n=l=>{switch(a.type){case"failed":return{...l,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...uy(l.data,this.options),fetchMeta:a.meta??null};case"success":const o={...l,...Xg(a.data,a.dataUpdatedAt),dataUpdateCount:l.dataUpdateCount+1,...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,Tr,a.manual?o:void 0),o;case"error":const d=a.error;return{...l,error:d,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...a.state}}};this.state=n(this.state),ct.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),E(this,la).notify({query:this,type:"updated",action:a})})},Mp);function uy(r,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ly(a.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Xg(r,a){return{data:r,dataUpdatedAt:a??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Jg(r){const a=typeof r.initialData=="function"?r.initialData():r.initialData,n=a!==void 0,l=n?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:n?l??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var zt,Oe,Fl,Nt,Sn,Er,Fa,qs,Wl,Cr,Or,jn,kn,Bs,Ar,Le,$l,Ld,qd,Bd,Hd,$d,Pd,Gd,cy,Up,O_=(Up=class extends Br{constructor(a,n){super();ue(this,Le);ue(this,zt);ue(this,Oe);ue(this,Fl);ue(this,Nt);ue(this,Sn);ue(this,Er);ue(this,Fa);ue(this,qs);ue(this,Wl);ue(this,Cr);ue(this,Or);ue(this,jn);ue(this,kn);ue(this,Bs);ue(this,Ar,new Set);this.options=n,ae(this,zt,a),ae(this,qs,null),ae(this,Fa,Ud()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,Oe).addObserver(this),Zg(E(this,Oe),this.options)?Se(this,Le,$l).call(this):this.updateResult(),Se(this,Le,Hd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kd(E(this,Oe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kd(E(this,Oe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Se(this,Le,$d).call(this),Se(this,Le,Pd).call(this),E(this,Oe).removeObserver(this)}setOptions(a){const n=this.options,l=E(this,Oe);if(this.options=E(this,zt).defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ia(this.options.enabled,E(this,Oe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Se(this,Le,Gd).call(this),E(this,Oe).setOptions(this.options),n._defaulted&&!Ho(this.options,n)&&E(this,zt).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,Oe),observer:this});const o=this.hasListeners();o&&Fg(E(this,Oe),l,this.options,n)&&Se(this,Le,$l).call(this),this.updateResult(),o&&(E(this,Oe)!==l||ia(this.options.enabled,E(this,Oe))!==ia(n.enabled,E(this,Oe))||Ks(this.options.staleTime,E(this,Oe))!==Ks(n.staleTime,E(this,Oe)))&&Se(this,Le,Ld).call(this);const d=Se(this,Le,qd).call(this);o&&(E(this,Oe)!==l||ia(this.options.enabled,E(this,Oe))!==ia(n.enabled,E(this,Oe))||d!==E(this,Bs))&&Se(this,Le,Bd).call(this,d)}getOptimisticResult(a){const n=E(this,zt).getQueryCache().build(E(this,zt),a),l=this.createResult(n,a);return R_(this,l)&&(ae(this,Nt,l),ae(this,Er,this.options),ae(this,Sn,E(this,Oe).state)),l}getCurrentResult(){return E(this,Nt)}trackResult(a,n){return new Proxy(a,{get:(l,o)=>(this.trackProp(o),n==null||n(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&E(this,Fa).status==="pending"&&E(this,Fa).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(l,o))})}trackProp(a){E(this,Ar).add(a)}getCurrentQuery(){return E(this,Oe)}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const n=E(this,zt).defaultQueryOptions(a),l=E(this,zt).getQueryCache().build(E(this,zt),n);return l.fetch().then(()=>this.createResult(l,n))}fetch(a){return Se(this,Le,$l).call(this,{...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,Nt)))}createResult(a,n){var ee;const l=E(this,Oe),o=this.options,d=E(this,Nt),f=E(this,Sn),m=E(this,Er),p=a!==l?a.state:E(this,Fl),{state:b}=a;let v={...b},S=!1,_;if(n._optimisticResults){const se=this.hasListeners(),fe=!se&&Zg(a,n),J=se&&Fg(a,l,n,o);(fe||J)&&(v={...v,...uy(b.data,a.options)}),n._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:A,errorUpdatedAt:O,status:N}=v;_=v.data;let U=!1;if(n.placeholderData!==void 0&&_===void 0&&N==="pending"){let se;d!=null&&d.isPlaceholderData&&n.placeholderData===(m==null?void 0:m.placeholderData)?(se=d.data,U=!0):se=typeof n.placeholderData=="function"?n.placeholderData((ee=E(this,Or))==null?void 0:ee.state.data,E(this,Or)):n.placeholderData,se!==void 0&&(N="success",_=Md(d==null?void 0:d.data,se,n),S=!0)}if(n.select&&_!==void 0&&!U)if(d&&_===(f==null?void 0:f.data)&&n.select===E(this,Wl))_=E(this,Cr);else try{ae(this,Wl,n.select),_=n.select(_),_=Md(d==null?void 0:d.data,_,n),ae(this,Cr,_),ae(this,qs,null)}catch(se){ae(this,qs,se)}E(this,qs)&&(A=E(this,qs),_=E(this,Cr),O=Date.now(),N="error");const D=v.fetchStatus==="fetching",w=N==="pending",k=N==="error",q=w&&D,$=_!==void 0,X={status:N,fetchStatus:v.fetchStatus,isPending:w,isSuccess:N==="success",isError:k,isInitialLoading:q,isLoading:q,data:_,dataUpdatedAt:v.dataUpdatedAt,error:A,errorUpdatedAt:O,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:D,isRefetching:D&&!w,isLoadingError:k&&!$,isPaused:v.fetchStatus==="paused",isPlaceholderData:S,isRefetchError:k&&$,isStale:bh(a,n),refetch:this.refetch,promise:E(this,Fa),isEnabled:ia(n.enabled,a)!==!1};if(this.options.experimental_prefetchInRender){const se=re=>{X.status==="error"?re.reject(X.error):X.data!==void 0&&re.resolve(X.data)},fe=()=>{const re=ae(this,Fa,X.promise=Ud());se(re)},J=E(this,Fa);switch(J.status){case"pending":a.queryHash===l.queryHash&&se(J);break;case"fulfilled":(X.status==="error"||X.data!==J.value)&&fe();break;case"rejected":(X.status!=="error"||X.error!==J.reason)&&fe();break}}return X}updateResult(){const a=E(this,Nt),n=this.createResult(E(this,Oe),this.options);if(ae(this,Sn,E(this,Oe).state),ae(this,Er,this.options),E(this,Sn).data!==void 0&&ae(this,Or,E(this,Oe)),Ho(n,a))return;ae(this,Nt,n);const l=()=>{if(!a)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!E(this,Ar).size)return!0;const f=new Set(d??E(this,Ar));return this.options.throwOnError&&f.add("error"),Object.keys(E(this,Nt)).some(m=>{const g=m;return E(this,Nt)[g]!==a[g]&&f.has(g)})};Se(this,Le,cy).call(this,{listeners:l()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Se(this,Le,Hd).call(this)}},zt=new WeakMap,Oe=new WeakMap,Fl=new WeakMap,Nt=new WeakMap,Sn=new WeakMap,Er=new WeakMap,Fa=new WeakMap,qs=new WeakMap,Wl=new WeakMap,Cr=new WeakMap,Or=new WeakMap,jn=new WeakMap,kn=new WeakMap,Bs=new WeakMap,Ar=new WeakMap,Le=new WeakSet,$l=function(a){Se(this,Le,Gd).call(this);let n=E(this,Oe).fetch(this.options,a);return a!=null&&a.throwOnError||(n=n.catch(Et)),n},Ld=function(){Se(this,Le,$d).call(this);const a=Ks(this.options.staleTime,E(this,Oe));if(Tn||E(this,Nt).isStale||!Rd(a))return;const l=ay(E(this,Nt).dataUpdatedAt,a)+1;ae(this,jn,pn.setTimeout(()=>{E(this,Nt).isStale||this.updateResult()},l))},qd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,Oe)):this.options.refetchInterval)??!1},Bd=function(a){Se(this,Le,Pd).call(this),ae(this,Bs,a),!(Tn||ia(this.options.enabled,E(this,Oe))===!1||!Rd(E(this,Bs))||E(this,Bs)===0)&&ae(this,kn,pn.setInterval(()=>{(this.options.refetchIntervalInBackground||yh.isFocused())&&Se(this,Le,$l).call(this)},E(this,Bs)))},Hd=function(){Se(this,Le,Ld).call(this),Se(this,Le,Bd).call(this,Se(this,Le,qd).call(this))},$d=function(){E(this,jn)&&(pn.clearTimeout(E(this,jn)),ae(this,jn,void 0))},Pd=function(){E(this,kn)&&(pn.clearInterval(E(this,kn)),ae(this,kn,void 0))},Gd=function(){const a=E(this,zt).getQueryCache().build(E(this,zt),this.options);if(a===E(this,Oe))return;const n=E(this,Oe);ae(this,Oe,a),ae(this,Fl,a.state),this.hasListeners()&&(n==null||n.removeObserver(this),a.addObserver(this))},cy=function(a){ct.batch(()=>{a.listeners&&this.listeners.forEach(n=>{n(E(this,Nt))}),E(this,zt).getQueryCache().notify({query:E(this,Oe),type:"observerResultsUpdated"})})},Up);function A_(r,a){return ia(a.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&a.retryOnMount===!1)}function Zg(r,a){return A_(r,a)||r.state.data!==void 0&&Kd(r,a,a.refetchOnMount)}function Kd(r,a,n){if(ia(a.enabled,r)!==!1&&Ks(a.staleTime,r)!=="static"){const l=typeof n=="function"?n(r):n;return l==="always"||l!==!1&&bh(r,a)}return!1}function Fg(r,a,n,l){return(r!==a||ia(l.enabled,r)===!1)&&(!n.suspense||r.state.status!=="error")&&bh(r,n)}function bh(r,a){return ia(a.enabled,r)!==!1&&r.isStaleByTime(Ks(a.staleTime,r))}function R_(r,a){return!Ho(r.getCurrentResult(),a)}function Wg(r){return{onFetch:(a,n)=>{var b,v,S,_,A;const l=a.options,o=(S=(v=(b=a.fetchOptions)==null?void 0:b.meta)==null?void 0:v.fetchMore)==null?void 0:S.direction,d=((_=a.state.data)==null?void 0:_.pages)||[],f=((A=a.state.data)==null?void 0:A.pageParams)||[];let m={pages:[],pageParams:[]},g=0;const p=async()=>{let O=!1;const N=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(a.signal.aborted?O=!0:a.signal.addEventListener("abort",()=>{O=!0}),a.signal)})},U=ny(a.options,a.fetchOptions),D=async(w,k,q)=>{if(O)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const P=(()=>{const fe={client:a.client,queryKey:a.queryKey,pageParam:k,direction:q?"backward":"forward",meta:a.options.meta};return N(fe),fe})(),X=await U(P),{maxPages:ee}=a.options,se=q?S_:__;return{pages:se(w.pages,X,ee),pageParams:se(w.pageParams,k,ee)}};if(o&&d.length){const w=o==="backward",k=w?D_:ep,q={pages:d,pageParams:f},$=k(l,q);m=await D(q,$,w)}else{const w=r??d.length;do{const k=g===0?f[0]??l.initialPageParam:ep(l,m);if(g>0&&k==null)break;m=await D(m,k),g++}while(g<w)}return m};a.options.persister?a.fetchFn=()=>{var O,N;return(N=(O=a.options).persister)==null?void 0:N.call(O,p,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},n)}:a.fetchFn=p}}}function ep(r,{pages:a,pageParams:n}){const l=a.length-1;return a.length>0?r.getNextPageParam(a[l],a,n[l],n):void 0}function D_(r,{pages:a,pageParams:n}){var l;return a.length>0?(l=r.getPreviousPageParam)==null?void 0:l.call(r,a[0],a,n[0],n):void 0}var ei,Ea,Tt,Nn,Ca,Ds,zp,M_=(zp=class extends oy{constructor(a){super();ue(this,Ca);ue(this,ei);ue(this,Ea);ue(this,Tt);ue(this,Nn);ae(this,ei,a.client),this.mutationId=a.mutationId,ae(this,Tt,a.mutationCache),ae(this,Ea,[]),this.state=a.state||dy(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){E(this,Ea).includes(a)||(E(this,Ea).push(a),this.clearGcTimeout(),E(this,Tt).notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){ae(this,Ea,E(this,Ea).filter(n=>n!==a)),this.scheduleGc(),E(this,Tt).notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){E(this,Ea).length||(this.state.status==="pending"?this.scheduleGc():E(this,Tt).remove(this))}continue(){var a;return((a=E(this,Nn))==null?void 0:a.continue())??this.execute(this.state.variables)}async execute(a){var f,m,g,p,b,v,S,_,A,O,N,U,D,w,k,q,$,P,X,ee;const n=()=>{Se(this,Ca,Ds).call(this,{type:"continue"})},l={client:E(this,ei),meta:this.options.meta,mutationKey:this.options.mutationKey};ae(this,Nn,iy({fn:()=>this.options.mutationFn?this.options.mutationFn(a,l):Promise.reject(new Error("No mutationFn found")),onFail:(se,fe)=>{Se(this,Ca,Ds).call(this,{type:"failed",failureCount:se,error:fe})},onPause:()=>{Se(this,Ca,Ds).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,Tt).canRun(this)}));const o=this.state.status==="pending",d=!E(this,Nn).canStart();try{if(o)n();else{Se(this,Ca,Ds).call(this,{type:"pending",variables:a,isPaused:d}),await((m=(f=E(this,Tt).config).onMutate)==null?void 0:m.call(f,a,this,l));const fe=await((p=(g=this.options).onMutate)==null?void 0:p.call(g,a,l));fe!==this.state.context&&Se(this,Ca,Ds).call(this,{type:"pending",context:fe,variables:a,isPaused:d})}const se=await E(this,Nn).start();return await((v=(b=E(this,Tt).config).onSuccess)==null?void 0:v.call(b,se,a,this.state.context,this,l)),await((_=(S=this.options).onSuccess)==null?void 0:_.call(S,se,a,this.state.context,l)),await((O=(A=E(this,Tt).config).onSettled)==null?void 0:O.call(A,se,null,this.state.variables,this.state.context,this,l)),await((U=(N=this.options).onSettled)==null?void 0:U.call(N,se,null,a,this.state.context,l)),Se(this,Ca,Ds).call(this,{type:"success",data:se}),se}catch(se){try{throw await((w=(D=E(this,Tt).config).onError)==null?void 0:w.call(D,se,a,this.state.context,this,l)),await((q=(k=this.options).onError)==null?void 0:q.call(k,se,a,this.state.context,l)),await((P=($=E(this,Tt).config).onSettled)==null?void 0:P.call($,void 0,se,this.state.variables,this.state.context,this,l)),await((ee=(X=this.options).onSettled)==null?void 0:ee.call(X,void 0,se,a,this.state.context,l)),se}finally{Se(this,Ca,Ds).call(this,{type:"error",error:se})}}finally{E(this,Tt).runNext(this)}}},ei=new WeakMap,Ea=new WeakMap,Tt=new WeakMap,Nn=new WeakMap,Ca=new WeakSet,Ds=function(a){const n=l=>{switch(a.type){case"failed":return{...l,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...l,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:a.error,failureCount:l.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ct.batch(()=>{E(this,Ea).forEach(l=>{l.onMutationUpdate(a)}),E(this,Tt).notify({mutation:this,type:"updated",action:a})})},zp);function dy(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wa,va,ti,Lp,U_=(Lp=class extends Br{constructor(a={}){super();ue(this,Wa);ue(this,va);ue(this,ti);this.config=a,ae(this,Wa,new Set),ae(this,va,new Map),ae(this,ti,0)}build(a,n,l){const o=new M_({client:a,mutationCache:this,mutationId:++jo(this,ti)._,options:a.defaultMutationOptions(n),state:l});return this.add(o),o}add(a){E(this,Wa).add(a);const n=No(a);if(typeof n=="string"){const l=E(this,va).get(n);l?l.push(a):E(this,va).set(n,[a])}this.notify({type:"added",mutation:a})}remove(a){if(E(this,Wa).delete(a)){const n=No(a);if(typeof n=="string"){const l=E(this,va).get(n);if(l)if(l.length>1){const o=l.indexOf(a);o!==-1&&l.splice(o,1)}else l[0]===a&&E(this,va).delete(n)}}this.notify({type:"removed",mutation:a})}canRun(a){const n=No(a);if(typeof n=="string"){const l=E(this,va).get(n),o=l==null?void 0:l.find(d=>d.state.status==="pending");return!o||o===a}else return!0}runNext(a){var l;const n=No(a);if(typeof n=="string"){const o=(l=E(this,va).get(n))==null?void 0:l.find(d=>d!==a&&d.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ct.batch(()=>{E(this,Wa).forEach(a=>{this.notify({type:"removed",mutation:a})}),E(this,Wa).clear(),E(this,va).clear()})}getAll(){return Array.from(E(this,Wa))}find(a){const n={exact:!0,...a};return this.getAll().find(l=>Qg(n,l))}findAll(a={}){return this.getAll().filter(n=>Qg(a,n))}notify(a){ct.batch(()=>{this.listeners.forEach(n=>{n(a)})})}resumePausedMutations(){const a=this.getAll().filter(n=>n.state.isPaused);return ct.batch(()=>Promise.all(a.map(n=>n.continue().catch(Et))))}},Wa=new WeakMap,va=new WeakMap,ti=new WeakMap,Lp);function No(r){var a;return(a=r.options.scope)==null?void 0:a.id}var es,Hs,Lt,ts,ss,qo,Vd,qp,z_=(qp=class extends Br{constructor(n,l){super();ue(this,ss);ue(this,es);ue(this,Hs);ue(this,Lt);ue(this,ts);ae(this,es,n),this.setOptions(l),this.bindMethods(),Se(this,ss,qo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var o;const l=this.options;this.options=E(this,es).defaultMutationOptions(n),Ho(this.options,l)||E(this,es).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,Lt),observer:this}),l!=null&&l.mutationKey&&this.options.mutationKey&&En(l.mutationKey)!==En(this.options.mutationKey)?this.reset():((o=E(this,Lt))==null?void 0:o.state.status)==="pending"&&E(this,Lt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=E(this,Lt))==null||n.removeObserver(this)}onMutationUpdate(n){Se(this,ss,qo).call(this),Se(this,ss,Vd).call(this,n)}getCurrentResult(){return E(this,Hs)}reset(){var n;(n=E(this,Lt))==null||n.removeObserver(this),ae(this,Lt,void 0),Se(this,ss,qo).call(this),Se(this,ss,Vd).call(this)}mutate(n,l){var o;return ae(this,ts,l),(o=E(this,Lt))==null||o.removeObserver(this),ae(this,Lt,E(this,es).getMutationCache().build(E(this,es),this.options)),E(this,Lt).addObserver(this),E(this,Lt).execute(n)}},es=new WeakMap,Hs=new WeakMap,Lt=new WeakMap,ts=new WeakMap,ss=new WeakSet,qo=function(){var l;const n=((l=E(this,Lt))==null?void 0:l.state)??dy();ae(this,Hs,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Vd=function(n){ct.batch(()=>{var l,o,d,f,m,g,p,b;if(E(this,ts)&&this.hasListeners()){const v=E(this,Hs).variables,S=E(this,Hs).context,_={client:E(this,es),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((o=(l=E(this,ts)).onSuccess)==null||o.call(l,n.data,v,S,_),(f=(d=E(this,ts)).onSettled)==null||f.call(d,n.data,null,v,S,_)):(n==null?void 0:n.type)==="error"&&((g=(m=E(this,ts)).onError)==null||g.call(m,n.error,v,S,_),(b=(p=E(this,ts)).onSettled)==null||b.call(p,void 0,n.error,v,S,_))}this.listeners.forEach(v=>{v(E(this,Hs))})})},qp),Oa,Bp,L_=(Bp=class extends Br{constructor(a={}){super();ue(this,Oa);this.config=a,ae(this,Oa,new Map)}build(a,n,l){const o=n.queryKey,d=n.queryHash??gh(o,n);let f=this.get(d);return f||(f=new C_({client:a,queryKey:o,queryHash:d,options:a.defaultQueryOptions(n),state:l,defaultOptions:a.getQueryDefaults(o)}),this.add(f)),f}add(a){E(this,Oa).has(a.queryHash)||(E(this,Oa).set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const n=E(this,Oa).get(a.queryHash);n&&(a.destroy(),n===a&&E(this,Oa).delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){ct.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return E(this,Oa).get(a)}getAll(){return[...E(this,Oa).values()]}find(a){const n={exact:!0,...a};return this.getAll().find(l=>Vg(n,l))}findAll(a={}){const n=this.getAll();return Object.keys(a).length>0?n.filter(l=>Vg(a,l)):n}notify(a){ct.batch(()=>{this.listeners.forEach(n=>{n(a)})})}onFocus(){ct.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){ct.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},Oa=new WeakMap,Bp),Fe,$s,Ps,Rr,Dr,Gs,Mr,Ur,Hp,q_=(Hp=class{constructor(r={}){ue(this,Fe);ue(this,$s);ue(this,Ps);ue(this,Rr);ue(this,Dr);ue(this,Gs);ue(this,Mr);ue(this,Ur);ae(this,Fe,r.queryCache||new L_),ae(this,$s,r.mutationCache||new U_),ae(this,Ps,r.defaultOptions||{}),ae(this,Rr,new Map),ae(this,Dr,new Map),ae(this,Gs,0)}mount(){jo(this,Gs)._++,E(this,Gs)===1&&(ae(this,Mr,yh.subscribe(async r=>{r&&(await this.resumePausedMutations(),E(this,Fe).onFocus())})),ae(this,Ur,$o.subscribe(async r=>{r&&(await this.resumePausedMutations(),E(this,Fe).onOnline())})))}unmount(){var r,a;jo(this,Gs)._--,E(this,Gs)===0&&((r=E(this,Mr))==null||r.call(this),ae(this,Mr,void 0),(a=E(this,Ur))==null||a.call(this),ae(this,Ur,void 0))}isFetching(r){return E(this,Fe).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return E(this,$s).findAll({...r,status:"pending"}).length}getQueryData(r){var n;const a=this.defaultQueryOptions({queryKey:r});return(n=E(this,Fe).get(a.queryHash))==null?void 0:n.state.data}ensureQueryData(r){const a=this.defaultQueryOptions(r),n=E(this,Fe).build(this,a),l=n.state.data;return l===void 0?this.fetchQuery(r):(r.revalidateIfStale&&n.isStaleByTime(Ks(a.staleTime,n))&&this.prefetchQuery(a),Promise.resolve(l))}getQueriesData(r){return E(this,Fe).findAll(r).map(({queryKey:a,state:n})=>{const l=n.data;return[a,l]})}setQueryData(r,a,n){const l=this.defaultQueryOptions({queryKey:r}),o=E(this,Fe).get(l.queryHash),d=o==null?void 0:o.state.data,f=v_(a,d);if(f!==void 0)return E(this,Fe).build(this,l).setData(f,{...n,manual:!0})}setQueriesData(r,a,n){return ct.batch(()=>E(this,Fe).findAll(r).map(({queryKey:l})=>[l,this.setQueryData(l,a,n)]))}getQueryState(r){var n;const a=this.defaultQueryOptions({queryKey:r});return(n=E(this,Fe).get(a.queryHash))==null?void 0:n.state}removeQueries(r){const a=E(this,Fe);ct.batch(()=>{a.findAll(r).forEach(n=>{a.remove(n)})})}resetQueries(r,a){const n=E(this,Fe);return ct.batch(()=>(n.findAll(r).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...r},a)))}cancelQueries(r,a={}){const n={revert:!0,...a},l=ct.batch(()=>E(this,Fe).findAll(r).map(o=>o.cancel(n)));return Promise.all(l).then(Et).catch(Et)}invalidateQueries(r,a={}){return ct.batch(()=>(E(this,Fe).findAll(r).forEach(n=>{n.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},a)))}refetchQueries(r,a={}){const n={...a,cancelRefetch:a.cancelRefetch??!0},l=ct.batch(()=>E(this,Fe).findAll(r).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,n);return n.throwOnError||(d=d.catch(Et)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(l).then(Et)}fetchQuery(r){const a=this.defaultQueryOptions(r);a.retry===void 0&&(a.retry=!1);const n=E(this,Fe).build(this,a);return n.isStaleByTime(Ks(a.staleTime,n))?n.fetch(a):Promise.resolve(n.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Et).catch(Et)}fetchInfiniteQuery(r){return r.behavior=Wg(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Et).catch(Et)}ensureInfiniteQueryData(r){return r.behavior=Wg(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return $o.isOnline()?E(this,$s).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,Fe)}getMutationCache(){return E(this,$s)}getDefaultOptions(){return E(this,Ps)}setDefaultOptions(r){ae(this,Ps,r)}setQueryDefaults(r,a){E(this,Rr).set(En(r),{queryKey:r,defaultOptions:a})}getQueryDefaults(r){const a=[...E(this,Rr).values()],n={};return a.forEach(l=>{Il(r,l.queryKey)&&Object.assign(n,l.defaultOptions)}),n}setMutationDefaults(r,a){E(this,Dr).set(En(r),{mutationKey:r,defaultOptions:a})}getMutationDefaults(r){const a=[...E(this,Dr).values()],n={};return a.forEach(l=>{Il(r,l.mutationKey)&&Object.assign(n,l.defaultOptions)}),n}defaultQueryOptions(r){if(r._defaulted)return r;const a={...E(this,Ps).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return a.queryHash||(a.queryHash=gh(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===ph&&(a.enabled=!1),a}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...E(this,Ps).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){E(this,Fe).clear(),E(this,$s).clear()}},Fe=new WeakMap,$s=new WeakMap,Ps=new WeakMap,Rr=new WeakMap,Dr=new WeakMap,Gs=new WeakMap,Mr=new WeakMap,Ur=new WeakMap,Hp),hy=j.createContext(void 0),Jo=r=>{const a=j.useContext(hy);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},B_=({client:r,children:a})=>(j.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),u.jsx(hy.Provider,{value:r,children:a})),fy=j.createContext(!1),H_=()=>j.useContext(fy);fy.Provider;function $_(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var P_=j.createContext($_()),G_=()=>j.useContext(P_),K_=(r,a)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(a.isReset()||(r.retryOnMount=!1))},V_=r=>{j.useEffect(()=>{r.clearReset()},[r])},Q_=({result:r,errorResetBoundary:a,throwOnError:n,query:l,suspense:o})=>r.isError&&!a.isReset()&&!r.isFetching&&l&&(o&&r.data===void 0||ry(n,[r.error,l])),I_=r=>{if(r.suspense){const n=o=>o==="static"?o:Math.max(o??1e3,1e3),l=r.staleTime;r.staleTime=typeof l=="function"?(...o)=>n(l(...o)):n(l),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},Y_=(r,a)=>r.isLoading&&r.isFetching&&!a,X_=(r,a)=>(r==null?void 0:r.suspense)&&a.isPending,tp=(r,a,n)=>a.fetchOptimistic(r).catch(()=>{n.clearReset()});function J_(r,a,n){var v,S,_,A,O;const l=H_(),o=G_(),d=Jo(),f=d.defaultQueryOptions(r);(S=(v=d.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||S.call(v,f),f._optimisticResults=l?"isRestoring":"optimistic",I_(f),K_(f,o),V_(o);const m=!d.getQueryCache().get(f.queryHash),[g]=j.useState(()=>new a(d,f)),p=g.getOptimisticResult(f),b=!l&&r.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(N=>{const U=b?g.subscribe(ct.batchCalls(N)):Et;return g.updateResult(),U},[g,b]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),j.useEffect(()=>{g.setOptions(f)},[f,g]),X_(f,p))throw tp(f,g,o);if(Q_({result:p,errorResetBoundary:o,throwOnError:f.throwOnError,query:d.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw p.error;if((A=(_=d.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||A.call(_,f,p),f.experimental_prefetchInRender&&!Tn&&Y_(p,l)){const N=m?tp(f,g,o):(O=d.getQueryCache().get(f.queryHash))==null?void 0:O.promise;N==null||N.catch(Et).finally(()=>{g.updateResult()})}return f.notifyOnChangeProps?p:g.trackResult(p)}function Z_(r,a){return J_(r,O_)}function my(r,a){const n=Jo(),[l]=j.useState(()=>new z_(n,r));j.useEffect(()=>{l.setOptions(r)},[l,r]);const o=j.useSyncExternalStore(j.useCallback(f=>l.subscribe(ct.batchCalls(f)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d=j.useCallback((f,m)=>{l.mutate(f,m).catch(Et)},[l]);if(o.error&&ry(l.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}var F_=function(){return null};const gy=j.createContext(void 0),W_=({children:r})=>{const[a]=j.useState("main"),[n,l]=j.useState(()=>[]),[o,d]=j.useState(()=>[]),[f,m]=j.useState(()=>[]),[g,p]=j.useState(()=>[]),[b,v]=j.useState(()=>[]),[S,_]=j.useState(()=>[{id:"cash",name:"Tin mt",balance:{main:0},isDefault:!0},{id:"bank",name:"Ti khon ngn hng",balance:{main:0}}]),[A,O]=j.useState(()=>[]),[N,U]=j.useState(()=>[]),D=j.useCallback(X=>{l(ee=>{if(X.id)return ee.map(J=>J.id===X.id?{...J,...X}:J);const se=`PART-${Date.now()}-${Math.random().toString(16).slice(2)}`;return[{id:se,name:X.name||"Tn ph tng",sku:X.sku||se,stock:X.stock||{[a]:0},retailPrice:X.retailPrice||{[a]:0},wholesalePrice:X.wholesalePrice||{[a]:0},category:X.category,description:X.description,warrantyPeriod:X.warrantyPeriod,created_at:new Date().toISOString()},...ee]})},[a]),w=j.useCallback(X=>{d(ee=>X.id?ee.map(J=>J.id===X.id?{...J,...X}:J):[{id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:X.name||"Khch hng",phone:X.phone,created_at:new Date().toISOString()},...ee])},[]),k=j.useCallback(X=>{p(ee=>ee.find(fe=>fe.id===X.id)?ee.map(fe=>fe.id===X.id?X:fe):[X,...ee])},[]),q=j.useCallback(()=>v([]),[]),$=j.useCallback(X=>{if(!X.items.length)return;const ee=X.items.reduce((G,Z)=>G+Z.sellingPrice*Z.quantity,0),se=X.items.reduce((G,Z)=>G+(Z.discount||0),0),fe=ee-se-X.discount,J=`SALE-${Date.now()}`,re={id:J,date:new Date().toISOString(),items:X.items,subtotal:ee,discount:X.discount+se,total:fe,customer:X.customer,paymentMethod:X.paymentMethod,userId:"local-user",userName:"Local User",branchId:a,cashTransactionId:void 0};m(G=>[re,...G]),l(G=>G.map(Z=>{const H=X.items.filter(oe=>oe.partId===Z.id).reduce((oe,de)=>oe+de.quantity,0);return H?{...Z,stock:{...Z.stock,[a]:(Z.stock[a]||0)-H}}:Z}));const ze={id:`CT-${Date.now()}`,type:"income",date:new Date().toISOString(),amount:fe,notes:X.note||"Thu tin bn hng",paymentSourceId:X.paymentMethod,branchId:a,category:"sale_income",saleId:J};O(G=>[ze,...G]),_(G=>G.map(Z=>Z.id===X.paymentMethod?{...Z,balance:{...Z.balance,[a]:(Z.balance[a]||0)+fe}}:Z)),q()},[q,a]),P=j.useCallback(X=>{const se={id:`INV-${Date.now()}-${Math.random().toString(16).slice(2)}`,...X};U(fe=>[se,...fe])},[]);return u.jsx(gy.Provider,{value:{parts:n,customers:o,sales:f,workOrders:g,cartItems:b,paymentSources:S,cashTransactions:A,inventoryTransactions:N,currentBranchId:a,setParts:l,upsertPart:D,setCustomers:d,upsertCustomer:w,setWorkOrders:p,upsertWorkOrder:k,setCartItems:v,clearCart:q,finalizeSale:$,setPaymentSources:_,setCashTransactions:O,recordInventoryTransaction:P},children:r})},On=()=>{const r=j.useContext(gy);if(!r)throw new Error("useAppContext phi dng bn trong AppProvider");return r},py=j.createContext(void 0),eS=({children:r})=>{const[a,n]=j.useState(()=>{const o=localStorage.getItem("theme");return o==="light"||o==="dark"?o:"light"});j.useEffect(()=>{localStorage.setItem("theme",a),a==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a]);const l=()=>{n(o=>o==="light"?"dark":"light")};return u.jsx(py.Provider,{value:{theme:a,toggleTheme:l},children:r})},tS=()=>{const r=j.useContext(py);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r},pe=r=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r),wa=(r,a=!0)=>{const n=typeof r=="string"?new Date(r):r;if(Number.isNaN(n.getTime()))return"--";const l=String(n.getDate()).padStart(2,"0"),o=String(n.getMonth()+1).padStart(2,"0"),d=n.getFullYear();if(a)return`${l}/${o}/${d}`;const f=String(n.getHours()).padStart(2,"0"),m=String(n.getMinutes()).padStart(2,"0");return`${l}/${o}/${d} ${f}:${m}`},aS=r=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c.51 0 .962-.343 1.087-.835l1.838-5.512A1.875 1.875 0 0018.25 6H5.25L5.038 4.287A1.125 1.125 0 003.912 3H2.25zM7.5 21a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm10.875-4.5a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z"})}),sS=r=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0z"})}),nS=r=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),yy=r=>u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});function rS(r){const a=document.getElementById(r);if(!a)return;const n=window.open("","_blank","width=800,height=600");n&&(n.document.write(`<!doctype html><html><head><title>Print</title>
  <style>
    body{font-family: Arial, Helvetica, sans-serif;}
    @media print{ .no-print{ display:none } }
  </style>
  </head><body>${a.outerHTML}</body></html>`),n.document.close(),n.focus(),n.print(),n.close())}const lS=({isOpen:r,onClose:a,sales:n,currentBranchId:l})=>{const[o,d]=j.useState("today"),[f,m]=j.useState(""),[g,p]=j.useState("all"),[b,v]=j.useState("newest"),[S,_]=j.useState(wa(new Date,!0)),[A,O]=j.useState(wa(new Date,!0)),N=j.useMemo(()=>{let D=n.filter($=>$.branchId===l);const w=new Date,k=new Date(w.getFullYear(),w.getMonth(),w.getDate()),q=new Date(w.getFullYear(),w.getMonth(),w.getDate(),23,59,59);switch(o){case"today":D=D.filter(re=>{const ve=new Date(re.date);return ve>=k&&ve<=q});break;case"yesterday":const $=new Date(w);$.setDate($.getDate()-1);const P=new Date($.getFullYear(),$.getMonth(),$.getDate()),X=new Date($.getFullYear(),$.getMonth(),$.getDate(),23,59,59);D=D.filter(re=>{const ve=new Date(re.date);return ve>=P&&ve<=X});break;case"7days":const ee=new Date(w);ee.setDate(ee.getDate()-7),D=D.filter(re=>new Date(re.date)>=ee);break;case"30days":const se=new Date(w);se.setDate(se.getDate()-30),D=D.filter(re=>new Date(re.date)>=se);break;case"custom":const fe=new Date(S),J=new Date(A+"T23:59:59");D=D.filter(re=>{const ve=new Date(re.date);return ve>=fe&&ve<=J});break}return f&&(D=D.filter($=>$.id.toLowerCase().includes(f.toLowerCase())||$.customer.name.toLowerCase().includes(f.toLowerCase()))),D.sort(($,P)=>{switch(b){case"newest":return new Date(P.date).getTime()-new Date($.date).getTime();case"oldest":return new Date($.date).getTime()-new Date(P.date).getTime();default:return 0}}),D},[n,l,o,f,g,b,S,A]),U=j.useMemo(()=>{const D=N.reduce(($,P)=>$+P.total,0),w=N.reduce(($,P)=>$+(P.total-P.discount),0),k=D>0?w/D*100:0,q=N.length;return{revenue:D,profit:w,profitMargin:k,orderCount:q}},[N]);return r?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Lch s ha n"}),u.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),u.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{key:"today",label:"Hm nay"},{key:"yesterday",label:"Hm qua"},{key:"7days",label:"7 ngy"},{key:"30days",label:"30 ngy"},{key:"custom",label:"Ty chnh"}].map(D=>u.jsx("button",{onClick:()=>d(D.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o===D.key?"bg-blue-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"}`,children:D.label},D.key))}),o==="custom"&&u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx("input",{type:"date",value:S,onChange:D=>_(D.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),u.jsx("span",{className:"text-slate-500",children:"n"}),u.jsx("input",{type:"date",value:A,onChange:D=>O(D.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{className:"flex flex-wrap gap-4",children:[u.jsx("div",{className:"flex-1 min-w-64",children:u.jsx("input",{type:"text",placeholder:"Tm m ha n hoc tn khch hng",value:f,onChange:D=>m(D.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),u.jsxs("select",{value:g,onChange:D=>p(D.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[u.jsx("option",{value:"all",children:"Tt c"}),u.jsx("option",{value:"completed",children:"Hon thnh"}),u.jsx("option",{value:"cancelled",children:" hy"})]}),u.jsxs("select",{value:b,onChange:D=>v(D.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[u.jsx("option",{value:"newest",children:"Mi nht"}),u.jsx("option",{value:"oldest",children:"C nht"})]})]})]}),u.jsxs("div",{className:"p-6 grid grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[u.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium",children:"Doanh thu"}),u.jsx("div",{className:"text-blue-900 dark:text-blue-100 text-2xl font-bold",children:pe(U.revenue)})]}),u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[u.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium",children:"Li nhun gp"}),u.jsx("div",{className:"text-green-900 dark:text-green-100 text-2xl font-bold",children:pe(U.profit)})]}),u.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[u.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-sm font-medium",children:"GM%"}),u.jsxs("div",{className:"text-orange-900 dark:text-orange-100 text-2xl font-bold",children:[U.profitMargin.toFixed(1),"%"]})]}),u.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[u.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium",children:"S ha n"}),u.jsx("div",{className:"text-purple-900 dark:text-purple-100 text-2xl font-bold",children:U.orderCount})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:N.length===0?u.jsx("div",{className:"text-center py-12 text-slate-400",children:"Khng c ha n no ph hp vi b lc hin ti."}):u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"M"}),u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"THI GIAN"}),u.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"TNG"}),u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"SL HNG"}),u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"KHCH HNG"}),u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"THANH TON"}),u.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"THAO TC"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:N.map(D=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:D.id})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:wa(new Date(D.date),!1)}),u.jsx("div",{className:"text-xs text-slate-500",children:new Date(D.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[u.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:pe(D.total)}),D.discount>0&&u.jsxs("div",{className:"text-xs text-slate-500",children:["Gim: ",pe(D.discount)]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:D.items.reduce((w,k)=>w+k.quantity,0)})}),u.jsxs("td",{className:"px-6 py-4",children:[u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:D.customer.name}),D.customer.phone&&u.jsx("div",{className:"text-xs text-slate-500",children:D.customer.phone})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D.paymentMethod==="cash"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"}`,children:D.paymentMethod==="cash"?"Tin mt":"Chuyn khon"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:u.jsx("button",{onClick:()=>{alert("Chc nng in ha n s c pht trin")},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:"In li"})})]},D.id))})]})}),u.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[u.jsx("div",{className:"text-sm text-slate-500",children:"Trang 1 / 1"}),u.jsxs("div",{className:"text-sm text-slate-500",children:["Hin th ",N.length," ha n"]})]})]})}):null},iS=()=>{const{parts:r,customers:a,sales:n,cartItems:l,setCartItems:o,clearCart:d,currentBranchId:f,finalizeSale:m}=On(),[g,p]=j.useState(""),[b,v]=j.useState(""),[S,_]=j.useState(null),[A,O]=j.useState(!1),[N,U]=j.useState(0),[D,w]=j.useState(!1),[k,q]=j.useState(""),[$,P]=j.useState(""),[X,ee]=j.useState(""),se=j.useCallback(H=>{var C,Q;const oe=((C=H.retailPrice)==null?void 0:C[f])??0;if(l.find(W=>W.partId===H.id))o(W=>W.map(te=>te.partId===H.id?{...te,quantity:te.quantity+1}:te));else{const W={partId:H.id,partName:H.name,sku:H.sku,quantity:1,sellingPrice:oe,stockSnapshot:((Q=H.stock)==null?void 0:Q[f])??0,discount:0};o(te=>[...te,W])}},[l,o,f]),fe=j.useCallback(H=>{o(oe=>oe.filter(de=>de.partId!==H))},[o]),J=j.useCallback((H,oe)=>{if(oe<=0){fe(H);return}o(de=>de.map(C=>C.partId===H?{...C,quantity:oe}:C))},[o,fe]),re=j.useMemo(()=>l.reduce((H,oe)=>H+oe.sellingPrice*oe.quantity,0),[l]),ve=j.useMemo(()=>Math.max(0,re-N),[re,N]),ze=j.useMemo(()=>g?r.filter(H=>H.name.toLowerCase().includes(g.toLowerCase())||H.sku.toLowerCase().includes(g.toLowerCase())):r,[r,g]),G=j.useMemo(()=>b?a.filter(H=>{var oe;return H.name.toLowerCase().includes(b.toLowerCase())||((oe=H.phone)==null?void 0:oe.includes(b))||!1}).slice(0,10):a.slice(0,10),[a,b]),Z=async()=>{if(l.length===0){alert("Vui lng thm sn phm vo gi hng");return}try{const H={items:l,customer:{id:S==null?void 0:S.id,name:(S==null?void 0:S.name)||$||"Khch l",phone:(S==null?void 0:S.phone)||X},discount:N,paymentMethod:"cash",note:""};m(H),q(`INV-${Date.now()}`),P(H.customer.name),ee(H.customer.phone||""),_(null),v(""),U(0),setTimeout(()=>{rS("last-receipt")},100)}catch(H){console.error("Error finalizing sale:",H),alert("C li xy ra khi hon tt giao dch")}};return j.useEffect(()=>{const H=oe=>{oe.target.closest(".customer-dropdown-container")||O(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]),u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:[u.jsxs("div",{className:"flex h-screen",children:[u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx("input",{type:"text",placeholder:"Tm theo tn sn phm hoc SKU...",value:g,onChange:H=>p(H.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500"})}),u.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg whitespace-nowrap transition-colors",children:" Lch s bn hng"})]})}),u.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:ze.length===0?u.jsxs("div",{className:"text-center text-slate-400 mt-20",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("div",{className:"text-xl font-medium mb-2",children:g?"Khng tm thy sn phm no":"Cha c sn phm"}),u.jsx("div",{className:"text-sm",children:g?"Hy th mt t kha tm kim khc":"Vui lng thm sn phm vo h thng"})]}):u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:ze.map(H=>{var Q,W;const oe=((Q=H.retailPrice)==null?void 0:Q[f])??0,de=((W=H.stock)==null?void 0:W[f])??0,C=de<=0;return u.jsx("button",{onClick:()=>!C&&se(H),disabled:C,className:`aspect-square p-4 border rounded-xl transition-all duration-200 ${C?"border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 opacity-50 cursor-not-allowed":"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:border-blue-500 hover:shadow-lg hover:-translate-y-1"}`,children:u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsx("div",{className:"flex-1 flex items-center justify-center mb-3",children:u.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-2xl",children:""})})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-100 line-clamp-2 mb-1",title:H.name,children:H.name}),u.jsxs("div",{className:"text-xs text-slate-500 mb-2",children:["SKU: ",H.sku]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm font-semibold text-blue-600",children:pe(oe)}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":de<=5?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:C?"Ht":de})]})]})]})},H.id)})})})]}),u.jsxs("div",{className:"w-96 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[u.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"customer-dropdown-container",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Chn khch hng"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Tm theo tn hoc s in thoi...",value:b,onChange:H=>v(H.target.value),onFocus:()=>O(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500"}),A&&G.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 max-h-40 overflow-y-auto bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg shadow-lg",children:G.map(H=>u.jsxs("button",{onClick:()=>{_(H),v(H.name),O(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-600 border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:[u.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:H.name}),H.phone&&u.jsx("div",{className:"text-sm text-slate-500",children:H.phone})]},H.id))})]}),S&&u.jsxs("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[u.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100",children:S.name}),S.phone&&u.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:S.phone}),u.jsx("button",{onClick:()=>{_(null),v("")},className:"text-xs text-blue-600 hover:text-blue-800 mt-1",children:"Xa khch hng"})]})]})}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Gi hng"}),u.jsxs("span",{className:"text-sm text-slate-500",children:["(",l.length," sn phm)"]})]}),l.length===0?u.jsxs("div",{className:"text-center text-slate-400 py-12",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("div",{className:"text-sm",children:"Gi hng trng"}),u.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Chn sn phm  thm vo gi"})]}):u.jsx("div",{className:"space-y-3",children:l.map(H=>u.jsxs("div",{className:"flex items-center gap-3 p-3 border border-slate-200 dark:border-slate-600 rounded-lg",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-100 line-clamp-1",children:H.partName}),u.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",H.sku]}),u.jsx("div",{className:"text-sm text-blue-600 font-semibold",children:pe(H.sellingPrice)})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>J(H.partId,Math.max(1,H.quantity-1)),className:"w-8 h-8 flex items-center justify-center bg-slate-100 dark:bg-slate-600 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-500",children:"-"}),u.jsx("span",{className:"w-8 text-center font-medium text-sm",children:H.quantity}),u.jsx("button",{onClick:()=>J(H.partId,H.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-slate-100 dark:bg-slate-600 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-500",children:"+"}),u.jsx("button",{onClick:()=>fe(H.partId),className:"w-8 h-8 flex items-center justify-center bg-red-100 dark:bg-red-900/20 rounded-full text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 ml-1",children:""})]})]},H.partId))})]}),l.length>0&&u.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[u.jsxs("div",{className:"space-y-3 mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tm tnh:"}),u.jsx("span",{className:"font-medium",children:pe(re)})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-nowrap",children:"Gim gi:"}),u.jsx("input",{type:"number",value:N,onChange:H=>U(Number(H.target.value)||0),className:"flex-1 px-2 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700",placeholder:"0"}),u.jsx("span",{className:"text-sm font-medium",children:pe(N)})]}),u.jsxs("div",{className:"flex justify-between font-semibold text-lg pt-2 border-t border-slate-300 dark:border-slate-600",children:[u.jsx("span",{children:"Tng cng:"}),u.jsx("span",{className:"text-blue-600",children:pe(Math.max(0,ve-N))})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 bg-slate-500 hover:bg-slate-600 text-white font-medium rounded-lg transition-colors",children:"Xa ht"}),u.jsx("button",{onClick:Z,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-lg transition-colors",children:"XUT BN"})]})]})]})]}),u.jsx(lS,{isOpen:D,onClose:()=>w(!1),sales:n,currentBranchId:f}),k&&u.jsx("div",{id:"last-receipt",className:"hidden",children:u.jsxs("div",{className:"text-xs p-4 max-w-md mx-auto",children:[u.jsx("div",{className:"font-semibold text-center text-sm mb-3",children:"HA N BN L"}),u.jsxs("div",{children:["M: #",k]}),u.jsxs("div",{children:["Ngy: ",wa(new Date,!1)]}),u.jsxs("div",{children:["Khch: ",$," ",X&&`(${X})`]}),u.jsxs("table",{className:"w-full mt-3 border-t text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-left border-b",children:[u.jsx("th",{className:"py-1",children:"Mt hng"}),u.jsx("th",{className:"py-1 text-center",children:"SL"}),u.jsx("th",{className:"py-1 text-right",children:"Gi"}),u.jsx("th",{className:"py-1 text-right",children:"T.Tin"})]})}),u.jsx("tbody",{children:l.map(H=>u.jsxs("tr",{children:[u.jsx("td",{className:"py-0.5 pr-2",children:H.partName}),u.jsx("td",{className:"py-0.5 text-center",children:H.quantity}),u.jsx("td",{className:"py-0.5 text-right",children:pe(H.sellingPrice)}),u.jsx("td",{className:"py-0.5 text-right",children:pe(H.sellingPrice*H.quantity)})]},H.partId))})]}),u.jsxs("div",{className:"mt-3 space-y-1 border-t pt-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Tm tnh:"}),u.jsx("span",{children:pe(re)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Gim gi:"}),u.jsx("span",{children:pe(N)})]}),u.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[u.jsx("span",{children:"Tng cng:"}),u.jsx("span",{children:pe(Math.max(0,ve-N))})]})]}),u.jsxs("div",{className:"mt-4 text-center text-xs",children:[u.jsx("div",{children:"Cm n qu khch  mua hng!"}),u.jsx("div",{children:"Hn gp li!"})]})]})})]})},oS=({isOpen:r,onClose:a,onSave:n})=>{const[l,o]=j.useState(""),[d,f]=j.useState(""),[m,g]=j.useState(""),[p,b]=j.useState("1"),[v,S]=j.useState("0"),[_,A]=j.useState("0"),[O,N]=j.useState("1"),[U,D]=j.useState("thng"),w=()=>{if(!l.trim()){alert("Vui lng nhp tn sn phm");return}n({name:l.trim(),description:d.trim(),category:m||"Cha phn loi",quantity:parseInt(p)||1,importPrice:parseFloat(v)||0,retailPrice:parseFloat(_)||0,warranty:parseInt(O)||0,warrantyUnit:U}),o(""),f(""),g(""),b("1"),S("0"),A("0"),N("1"),D("thng")};return r?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Thm sn phm mi"}),u.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn sn phm ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",value:l,onChange:k=>o(k.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Nhp tn sn phm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t"}),u.jsx("textarea",{value:d,onChange:k=>f(k.target.value),rows:3,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"M t sn phm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Danh mc sn phm"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{value:m,onChange:k=>g(k.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[u.jsx("option",{value:"",children:"-- Chn hoc to mi --"}),u.jsx("option",{value:"Ph tng",children:"Ph tng"}),u.jsx("option",{value:"Vng bi",children:"Vng bi"}),u.jsx("option",{value:"Nht",children:"Nht"}),u.jsx("option",{value:"n",children:"n"}),u.jsx("option",{value:"Lp xe",children:"Lp xe"})]}),u.jsx("button",{className:"w-10 h-10 flex items-center justify-center bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600",children:u.jsx("span",{className:"text-xl text-slate-600 dark:text-slate-300",children:"+"})})]})]}),u.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Thng tin nhp kho:"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"S lng:"}),u.jsx("input",{type:"number",value:p,onChange:k=>b(k.target.value),min:"1",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi nhp:"}),u.jsx("input",{type:"number",value:v,onChange:k=>S(k.target.value),min:"0",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi bn l:"}),u.jsx("input",{type:"number",value:_,onChange:k=>A(k.target.value),min:"0",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bo hnh"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"number",value:O,onChange:k=>N(k.target.value),min:"0",className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),u.jsxs("select",{value:U,onChange:k=>D(k.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[u.jsx("option",{value:"thng",children:"thng"}),u.jsx("option",{value:"nm",children:"nm"}),u.jsx("option",{value:"ngy",children:"ngy"})]})]})]})]})}),u.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700",children:u.jsx("button",{onClick:w,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-medium",children:"Lu v Thm vo gi hng"})})]})}):null},uS=({isOpen:r,onClose:a,parts:n,currentBranchId:l,onSave:o})=>{const[d,f]=j.useState(""),[m,g]=j.useState(""),[p,b]=j.useState(!1),[v,S]=j.useState([]),_=j.useMemo(()=>{const k=d.toLowerCase();return d?n.filter(q=>q.name.toLowerCase().includes(k)||q.sku.toLowerCase().includes(k)):n},[n,d]),A=k=>{const q=v.find($=>$.partId===k.id);S(q?$=>$.map(P=>P.partId===k.id?{...P,quantity:P.quantity+1}:P):[...v,{partId:k.id,partName:k.name,sku:k.sku,quantity:1,importPrice:0,sellingPrice:k.retailPrice[l]||0}]),f("")},O=(k,q,$)=>{S(P=>P.map(X=>X.partId===k?{...X,[q]:$}:X))},N=k=>{S(q=>q.filter($=>$.partId!==k))},U=j.useMemo(()=>v.reduce((k,q)=>k+q.importPrice*q.quantity,0),[v]),D=()=>{if(v.length===0){alert("Vui lng chn sn phm nhp kho");return}o(v,m,U,""),S([]),g(""),f("")},w=k=>{const q={partId:`temp-${Date.now()}`,partName:k.name,sku:`SKU-${Date.now()}`,quantity:k.quantity,importPrice:k.importPrice,sellingPrice:k.retailPrice};S([...v,q]),b(!1)};return r?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex",children:[u.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50 dark:bg-slate-900",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""}),u.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Chn sn phm nhp kho"})]}),u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:[u.jsx("span",{className:"text-xl",children:"+"}),u.jsx("span",{children:"Thm sn phm mi"})]})]}),u.jsx("div",{className:"p-6 bg-white dark:bg-slate-800",children:u.jsx("input",{type:"text",placeholder:"Tm theo tn sn phm, SKU...",value:d,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:_.length===0?u.jsx("div",{className:"text-center text-slate-500 py-8",children:"Khng tm thy sn phm no"}):u.jsx("div",{className:"space-y-2",children:_.map(k=>u.jsxs("div",{onClick:()=>A(k),className:"p-4 bg-white dark:bg-slate-800 rounded-lg hover:bg-blue-50 dark:hover:bg-slate-700 cursor-pointer border border-slate-200 dark:border-slate-600 transition-colors",children:[u.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:k.name}),u.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:["SKU: ",k.sku]})]},k.id))})})]}),u.jsxs("div",{className:"w-[500px] bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[u.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("label",{className:"block mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nh cung cp (NCC):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Tm nh cung cp",value:m,onChange:k=>g(k.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),u.jsx("button",{className:"w-10 h-10 flex items-center justify-center bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600",children:u.jsx("span",{className:"text-xl text-slate-600 dark:text-slate-300",children:"+"})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:[u.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Gi hng nhp kho:"}),v.length===0?u.jsx("div",{className:"text-center text-slate-500 py-8",children:"Cha c sn phm no"}):v.map(k=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:k.partName}),u.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["SKU: ",k.sku]})]}),u.jsx("button",{onClick:()=>N(k.partId),className:"text-red-500 hover:text-red-700 ml-2",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),u.jsx("div",{className:"grid grid-cols-2 gap-3 mb-2",children:u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-400 block mb-1",children:"S lng:"}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>O(k.partId,"quantity",Math.max(1,k.quantity-1)),className:"w-7 h-7 flex items-center justify-center border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-sm",children:""}),u.jsx("input",{type:"number",value:k.quantity,onChange:q=>O(k.partId,"quantity",Math.max(1,parseInt(q.target.value)||1)),className:"w-14 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),u.jsx("button",{onClick:()=>O(k.partId,"quantity",k.quantity+1),className:"w-7 h-7 flex items-center justify-center border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-sm",children:"+"})]})]})}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-400 block mb-1",children:"Gi nhp:"}),u.jsx("input",{type:"number",value:k.importPrice,onChange:q=>O(k.partId,"importPrice",parseFloat(q.target.value)||0),className:"w-full px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm text-right",placeholder:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-400 block mb-1",children:"Gi bn:"}),u.jsx("input",{type:"number",value:k.sellingPrice,onChange:q=>O(k.partId,"sellingPrice",parseFloat(q.target.value)||0),className:"w-full px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm text-right",placeholder:"0"})]}),u.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-300 dark:border-slate-600",children:[u.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Thnh tin:"}),u.jsx("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:pe(k.importPrice*k.quantity)})]})]})]},k.partId))]}),u.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 space-y-4",children:[u.jsxs("div",{className:"space-y-3 pt-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thanh ton:"}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"paymentType",defaultChecked:!0,className:"text-blue-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Thanh ton mt phn"})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"paymentType",className:"text-blue-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Thanh ton "})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"paymentType",className:"text-blue-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Ghi n"})]})]})]}),u.jsxs("div",{className:"flex gap-4 text-sm",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-slate-600 dark:text-slate-400",children:"S tin thanh ton"}),u.jsx("input",{type:"number",defaultValue:0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 mt-1"})]}),u.jsx("div",{className:"flex-1",children:u.jsxs("label",{className:"text-slate-600 dark:text-slate-400",children:["Cn n: ",pe(U)]})})]}),u.jsx("div",{children:u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"paymentMethod",defaultChecked:!0,className:"text-blue-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Tin mt"})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"paymentMethod",className:"text-blue-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Chuyn khon"})]})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Hch ton:"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[u.jsx("option",{children:"Mua hng/nhp kho"}),u.jsx("option",{children:"Nhp tr hng"}),u.jsx("option",{children:"Khc"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian nhp hng:"}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"timeOption",defaultChecked:!0,className:"text-blue-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Thi gian hin ti"})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"timeOption",className:"text-blue-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Ty chnh"})]})]})]})]}),u.jsxs("div",{className:"flex gap-2 pt-2",children:[u.jsx("button",{onClick:D,className:"flex-1 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 px-4 py-3 rounded-lg font-medium",children:"LU NHP"}),u.jsx("button",{onClick:D,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-medium",children:"NHP KHO"})]})]})]})]})}),u.jsx(oS,{isOpen:p,onClose:()=>b(!1),onSave:w})]}):null},cS=({isOpen:r,onClose:a,transactions:n})=>{const[l,o]=j.useState("7days"),[d,f]=j.useState(wa(new Date,!0)),[m,g]=j.useState(wa(new Date,!0)),[p,b]=j.useState(""),v=j.useMemo(()=>{let _=[...n];const A=new Date;switch(l){case"7days":const O=new Date(A.getTime()-6048e5);_=_.filter(D=>new Date(D.date)>=O);break;case"30days":const N=new Date(A.getTime()-720*60*60*1e3);_=_.filter(D=>new Date(D.date)>=N);break;case"thisMonth":const U=new Date(A.getFullYear(),A.getMonth(),1);_=_.filter(D=>new Date(D.date)>=U);break;case"custom":_=_.filter(D=>{const w=new Date(D.date);return w>=new Date(d)&&w<=new Date(m)});break}if(p){const O=p.toLowerCase();_=_.filter(N=>N.partName.toLowerCase().includes(O)||N.notes&&N.notes.toLowerCase().includes(O))}return _.sort((O,N)=>new Date(N.date).getTime()-new Date(O.date).getTime())},[n,l,d,m,p]),S=j.useMemo(()=>v.reduce((_,A)=>_+A.totalPrice,0),[v]);return r?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Lch s nhp kho"}),u.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),u.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{key:"7days",label:"7 ngy qua"},{key:"30days",label:"30 ngy qua"},{key:"thisMonth",label:"Thng ny"},{key:"custom",label:"Ty chn"}].map(_=>u.jsx("button",{onClick:()=>o(_.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l===_.key?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:_.label},_.key))}),l==="custom"&&u.jsxs("div",{className:"flex gap-4 mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"T ngy"}),u.jsx("input",{type:"date",value:d,onChange:_=>f(_.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n ngy"}),u.jsx("input",{type:"date",value:m,onChange:_=>g(_.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),u.jsx("div",{className:"flex gap-4",children:u.jsx("input",{type:"text",placeholder:"Nh cung cp, SKU, tn ph tng...",value:p,onChange:_=>b(_.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})})]}),u.jsx("div",{className:"px-6 py-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Tng s tin: ",u.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:v.length})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng gi tr"}),u.jsx("div",{className:"text-lg font-bold text-blue-600",children:pe(S)})]})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Ngy"}),u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nh cung cp"}),u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Ni dung"}),u.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"S tin"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:v.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-500",children:"Khng c d liu"})}):v.map(_=>{var A;return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:wa(new Date(_.date),!1)}),u.jsx("div",{className:"text-xs text-slate-500",children:new Date(_.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:_.notes&&_.notes.includes("NCC:")&&((A=_.notes.split("NCC:")[1])==null?void 0:A.trim())||"Cha r"})}),u.jsxs("td",{className:"px-6 py-4",children:[u.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:_.partName}),u.jsxs("div",{className:"text-xs text-slate-500",children:["SL: ",_.quantity]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:u.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:pe(_.totalPrice)})})]},_.id)})})]})}),u.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center",children:u.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",v.length," kt qu"]})})]})}):null},dS=()=>{const{parts:r,upsertPart:a,currentBranchId:n,recordInventoryTransaction:l,inventoryTransactions:o}=On(),[d,f]=j.useState("stock"),[m,g]=j.useState(!1),[p,b]=j.useState(!1),[v,S]=j.useState(""),[_,A]=j.useState("all"),O=j.useMemo(()=>{const w=v.toLowerCase();let k=r.filter(q=>q.name.toLowerCase().includes(w)||q.sku.toLowerCase().includes(w));return _!=="all"&&(k=k.filter(q=>q.category===_)),k},[r,v,_]),N=j.useMemo(()=>r.reduce((w,k)=>{const q=k.stock[n]||0,$=k.retailPrice[n]||0;return w+q*$},0),[r,n]),U=j.useMemo(()=>r.reduce((w,k)=>w+(k.stock[n]||0),0),[r,n]),D=j.useCallback((w,k,q,$)=>{w.forEach(P=>{const X=r.find(ee=>ee.id===P.partId);if(X){const ee=X.stock[n]||0;a({id:P.partId,stock:{...X.stock,[n]:ee+P.quantity},retailPrice:{...X.retailPrice,[n]:P.sellingPrice}}),l({type:"Nhp kho",partId:P.partId,partName:P.partName,quantity:P.quantity,date:new Date().toISOString(),totalPrice:P.importPrice*P.quantity,branchId:n,notes:`NCC: ${k}`})}}),g(!1),alert("Nhp kho thnh cng!")},[r,n,a,l]);return u.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[u.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsx("div",{className:"flex gap-2",children:[{key:"stock",label:" Tn kho",icon:""},{key:"categories",label:" Danh mc sn phm",icon:""},{key:"lookup",label:" Tra cu Ph tng",icon:""},{key:"history",label:" Lch s",icon:""}].map(w=>u.jsx("button",{onClick:()=>f(w.key),className:`px-4 py-2 font-medium transition-colors border-b-2 ${d===w.key?"border-blue-600 text-blue-600":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:w.label},w.key))}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium",children:[u.jsx("span",{className:"text-xl",children:"+"}),u.jsx("span",{children:"To phiu nhp"})]}),u.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium",children:[u.jsx("span",{className:"text-xl",children:""}),u.jsx("span",{children:"Chuyn kho"})]}),u.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg font-medium",children:[u.jsx("span",{className:"text-xl",children:""}),u.jsx("span",{children:"Nhp CSV tn kho"})]})]})]})}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[d==="stock"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc SKU...",value:v,onChange:w=>S(w.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),u.jsxs("select",{value:_,onChange:w=>A(w.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[u.jsx("option",{value:"all",children:"Cn hng"}),u.jsx("option",{value:"lowStock",children:"Sp ht"}),u.jsx("option",{value:"outOfStock",children:"Ht hng"})]}),u.jsx("select",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:u.jsx("option",{children:"Tt c danh mc"})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng SL tn"}),u.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-2xl",children:""})})]}),u.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:U})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Gi tr tn"}),u.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-2xl",children:""})})]}),u.jsx("div",{className:"text-3xl font-bold text-green-600",children:pe(N)})]})]}),u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"STT"}),u.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tn sn phm"}),u.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tn kho"}),u.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Gi bn"}),u.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Gi tr"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:O.length===0?u.jsx("tr",{children:u.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("div",{className:"text-lg",children:"Khng c sn phm no"}),u.jsx("div",{className:"text-sm",children:"Hy th mt b lc khc hoc thm sn phm mi"})]})}):O.map((w,k)=>{const q=w.stock[n]||0,$=w.retailPrice[n]||0,P=q*$;return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-slate-100",children:k+1}),u.jsxs("td",{className:"px-6 py-4",children:[u.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:w.name}),u.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",w.sku]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:u.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${q===0?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":q<10?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:q})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-slate-900 dark:text-slate-100",children:pe($)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:pe(P)})]},w.id)})})]})})})]}),d==="history"&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Lch s giao dch kho"}),u.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Xem chi tit"})]}),u.jsx("div",{className:"text-center text-slate-500 py-8",children:'Click "Xem chi tit"  xem lch s nhp kho'})]}),(d==="categories"||d==="lookup")&&u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:u.jsx("div",{className:"text-center text-slate-500 py-8",children:"Chc nng ang pht trin"})})]}),u.jsx(uS,{isOpen:m,onClose:()=>g(!1),parts:r,currentBranchId:n,onSave:D}),u.jsx(cS,{isOpen:p,onClose:()=>b(!1),transactions:o})]})};var Qd=function(r,a){return Qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])},Qd(r,a)};function by(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");Qd(r,a);function n(){this.constructor=r}r.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}var Po=function(){return Po=Object.assign||function(a){for(var n,l=1,o=arguments.length;l<o;l++){n=arguments[l];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(a[d]=n[d])}return a},Po.apply(this,arguments)};function Hr(r,a){var n={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&a.indexOf(l)<0&&(n[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(r);o<l.length;o++)a.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(r,l[o])&&(n[l[o]]=r[l[o]]);return n}function vy(r,a,n,l){var o=arguments.length,d=o<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,n):l,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(r,a,n,l);else for(var m=r.length-1;m>=0;m--)(f=r[m])&&(d=(o<3?f(d):o>3?f(a,n,d):f(a,n))||d);return o>3&&d&&Object.defineProperty(a,n,d),d}function xy(r,a){return function(n,l){a(n,l,r)}}function wy(r,a,n,l,o,d){function f(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var m=l.kind,g=m==="getter"?"get":m==="setter"?"set":"value",p=!a&&r?l.static?r:r.prototype:null,b=a||(p?Object.getOwnPropertyDescriptor(p,l.name):{}),v,S=!1,_=n.length-1;_>=0;_--){var A={};for(var O in l)A[O]=O==="access"?{}:l[O];for(var O in l.access)A.access[O]=l.access[O];A.addInitializer=function(U){if(S)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f(U||null))};var N=(0,n[_])(m==="accessor"?{get:b.get,set:b.set}:b[g],A);if(m==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(v=f(N.get))&&(b.get=v),(v=f(N.set))&&(b.set=v),(v=f(N.init))&&o.unshift(v)}else(v=f(N))&&(m==="field"?o.unshift(v):b[g]=v)}p&&Object.defineProperty(p,l.name,b),S=!0}function _y(r,a,n){for(var l=arguments.length>2,o=0;o<a.length;o++)n=l?a[o].call(r,n):a[o].call(r);return l?n:void 0}function Sy(r){return typeof r=="symbol"?r:"".concat(r)}function jy(r,a,n){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:n?"".concat(n," ",a):a})}function ky(r,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,a)}function ie(r,a,n,l){function o(d){return d instanceof n?d:new n(function(f){f(d)})}return new(n||(n=Promise))(function(d,f){function m(b){try{p(l.next(b))}catch(v){f(v)}}function g(b){try{p(l.throw(b))}catch(v){f(v)}}function p(b){b.done?d(b.value):o(b.value).then(m,g)}p((l=l.apply(r,a||[])).next())})}function Ny(r,a){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,o,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=m(0),f.throw=m(1),f.return=m(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(p){return function(b){return g([p,b])}}function g(p){if(l)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(l=1,o&&(d=p[0]&2?o.return:p[0]?o.throw||((d=o.return)&&d.call(o),0):o.next)&&!(d=d.call(o,p[1])).done)return d;switch(o=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){n.label=p[1];break}if(p[0]===6&&n.label<d[1]){n.label=d[1],d=p;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(p);break}d[2]&&n.ops.pop(),n.trys.pop();continue}p=a.call(r,n)}catch(b){p=[6,b],o=0}finally{l=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Zo=Object.create?(function(r,a,n,l){l===void 0&&(l=n);var o=Object.getOwnPropertyDescriptor(a,n);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[n]}}),Object.defineProperty(r,l,o)}):(function(r,a,n,l){l===void 0&&(l=n),r[l]=a[n]});function Ty(r,a){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&Zo(a,r,n)}function Go(r){var a=typeof Symbol=="function"&&Symbol.iterator,n=a&&r[a],l=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&l>=r.length&&(r=void 0),{value:r&&r[l++],done:!r}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function vh(r,a){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var l=n.call(r),o,d=[],f;try{for(;(a===void 0||a-- >0)&&!(o=l.next()).done;)d.push(o.value)}catch(m){f={error:m}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(f)throw f.error}}return d}function Ey(){for(var r=[],a=0;a<arguments.length;a++)r=r.concat(vh(arguments[a]));return r}function Cy(){for(var r=0,a=0,n=arguments.length;a<n;a++)r+=arguments[a].length;for(var l=Array(r),o=0,a=0;a<n;a++)for(var d=arguments[a],f=0,m=d.length;f<m;f++,o++)l[o]=d[f];return l}function Oy(r,a,n){if(n||arguments.length===2)for(var l=0,o=a.length,d;l<o;l++)(d||!(l in a))&&(d||(d=Array.prototype.slice.call(a,0,l)),d[l]=a[l]);return r.concat(d||Array.prototype.slice.call(a))}function zr(r){return this instanceof zr?(this.v=r,this):new zr(r)}function Ay(r,a,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=n.apply(r,a||[]),o,d=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),o[Symbol.asyncIterator]=function(){return this},o;function f(_){return function(A){return Promise.resolve(A).then(_,v)}}function m(_,A){l[_]&&(o[_]=function(O){return new Promise(function(N,U){d.push([_,O,N,U])>1||g(_,O)})},A&&(o[_]=A(o[_])))}function g(_,A){try{p(l[_](A))}catch(O){S(d[0][3],O)}}function p(_){_.value instanceof zr?Promise.resolve(_.value.v).then(b,v):S(d[0][2],_)}function b(_){g("next",_)}function v(_){g("throw",_)}function S(_,A){_(A),d.shift(),d.length&&g(d[0][0],d[0][1])}}function Ry(r){var a,n;return a={},l("next"),l("throw",function(o){throw o}),l("return"),a[Symbol.iterator]=function(){return this},a;function l(o,d){a[o]=r[o]?function(f){return(n=!n)?{value:zr(r[o](f)),done:!1}:d?d(f):f}:d}}function Dy(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r[Symbol.asyncIterator],n;return a?a.call(r):(r=typeof Go=="function"?Go(r):r[Symbol.iterator](),n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n);function l(d){n[d]=r[d]&&function(f){return new Promise(function(m,g){f=r[d](f),o(m,g,f.done,f.value)})}}function o(d,f,m,g){Promise.resolve(g).then(function(p){d({value:p,done:m})},f)}}function My(r,a){return Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,r}var hS=Object.create?(function(r,a){Object.defineProperty(r,"default",{enumerable:!0,value:a})}):function(r,a){r.default=a},Id=function(r){return Id=Object.getOwnPropertyNames||function(a){var n=[];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[n.length]=l);return n},Id(r)};function Uy(r){if(r&&r.__esModule)return r;var a={};if(r!=null)for(var n=Id(r),l=0;l<n.length;l++)n[l]!=="default"&&Zo(a,r,n[l]);return hS(a,r),a}function zy(r){return r&&r.__esModule?r:{default:r}}function Ly(r,a,n,l){if(n==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?r!==a||!l:!a.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?l:n==="a"?l.call(r):l?l.value:a.get(r)}function qy(r,a,n,l,o){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?r!==a||!o:!a.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?o.call(r,n):o?o.value=n:a.set(r,n),n}function By(r,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?a===r:r.has(a)}function Hy(r,a,n){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var l,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=a[Symbol.asyncDispose]}if(l===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=a[Symbol.dispose],n&&(o=l)}if(typeof l!="function")throw new TypeError("Object not disposable.");o&&(l=function(){try{o.call(this)}catch(d){return Promise.reject(d)}}),r.stack.push({value:a,dispose:l,async:n})}else n&&r.stack.push({async:!0});return a}var fS=typeof SuppressedError=="function"?SuppressedError:function(r,a,n){var l=new Error(n);return l.name="SuppressedError",l.error=r,l.suppressed=a,l};function $y(r){function a(d){r.error=r.hasError?new fS(d,r.error,"An error was suppressed during disposal."):d,r.hasError=!0}var n,l=0;function o(){for(;n=r.stack.pop();)try{if(!n.async&&l===1)return l=0,r.stack.push(n),Promise.resolve().then(o);if(n.dispose){var d=n.dispose.call(n.value);if(n.async)return l|=2,Promise.resolve(d).then(o,function(f){return a(f),o()})}else l|=1}catch(f){a(f)}if(l===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return o()}function Py(r,a){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,l,o,d,f){return l?a?".jsx":".js":o&&(!d||!f)?n:o+d+"."+f.toLowerCase()+"js"}):r}const mS={__extends:by,__assign:Po,__rest:Hr,__decorate:vy,__param:xy,__esDecorate:wy,__runInitializers:_y,__propKey:Sy,__setFunctionName:jy,__metadata:ky,__awaiter:ie,__generator:Ny,__createBinding:Zo,__exportStar:Ty,__values:Go,__read:vh,__spread:Ey,__spreadArrays:Cy,__spreadArray:Oy,__await:zr,__asyncGenerator:Ay,__asyncDelegator:Ry,__asyncValues:Dy,__makeTemplateObject:My,__importStar:Uy,__importDefault:zy,__classPrivateFieldGet:Ly,__classPrivateFieldSet:qy,__classPrivateFieldIn:By,__addDisposableResource:Hy,__disposeResources:$y,__rewriteRelativeImportExtension:Py},gS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Hy,get __assign(){return Po},__asyncDelegator:Ry,__asyncGenerator:Ay,__asyncValues:Dy,__await:zr,__awaiter:ie,__classPrivateFieldGet:Ly,__classPrivateFieldIn:By,__classPrivateFieldSet:qy,__createBinding:Zo,__decorate:vy,__disposeResources:$y,__esDecorate:wy,__exportStar:Ty,__extends:by,__generator:Ny,__importDefault:zy,__importStar:Uy,__makeTemplateObject:My,__metadata:ky,__param:xy,__propKey:Sy,__read:vh,__rest:Hr,__rewriteRelativeImportExtension:Py,__runInitializers:_y,__setFunctionName:jy,__spread:Ey,__spreadArray:Oy,__spreadArrays:Cy,__values:Go,default:mS},Symbol.toStringTag,{value:"Module"})),pS=r=>r?(...a)=>r(...a):(...a)=>fetch(...a);class xh extends Error{constructor(a,n="FunctionsError",l){super(a),this.name=n,this.context=l}}class ap extends xh{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class sp extends xh{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class np extends xh{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Yd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Yd||(Yd={}));class yS{constructor(a,{headers:n={},customFetch:l,region:o=Yd.Any}={}){this.url=a,this.headers=n,this.region=o,this.fetch=pS(l)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return ie(this,arguments,void 0,function*(n,l={}){var o;try{const{headers:d,method:f,body:m,signal:g}=l;let p={},{region:b}=l;b||(b=this.region);const v=new URL(`${this.url}/${n}`);b&&b!=="any"&&(p["x-region"]=b,v.searchParams.set("forceFunctionRegion",b));let S;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",S=m):typeof m=="string"?(p["Content-Type"]="text/plain",S=m):typeof FormData<"u"&&m instanceof FormData?S=m:(p["Content-Type"]="application/json",S=JSON.stringify(m)):S=m;const _=yield this.fetch(v.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),d),body:S,signal:g}).catch(U=>{throw U.name==="AbortError"?U:new ap(U)}),A=_.headers.get("x-relay-error");if(A&&A==="true")throw new sp(_);if(!_.ok)throw new np(_);let O=((o=_.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),N;return O==="application/json"?N=yield _.json():O==="application/octet-stream"||O==="application/pdf"?N=yield _.blob():O==="text/event-stream"?N=_:O==="multipart/form-data"?N=yield _.formData():N=yield _.text(),{data:N,error:null,response:_}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new ap(d)}:{data:null,error:d,response:d instanceof np||d instanceof sp?d.context:void 0}}})}}var St={};const $r=Mx(gS);var To={},Eo={},Co={},Oo={},Ao={},Ro={},rp;function Gy(){if(rp)return Ro;rp=1,Object.defineProperty(Ro,"__esModule",{value:!0});class r extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ro.default=r,Ro}var lp;function Ky(){if(lp)return Ao;lp=1,Object.defineProperty(Ao,"__esModule",{value:!0});const a=$r.__importDefault(Gy());class n{constructor(o){var d,f;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(d=o.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=o.signal,this.isMaybeSingle=(f=o.isMaybeSingle)!==null&&f!==void 0?f:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,d){return this.headers=new Headers(this.headers),this.headers.set(o,d),this}then(o,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let m=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,b,v,S;let _=null,A=null,O=null,N=g.status,U=g.statusText;if(g.ok){if(this.method!=="HEAD"){const q=await g.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?A=q:A=JSON.parse(q))}const w=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),k=(v=g.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");w&&k&&k.length>1&&(O=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(A)&&(A.length>1?(_={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,O=null,N=406,U="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{const w=await g.text();try{_=JSON.parse(w),Array.isArray(_)&&g.status===404&&(A=[],_=null,N=200,U="OK")}catch{g.status===404&&w===""?(N=204,U="No Content"):_={message:w}}if(_&&this.isMaybeSingle&&(!((S=_==null?void 0:_.details)===null||S===void 0)&&S.includes("0 rows"))&&(_=null,N=200,U="OK"),_&&this.shouldThrowOnError)throw new a.default(_)}return{error:_,data:A,count:O,status:N,statusText:U}});return this.shouldThrowOnError||(m=m.catch(g=>{var p,b,v;return{error:{message:`${(p=g==null?void 0:g.name)!==null&&p!==void 0?p:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(b=g==null?void 0:g.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(v=g==null?void 0:g.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),m.then(o,d)}returns(){return this}overrideTypes(){return this}}return Ao.default=n,Ao}var ip;function Vy(){if(ip)return Oo;ip=1,Object.defineProperty(Oo,"__esModule",{value:!0});const a=$r.__importDefault(Ky());class n extends a.default{select(o){let d=!1;const f=(o??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:d=!0,nullsFirst:f,foreignTable:m,referencedTable:g=m}={}){const p=g?`${g}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${o}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:d,referencedTable:f=d}={}){const m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this}range(o,d,{foreignTable:f,referencedTable:m=f}={}){const g=typeof m>"u"?"offset":`${m}.offset`,p=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${o}`),this.url.searchParams.set(p,`${d-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:d=!1,settings:f=!1,buffers:m=!1,wal:g=!1,format:p="text"}={}){var b;const v=[o?"analyze":null,d?"verbose":null,f?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),S=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${v};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Oo.default=n,Oo}var op;function wh(){if(op)return Co;op=1,Object.defineProperty(Co,"__esModule",{value:!0});const a=$r.__importDefault(Vy()),n=new RegExp("[,()]");class l extends a.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const m=Array.from(new Set(f)).map(g=>typeof g=="string"&&n.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(d,`in.(${m})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:m,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const b=m===void 0?"":`(${m})`;return this.url.searchParams.append(d,`${p}fts${b}.${f}`),this}match(d){return Object.entries(d).forEach(([f,m])=>{this.url.searchParams.append(f,`eq.${m}`)}),this}not(d,f,m){return this.url.searchParams.append(d,`not.${f}.${m}`),this}or(d,{foreignTable:f,referencedTable:m=f}={}){const g=m?`${m}.or`:"or";return this.url.searchParams.append(g,`(${d})`),this}filter(d,f,m){return this.url.searchParams.append(d,`${f}.${m}`),this}}return Co.default=l,Co}var up;function Qy(){if(up)return Eo;up=1,Object.defineProperty(Eo,"__esModule",{value:!0});const a=$r.__importDefault(wh());class n{constructor(o,{headers:d={},schema:f,fetch:m}){this.url=o,this.headers=new Headers(d),this.schema=f,this.fetch=m}select(o,d){const{head:f=!1,count:m}=d??{},g=f?"HEAD":"GET";let p=!1;const b=(o??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",b),m&&this.headers.append("Prefer",`count=${m}`),new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:d,defaultToNull:f=!0}={}){var m;const g="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((b,v)=>b.concat(Object.keys(v)),[]);if(p.length>0){const b=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",b.join(","))}}return new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(o,{onConflict:d,ignoreDuplicates:f=!1,count:m,defaultToNull:g=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((S,_)=>S.concat(Object.keys(_)),[]);if(v.length>0){const S=[...new Set(v)].map(_=>`"${_}"`);this.url.searchParams.set("columns",S.join(","))}}return new a.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:d}={}){var f;const m="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:o}={}){var d;const f="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new a.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Eo.default=n,Eo}var cp;function bS(){if(cp)return To;cp=1,Object.defineProperty(To,"__esModule",{value:!0});const r=$r,a=r.__importDefault(Qy()),n=r.__importDefault(wh());class l{constructor(d,{headers:f={},schema:m,fetch:g}={}){this.url=d,this.headers=new Headers(f),this.schemaName=m,this.fetch=g}from(d){const f=new URL(`${this.url}/${d}`);return new a.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new l(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:m=!1,get:g=!1,count:p}={}){var b;let v;const S=new URL(`${this.url}/rpc/${d}`);let _;m||g?(v=m?"HEAD":"GET",Object.entries(f).filter(([O,N])=>N!==void 0).map(([O,N])=>[O,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([O,N])=>{S.searchParams.append(O,N)})):(v="POST",_=f);const A=new Headers(this.headers);return p&&A.set("Prefer",`count=${p}`),new n.default({method:v,url:S,headers:A,schema:this.schemaName,body:_,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return To.default=l,To}var dp;function vS(){if(dp)return St;dp=1,Object.defineProperty(St,"__esModule",{value:!0}),St.PostgrestError=St.PostgrestBuilder=St.PostgrestTransformBuilder=St.PostgrestFilterBuilder=St.PostgrestQueryBuilder=St.PostgrestClient=void 0;const r=$r,a=r.__importDefault(bS());St.PostgrestClient=a.default;const n=r.__importDefault(Qy());St.PostgrestQueryBuilder=n.default;const l=r.__importDefault(wh());St.PostgrestFilterBuilder=l.default;const o=r.__importDefault(Vy());St.PostgrestTransformBuilder=o.default;const d=r.__importDefault(Ky());St.PostgrestBuilder=d.default;const f=r.__importDefault(Gy());return St.PostgrestError=f.default,St.default={PostgrestClient:a.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:d.default,PostgrestError:f.default},St}var Iy=vS();const Yy=lh(Iy),xS=Dx({__proto__:null,default:Yy},[Iy]),{PostgrestClient:wS,PostgrestQueryBuilder:ek,PostgrestFilterBuilder:tk,PostgrestTransformBuilder:ak,PostgrestBuilder:sk,PostgrestError:nk}=Yy||xS;class _S{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const l=n.node,o=parseInt(l.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let n=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(n+=`

Suggested solution: ${a.workaround}`),new Error(n)}static createWebSocket(a,n){const l=this.getWebSocketConstructor();return new l(a,n)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const SS="2.80.0",jS=`realtime-js/${SS}`,kS="1.0.0",Xd=1e4,NS=1e3,TS=100;var Gl;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Gl||(Gl={}));var ut;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ut||(ut={}));var xa;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(xa||(xa={}));var Jd;(function(r){r.websocket="websocket"})(Jd||(Jd={}));var mn;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(mn||(mn={}));class ES{constructor(){this.HEADER_LENGTH=1}decode(a,n){return a.constructor===ArrayBuffer?n(this._binaryDecode(a)):n(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const n=new DataView(a),l=new TextDecoder;return this._decodeBroadcast(a,n,l)}_decodeBroadcast(a,n,l){const o=n.getUint8(1),d=n.getUint8(2);let f=this.HEADER_LENGTH+2;const m=l.decode(a.slice(f,f+o));f=f+o;const g=l.decode(a.slice(f,f+d));f=f+d;const p=JSON.parse(l.decode(a.slice(f,a.byteLength)));return{ref:null,topic:m,event:g,payload:p}}}class Xy{constructor(a,n){this.callback=a,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ke||(Ke={}));const hp=(r,a,n={})=>{var l;const o=(l=n.skipTypes)!==null&&l!==void 0?l:[];return a?Object.keys(a).reduce((d,f)=>(d[f]=CS(f,r,a,o),d),{}):{}},CS=(r,a,n,l)=>{const o=a.find(m=>m.name===r),d=o==null?void 0:o.type,f=n[r];return d&&!l.includes(d)?Jy(d,f):Zd(f)},Jy=(r,a)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return DS(a,n)}switch(r){case Ke.bool:return OS(a);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return AS(a);case Ke.json:case Ke.jsonb:return RS(a);case Ke.timestamp:return MS(a);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return Zd(a);default:return Zd(a)}},Zd=r=>r,OS=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},AS=r=>{if(typeof r=="string"){const a=parseFloat(r);if(!Number.isNaN(a))return a}return r},RS=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(a){return console.log(`JSON parse error: ${a}`),r}return r},DS=(r,a)=>{if(typeof r!="string")return r;const n=r.length-1,l=r[n];if(r[0]==="{"&&l==="}"){let d;const f=r.slice(1,n);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>Jy(a,m))}return r},MS=r=>typeof r=="string"?r.replace(" ","T"):r,Zy=r=>{const a=new URL(r);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class wd{constructor(a,n,l={},o=Xd){this.channel=a,this.event=n,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,n){var l;return this._hasReceived(a)&&n((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:a,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:n}){this.recHooks.filter(l=>l.status===a).forEach(l=>l.callback(n))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var fp;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(fp||(fp={}));class Kl{constructor(a,n){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kl.syncState(this.state,o,d,f),this.pendingDiffs.forEach(g=>{this.state=Kl.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},o=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Kl.syncDiff(this.state,o,d,f),m())}),this.onJoin((o,d,f)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:d,newPresences:f})}),this.onLeave((o,d,f)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,n,l,o){const d=this.cloneDeep(a),f=this.transformState(n),m={},g={};return this.map(d,(p,b)=>{f[p]||(g[p]=b)}),this.map(f,(p,b)=>{const v=d[p];if(v){const S=b.map(N=>N.presence_ref),_=v.map(N=>N.presence_ref),A=b.filter(N=>_.indexOf(N.presence_ref)<0),O=v.filter(N=>S.indexOf(N.presence_ref)<0);A.length>0&&(m[p]=A),O.length>0&&(g[p]=O)}else m[p]=b}),this.syncDiff(d,{joins:m,leaves:g},l,o)}static syncDiff(a,n,l,o){const{joins:d,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(d,(m,g)=>{var p;const b=(p=a[m])!==null&&p!==void 0?p:[];if(a[m]=this.cloneDeep(g),b.length>0){const v=a[m].map(_=>_.presence_ref),S=b.filter(_=>v.indexOf(_.presence_ref)<0);a[m].unshift(...S)}l(m,b,g)}),this.map(f,(m,g)=>{let p=a[m];if(!p)return;const b=g.map(v=>v.presence_ref);p=p.filter(v=>b.indexOf(v.presence_ref)<0),a[m]=p,o(m,p,g),p.length===0&&delete a[m]}),a}static map(a,n){return Object.getOwnPropertyNames(a).map(l=>n(l,a[l]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((n,l)=>{const o=a[l];return"metas"in o?n[l]=o.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[l]=o,n},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mp;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(mp||(mp={}));var Vl;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Vl||(Vl={}));var Za;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Za||(Za={}));class _h{constructor(a,n={config:{}},l){var o,d;if(this.topic=a,this.params=n,this.socket=l,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new wd(this,xa.join,this.params,this.timeout),this.rejoinTimer=new Xy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xa.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Kl(this),this.broadcastEndpointURL=Zy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,n=this.timeout){var l,o,d;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:f,presence:m,private:g}}=this.params,p=(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(_=>_.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[Vl.PRESENCE]&&this.bindings[Vl.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,v={},S={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(_=>a==null?void 0:a(Za.CHANNEL_ERROR,_)),this._onClose(()=>a==null?void 0:a(Za.CLOSED)),this.updateJoinPayload(Object.assign({config:S},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var A;if(this.socket.setAuth(),_===void 0){a==null||a(Za.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,N=(A=O==null?void 0:O.length)!==null&&A!==void 0?A:0,U=[];for(let D=0;D<N;D++){const w=O[D],{filter:{event:k,schema:q,table:$,filter:P}}=w,X=_&&_[D];if(X&&X.event===k&&X.schema===q&&X.table===$&&X.filter===P)U.push(Object.assign(Object.assign({},w),{id:X.id}));else{this.unsubscribe(),this.state=ut.errored,a==null||a(Za.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,a&&a(Za.SUBSCRIBED);return}}).receive("error",_=>{this.state=ut.errored,a==null||a(Za.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{a==null||a(Za.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,n={}){return await this.send({type:"presence",event:"track",payload:a},n.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,n,l){return this.state===ut.joined&&a===Vl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,n,l)}async httpSend(a,n,l={}){var o;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:n,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(o=l.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const p=await m.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(a,n={}){var l,o;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=a,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(l=n.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,g;const p=this._push(a.type,a,n.timeout||this.timeout);a.type==="broadcast"&&!(!((g=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),p.receive("ok",()=>d("ok")),p.receive("error",()=>d("error")),p.receive("timeout",()=>d("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xa.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(o=>{l=new wd(this,xa.leave,{},a),l.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(a,n,l){const o=new AbortController,d=setTimeout(()=>o.abort(),l),f=await this.socket.fetch(a,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(d),f}_push(a,n,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new wd(this,a,n,l);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>TS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(a,n,l){return n}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,n,l){var o,d;const f=a.toLocaleLowerCase(),{close:m,error:g,leave:p,join:b}=xa;if(l&&[m,g,p,b].indexOf(f)>=0&&l!==this._joinRef())return;let S=this._onMessage(f,n,l);if(n&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(_=>{var A,O,N;return((A=_.filter)===null||A===void 0?void 0:A.event)==="*"||((N=(O=_.filter)===null||O===void 0?void 0:O.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===f}).map(_=>_.callback(S,l)):(d=this.bindings[f])===null||d===void 0||d.filter(_=>{var A,O,N,U,D,w;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const k=_.id,q=(A=_.filter)===null||A===void 0?void 0:A.event;return k&&((O=n.ids)===null||O===void 0?void 0:O.includes(k))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const k=(D=(U=_==null?void 0:_.filter)===null||U===void 0?void 0:U.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return k==="*"||k===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof S=="object"&&"ids"in S){const A=S.data,{schema:O,table:N,commit_timestamp:U,type:D,errors:w}=A;S=Object.assign(Object.assign({},{schema:O,table:N,commit_timestamp:U,eventType:D,new:{},old:{},errors:w}),this._getPayloadRecords(A))}_.callback(S,l)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,n,l){const o=a.toLocaleLowerCase(),d={type:o,filter:n,callback:l};return this.bindings[o]?this.bindings[o].push(d):this.bindings[o]=[d],this}_off(a,n){const l=a.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(o=>{var d;return!(((d=o.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&_h.isEqual(o.filter,n))})),this}static isEqual(a,n){if(Object.keys(a).length!==Object.keys(n).length)return!1;for(const l in a)if(a[l]!==n[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(xa.close,{},a)}_onError(a){this._on(xa.error,{},n=>a(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const n={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(n.new=hp(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(n.old=hp(a.columns,a.old_record)),n}}const _d=()=>{},Do={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},US=[1e3,2e3,5e3,1e4],zS=1e4,LS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qS{constructor(a,n){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xd,this.transport=null,this.heartbeatIntervalMs=Do.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_d,this.ref=0,this.reconnectTimer=null,this.logger=_d,this.conn=null,this.sendBuffer=[],this.serializer=new ES,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...d)=>o(...d):(...d)=>fetch(...d),!(!((l=n==null?void 0:n.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${a}/${Jd.websocket}`,this.httpEndpoint=Zy(a),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_S.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const n=a.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kS}))}disconnect(a,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},a?this.conn.close(a,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const n=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const a=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,n,l){this.logger(a,n,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Gl.connecting:return mn.Connecting;case Gl.open:return mn.Open;case Gl.closing:return mn.Closing;default:return mn.Closed}}isConnected(){return this.connectionState()===mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,n={config:{}}){const l=`realtime:${a}`,o=this.getChannels().find(d=>d.topic===l);if(o)return o;{const d=new _h(`realtime:${a}`,n,this);return this.channels.push(d),d}}push(a){const{topic:n,event:l,payload:o,ref:d}=a,f=()=>{this.encode(a,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${n} ${l} (${d})`,o),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(NS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Do.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let n=this.channels.find(l=>l.topic===a&&(l._isJoined()||l._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${a}"`),n.unsubscribe())}_remove(a){this.channels=this.channels.filter(n=>n.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:o,payload:d,ref:f}=n,m=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${l} ${o} ${m}`.trim(),d),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(o,d,f)),this._triggerStateCallbacks("message",n)})}_clearTimer(a){var n;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var n;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(xa.error))}_appendParams(a,n){if(Object.keys(n).length===0)return a;const l=a.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${a}${l}${o}`}_workerObjectUrl(a){let n;if(a)n=a;else{const l=new Blob([LS],{type:"application/javascript"});n=URL.createObjectURL(l)}return n}_setConnectionState(a,n=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(a=null){let n;a?n=a:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(l=>{const o={access_token:n,version:jS};n&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(xa.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${a}`,n)})}_triggerStateCallbacks(a,n){try{this.stateChangeCallbacks[a].forEach(l=>{try{l(n)}catch(o){this.log("error",`error in ${a} callback`,o)}})}catch(l){this.log("error",`error triggering ${a} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Xy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Do.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var n,l,o,d,f,m,g,p,b;if(this.transport=(n=a==null?void 0:a.transport)!==null&&n!==void 0?n:null,this.timeout=(l=a==null?void 0:a.timeout)!==null&&l!==void 0?l:Xd,this.heartbeatIntervalMs=(o=a==null?void 0:a.heartbeatIntervalMs)!==null&&o!==void 0?o:Do.HEARTBEAT_INTERVAL,this.worker=(d=a==null?void 0:a.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=a==null?void 0:a.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=a==null?void 0:a.heartbeatCallback)!==null&&m!==void 0?m:_d,a!=null&&a.params&&(this.params=a.params),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=a==null?void 0:a.reconnectAfterMs)!==null&&g!==void 0?g:(v=>US[v-1]||zS),this.encode=(p=a==null?void 0:a.encode)!==null&&p!==void 0?p:((v,S)=>S(JSON.stringify(v))),this.decode=(b=a==null?void 0:a.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a==null?void 0:a.workerUrl}}}class Sh extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function Xe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class BS extends Sh{constructor(a,n,l){super(a),this.name="StorageApiError",this.status=n,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fd extends Sh{constructor(a,n){super(a),this.name="StorageUnknownError",this.originalError=n}}const jh=r=>r?(...a)=>r(...a):(...a)=>fetch(...a),HS=()=>Response,Wd=r=>{if(Array.isArray(r))return r.map(n=>Wd(n));if(typeof r=="function"||r!==Object(r))return r;const a={};return Object.entries(r).forEach(([n,l])=>{const o=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));a[o]=Wd(l)}),a},$S=r=>{if(typeof r!="object"||r===null)return!1;const a=Object.getPrototypeOf(r);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Sd=r=>{var a;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(a=r.error)===null||a===void 0?void 0:a.message)||JSON.stringify(r)},PS=(r,a,n)=>ie(void 0,void 0,void 0,function*(){const l=yield HS();r instanceof l&&!(n!=null&&n.noResolveJson)?r.json().then(o=>{const d=r.status||500,f=(o==null?void 0:o.statusCode)||d+"";a(new BS(Sd(o),d,f))}).catch(o=>{a(new Fd(Sd(o),o))}):a(new Fd(Sd(r),r))}),GS=(r,a,n,l)=>{const o={method:r,headers:(a==null?void 0:a.headers)||{}};return r==="GET"||!l?o:($S(l)?(o.headers=Object.assign({"Content-Type":"application/json"},a==null?void 0:a.headers),o.body=JSON.stringify(l)):o.body=l,a!=null&&a.duplex&&(o.duplex=a.duplex),Object.assign(Object.assign({},o),n))};function ni(r,a,n,l,o,d){return ie(this,void 0,void 0,function*(){return new Promise((f,m)=>{r(n,GS(a,l,o,d)).then(g=>{if(!g.ok)throw g;return l!=null&&l.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>PS(g,m,l))})})}function Yl(r,a,n,l){return ie(this,void 0,void 0,function*(){return ni(r,"GET",a,n,l)})}function ya(r,a,n,l,o){return ie(this,void 0,void 0,function*(){return ni(r,"POST",a,l,o,n)})}function eh(r,a,n,l,o){return ie(this,void 0,void 0,function*(){return ni(r,"PUT",a,l,o,n)})}function KS(r,a,n,l){return ie(this,void 0,void 0,function*(){return ni(r,"HEAD",a,Object.assign(Object.assign({},n),{noResolveJson:!0}),l)})}function kh(r,a,n,l,o){return ie(this,void 0,void 0,function*(){return ni(r,"DELETE",a,l,o,n)})}class VS{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n}then(a,n){return this.execute().then(a,n)}execute(){return ie(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}})}}var Fy;class QS{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n,this[Fy]="BlobDownloadBuilder",this.promise=null}asStream(){return new VS(this.downloadFn,this.shouldThrowOnError)}then(a,n){return this.getPromise().then(a,n)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ie(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}})}}Fy=Symbol.toStringTag;const IS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class YS{constructor(a,n={},l,o){this.shouldThrowOnError=!1,this.url=a,this.headers=n,this.bucketId=l,this.fetch=jh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,n,l,o){return ie(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},gp),o);let m=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&l instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",this.encodeMetadata(g)),d.append("",l)):typeof FormData<"u"&&l instanceof FormData?(d=l,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),g&&!d.has("metadata")&&d.append("metadata",this.encodeMetadata(g))):(d=l,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),o!=null&&o.headers&&(m=Object.assign(Object.assign({},m),o.headers));const p=this._removeEmptyFolders(n),b=this._getFinalPath(p),v=yield(a=="PUT"?eh:ya)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:p,id:v.Id,fullPath:v.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Xe(d))return{data:null,error:d};throw d}})}upload(a,n,l){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,n,l)})}uploadToSignedUrl(a,n,l,o){return ie(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(a),f=this._getFinalPath(d),m=new URL(this.url+`/object/upload/sign/${f}`);m.searchParams.set("token",n);try{let g;const p=Object.assign({upsert:gp.upsert},o),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&l instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",l)):typeof FormData<"u"&&l instanceof FormData?(g=l,g.append("cacheControl",p.cacheControl)):(g=l,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const v=yield eh(this.fetch,m.toString(),g,{headers:b});return{data:{path:d,fullPath:v.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Xe(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(a,n){return ie(this,void 0,void 0,function*(){try{let l=this._getFinalPath(a);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const d=yield ya(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:o}),f=new URL(this.url+d.url),m=f.searchParams.get("token");if(!m)throw new Sh("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:m},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}update(a,n,l){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,n,l)})}move(a,n,l){return ie(this,void 0,void 0,function*(){try{return{data:yield ya(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:n,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}copy(a,n,l){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield ya(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:n,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}createSignedUrl(a,n,l){return ie(this,void 0,void 0,function*(){try{let o=this._getFinalPath(a),d=yield ya(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},l!=null&&l.transform?{transform:l.transform}:{}),{headers:this.headers});const f=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}createSignedUrls(a,n,l){return ie(this,void 0,void 0,function*(){try{const o=yield ya(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:a},{headers:this.headers}),d=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return{data:o.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}download(a,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),f=d?`?${d}`:"",m=this._getFinalPath(a),g=()=>Yl(this.fetch,`${this.url}/${o}/${m}${f}`,{headers:this.headers,noResolveJson:!0});return new QS(g,this.shouldThrowOnError)}info(a){return ie(this,void 0,void 0,function*(){const n=this._getFinalPath(a);try{const l=yield Yl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wd(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}exists(a){return ie(this,void 0,void 0,function*(){const n=this._getFinalPath(a);try{return yield KS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l)&&l instanceof Fd){const o=l.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:l}}throw l}})}getPublicUrl(a,n){const l=this._getFinalPath(a),o=[],d=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&o.push(d);const m=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});g!==""&&o.push(g);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${l}${p}`)}}}remove(a){return ie(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}list(a,n,l){return ie(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},IS),n),{prefix:a||""});return{data:yield ya(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},l),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}listV2(a,n){return ie(this,void 0,void 0,function*(){try{const l=Object.assign({},a);return{data:yield ya(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},n),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const n=[];return a.width&&n.push(`width=${a.width}`),a.height&&n.push(`height=${a.height}`),a.resize&&n.push(`resize=${a.resize}`),a.format&&n.push(`format=${a.format}`),a.quality&&n.push(`quality=${a.quality}`),n.join("&")}}const Wy="2.80.0",eb={"X-Client-Info":`storage-js/${Wy}`};class XS{constructor(a,n={},l,o){this.shouldThrowOnError=!1;const d=new URL(a);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},eb),n),this.fetch=jh(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(a){return ie(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(a);return{data:yield Yl(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}getBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}createBucket(a){return ie(this,arguments,void 0,function*(n,l={public:!1}){try{return{data:yield ya(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}updateBucket(a,n){return ie(this,void 0,void 0,function*(){try{return{data:yield eh(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}})}emptyBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:yield ya(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}deleteBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(a){const n={};return a&&("limit"in a&&(n.limit=String(a.limit)),"offset"in a&&(n.offset=String(a.offset)),a.search&&(n.search=a.search),a.sortColumn&&(n.sortColumn=a.sortColumn),a.sortOrder&&(n.sortOrder=a.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class JS{constructor(a,n={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},eb),n),this.fetch=jh(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:yield ya(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}listBuckets(a){return ie(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(a==null?void 0:a.limit)!==void 0&&n.set("limit",a.limit.toString()),(a==null?void 0:a.offset)!==void 0&&n.set("offset",a.offset.toString()),a!=null&&a.sortColumn&&n.set("sortColumn",a.sortColumn),a!=null&&a.sortOrder&&n.set("sortOrder",a.sortOrder),a!=null&&a.search&&n.set("search",a.search);const l=n.toString(),o=l?`${this.url}/bucket?${l}`:`${this.url}/bucket`;return{data:yield Yl(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}deleteBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}}const Nh={"X-Client-Info":`storage-js/${Wy}`,"Content-Type":"application/json"};class tb extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Yt(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class jd extends tb{constructor(a,n,l){super(a),this.name="StorageVectorsApiError",this.status=n,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ZS extends tb{constructor(a,n){super(a),this.name="StorageVectorsUnknownError",this.originalError=n}}var pp;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(pp||(pp={}));const Th=r=>r?(...a)=>r(...a):(...a)=>fetch(...a),FS=r=>{if(typeof r!="object"||r===null)return!1;const a=Object.getPrototypeOf(r);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},yp=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),WS=(r,a,n)=>ie(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(n!=null&&n.noResolveJson)){const o=r.status||500,d=r;if(typeof d.json=="function")d.json().then(f=>{const m=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||o+"";a(new jd(yp(f),o,m))}).catch(()=>{const f=o+"",m=d.statusText||`HTTP ${o} error`;a(new jd(m,o,f))});else{const f=o+"",m=d.statusText||`HTTP ${o} error`;a(new jd(m,o,f))}}else a(new ZS(yp(r),r))}),ej=(r,a,n,l)=>{const o={method:r,headers:(a==null?void 0:a.headers)||{}};return l?(FS(l)?(o.headers=Object.assign({"Content-Type":"application/json"},a==null?void 0:a.headers),o.body=JSON.stringify(l)):o.body=l,Object.assign(Object.assign({},o),n)):o};function tj(r,a,n,l,o,d){return ie(this,void 0,void 0,function*(){return new Promise((f,m)=>{r(n,ej(a,l,o,d)).then(g=>{if(!g.ok)throw g;if(l!=null&&l.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>f(g)).catch(g=>WS(g,m,l))})})}function Xt(r,a,n,l,o){return ie(this,void 0,void 0,function*(){return tj(r,"POST",a,l,o,n)})}class aj{constructor(a,n={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nh),n),this.fetch=Th(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return ie(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}getIndex(a,n){return ie(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:n},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Yt(l))return{data:null,error:l};throw l}})}listIndexes(a){return ie(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}deleteIndex(a,n){return ie(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:n},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Yt(l))return{data:null,error:l};throw l}})}}class sj{constructor(a,n={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nh),n),this.fetch=Th(l)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return ie(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Xt(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}getVectors(a){return ie(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}listVectors(a){return ie(this,void 0,void 0,function*(){try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield Xt(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}queryVectors(a){return ie(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}deleteVectors(a){return ie(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Xt(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}}class nj{constructor(a,n={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nh),n),this.fetch=Th(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}getBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}listBuckets(){return ie(this,arguments,void 0,function*(a={}){try{return{data:yield Xt(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}deleteBucket(a){return ie(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}}class rj extends nj{constructor(a,n={}){super(a,n.headers||{},n.fetch)}from(a){return new lj(this.url,this.headers,a,this.fetch)}}class lj extends aj{constructor(a,n,l,o){super(a,n,o),this.vectorBucketName=l}createIndex(a){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ie(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ie(this,arguments,void 0,function*(n={}){return a.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ie(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ie(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new ij(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class ij extends sj{constructor(a,n,l,o,d){super(a,n,d),this.vectorBucketName=l,this.indexName=o}putVectors(a){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ie(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ie(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ie(this,arguments,void 0,function*(n={}){return a.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ie(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ie(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class oj extends XS{constructor(a,n={},l,o){super(a,n,l,o)}from(a){return new YS(this.url,this.headers,a,this.fetch)}get vectors(){return new rj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new JS(this.url+"/iceberg",this.headers,this.fetch)}}const uj="2.80.0";let Pl="";typeof Deno<"u"?Pl="deno":typeof document<"u"?Pl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pl="react-native":Pl="node";const cj={"X-Client-Info":`supabase-js-${Pl}/${uj}`},dj={headers:cj},hj={schema:"public"},fj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mj={},gj=r=>r?(...a)=>r(...a):(...a)=>fetch(...a),pj=()=>Headers,yj=(r,a,n)=>{const l=gj(n),o=pj();return async(d,f)=>{var m;const g=(m=await a())!==null&&m!==void 0?m:r;let p=new o(f==null?void 0:f.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),l(d,Object.assign(Object.assign({},f),{headers:p}))}};function bj(r){return r.endsWith("/")?r:r+"/"}function vj(r,a){var n,l;const{db:o,auth:d,realtime:f,global:m}=r,{db:g,auth:p,realtime:b,global:v}=a,S={db:Object.assign(Object.assign({},g),o),auth:Object.assign(Object.assign({},p),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},v),m),{headers:Object.assign(Object.assign({},(n=v==null?void 0:v.headers)!==null&&n!==void 0?n:{}),(l=m==null?void 0:m.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return r.accessToken?S.accessToken=r.accessToken:delete S.accessToken,S}function xj(r){const a=r==null?void 0:r.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(bj(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ab="2.80.0",wr=30*1e3,th=3,kd=th*wr,wj="http://localhost:9999",_j="supabase.auth.token",Sj={"X-Client-Info":`gotrue-js/${ab}`},ah="X-Supabase-Api-Version",sb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kj=600*1e3;class Xl extends Error{constructor(a,n,l){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=l}}function ce(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Nj extends Xl{constructor(a,n,l){super(a,n,l),this.name="AuthApiError",this.status=n,this.code=l}}function Tj(r){return ce(r)&&r.name==="AuthApiError"}class gn extends Xl{constructor(a,n){super(a),this.name="AuthUnknownError",this.originalError=n}}class Vs extends Xl{constructor(a,n,l,o){super(a,l,o),this.name=n,this.status=l}}class ga extends Vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ej(r){return ce(r)&&r.name==="AuthSessionMissingError"}class gr extends Vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mo extends Vs{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Uo extends Vs{constructor(a,n=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cj(r){return ce(r)&&r.name==="AuthImplicitGrantRedirectError"}class bp extends Vs{constructor(a,n=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sh extends Vs{constructor(a,n){super(a,"AuthRetryableFetchError",n,void 0)}}function Nd(r){return ce(r)&&r.name==="AuthRetryableFetchError"}class vp extends Vs{constructor(a,n,l){super(a,"AuthWeakPasswordError",n,"weak_password"),this.reasons=l}}class nh extends Vs{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xp=` 	
\r=`.split(""),Oj=(()=>{const r=new Array(128);for(let a=0;a<r.length;a+=1)r[a]=-1;for(let a=0;a<xp.length;a+=1)r[xp[a].charCodeAt(0)]=-2;for(let a=0;a<Ko.length;a+=1)r[Ko[a].charCodeAt(0)]=a;return r})();function wp(r,a,n){if(r!==null)for(a.queue=a.queue<<8|r,a.queuedBits+=8;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;n(Ko[l]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;n(Ko[l]),a.queuedBits-=6}}function nb(r,a,n){const l=Oj[r];if(l>-1)for(a.queue=a.queue<<6|l,a.queuedBits+=6;a.queuedBits>=8;)n(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function _p(r){const a=[],n=f=>{a.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},d=f=>{Dj(f,l,n)};for(let f=0;f<r.length;f+=1)nb(r.charCodeAt(f),o,d);return a.join("")}function Aj(r,a){if(r<=127){a(r);return}else if(r<=2047){a(192|r>>6),a(128|r&63);return}else if(r<=65535){a(224|r>>12),a(128|r>>6&63),a(128|r&63);return}else if(r<=1114111){a(240|r>>18),a(128|r>>12&63),a(128|r>>6&63),a(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Rj(r,a){for(let n=0;n<r.length;n+=1){let l=r.charCodeAt(n);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(r.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}Aj(l,a)}}function Dj(r,a,n){if(a.utf8seq===0){if(r<=127){n(r);return}for(let l=1;l<6;l+=1)if((r>>7-l&1)===0){a.utf8seq=l;break}if(a.utf8seq===2)a.codepoint=r&31;else if(a.utf8seq===3)a.codepoint=r&15;else if(a.utf8seq===4)a.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|r&63,a.utf8seq-=1,a.utf8seq===0&&n(a.codepoint)}}function Sr(r){const a=[],n={queue:0,queuedBits:0},l=o=>{a.push(o)};for(let o=0;o<r.length;o+=1)nb(r.charCodeAt(o),n,l);return new Uint8Array(a)}function Mj(r){const a=[];return Rj(r,n=>a.push(n)),new Uint8Array(a)}function yn(r){const a=[],n={queue:0,queuedBits:0},l=o=>{a.push(o)};return r.forEach(o=>wp(o,n,l)),wp(null,n,l),a.join("")}function Uj(r){return Math.round(Date.now()/1e3)+r}function zj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const a=Math.random()*16|0;return(r=="x"?a:a&3|8).toString(16)})}const jt=()=>typeof window<"u"&&typeof document<"u",dn={tested:!1,writable:!1},rb=()=>{if(!jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dn.tested)return dn.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),dn.tested=!0,dn.writable=!0}catch{dn.tested=!0,dn.writable=!1}return dn.writable};function Lj(r){const a={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,d)=>{a[d]=o})}catch{}return n.searchParams.forEach((l,o)=>{a[o]=l}),a}const lb=r=>r?(...a)=>r(...a):(...a)=>fetch(...a),qj=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",_r=async(r,a,n)=>{await r.setItem(a,JSON.stringify(n))},hn=async(r,a)=>{const n=await r.getItem(a);if(!n)return null;try{return JSON.parse(n)}catch{return n}},As=async(r,a)=>{await r.removeItem(a)};class Fo{constructor(){this.promise=new Fo.promiseConstructor((a,n)=>{this.resolve=a,this.reject=n})}}Fo.promiseConstructor=Promise;function Td(r){const a=r.split(".");if(a.length!==3)throw new nh("Invalid JWT structure");for(let l=0;l<a.length;l++)if(!jj.test(a[l]))throw new nh("JWT not in base64url format");return{header:JSON.parse(_p(a[0])),payload:JSON.parse(_p(a[1])),signature:Sr(a[2]),raw:{header:a[0],payload:a[1]}}}async function Bj(r){return await new Promise(a=>{setTimeout(()=>a(null),r)})}function Hj(r,a){return new Promise((l,o)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await r(d);if(!a(d,null,f)){l(f);return}}catch(f){if(!a(d,f)){o(f);return}}})()})}function $j(r){return("0"+r.toString(16)).substr(-2)}function Pj(){const a=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=n.length;let o="";for(let d=0;d<56;d++)o+=n.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(a),Array.from(a,$j).join("")}async function Gj(r){const n=new TextEncoder().encode(r),l=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(l);return Array.from(o).map(d=>String.fromCharCode(d)).join("")}async function Kj(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await Gj(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pr(r,a,n=!1){const l=Pj();let o=l;n&&(o+="/PASSWORD_RECOVERY"),await _r(r,`${a}-code-verifier`,o);const d=await Kj(l);return[d,l===d?"plain":"s256"]}const Vj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Qj(r){const a=r.headers.get(ah);if(!a||!a.match(Vj))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Ij(r){if(!r)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(r<=a)throw new Error("JWT has expired")}function Yj(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yr(r){if(!Xj.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ed(){const r={};return new Proxy(r,{get:(a,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const l=n.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jj(r,a){return new Proxy(r,{get:(n,l,o)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,l,o)}return!a.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(n,l,o)}})}function Sp(r){return JSON.parse(JSON.stringify(r))}const fn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Zj=[502,503,504];async function jp(r){var a;if(!qj(r))throw new sh(fn(r),0);if(Zj.includes(r.status))throw new sh(fn(r),r.status);let n;try{n=await r.json()}catch(d){throw new gn(fn(d),d)}let l;const o=Qj(r);if(o&&o.getTime()>=sb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?l=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(l=n.error_code),l){if(l==="weak_password")throw new vp(fn(n),r.status,((a=n.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(l==="session_not_found")throw new ga}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new vp(fn(n),r.status,n.weak_password.reasons);throw new Nj(fn(n),r.status||500,l)}const Fj=(r,a,n,l)=>{const o={method:r,headers:(a==null?void 0:a.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a==null?void 0:a.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),n))};async function ge(r,a,n,l){var o;const d=Object.assign({},l==null?void 0:l.headers);d[ah]||(d[ah]=sb["2024-01-01"].name),l!=null&&l.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const f=(o=l==null?void 0:l.query)!==null&&o!==void 0?o:{};l!=null&&l.redirectTo&&(f.redirect_to=l.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await Wj(r,a,n+m,{headers:d,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(g):{data:Object.assign({},g),error:null}}async function Wj(r,a,n,l,o,d){const f=Fj(a,l,o,d);let m;try{m=await r(n,Object.assign({},f))}catch(g){throw console.error(g),new sh(fn(g),0)}if(m.ok||await jp(m),l!=null&&l.noResolveJson)return m;try{return await m.json()}catch(g){await jp(g)}}function pa(r){var a;let n=null;a1(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=Uj(r.expires_in)));const l=(a=r.user)!==null&&a!==void 0?a:r;return{data:{session:n,user:l},error:null}}function kp(r){const a=pa(r);return!a.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,l)=>n&&typeof l=="string",!0)&&(a.data.weak_password=r.weak_password),a}function Ms(r){var a;return{data:{user:(a=r.user)!==null&&a!==void 0?a:r},error:null}}function e1(r){return{data:r,error:null}}function t1(r){const{action_link:a,email_otp:n,hashed_token:l,redirect_to:o,verification_type:d}=r,f=Hr(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:n,hashed_token:l,redirect_to:o,verification_type:d},g=Object.assign({},f);return{data:{properties:m,user:g},error:null}}function Np(r){return r}function a1(r){return r.access_token&&r.refresh_token&&r.expires_in}const Cd=["global","local","others"];class s1{constructor({url:a="",headers:n={},fetch:l}){this.url=a,this.headers=n,this.fetch=lb(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,n=Cd[0]){if(Cd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cd.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(l){if(ce(l))return{data:null,error:l};throw l}}async inviteUserByEmail(a,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ms})}catch(l){if(ce(l))return{data:{user:null},error:l};throw l}}async generateLink(a){try{const{options:n}=a,l=Hr(a,["options"]),o=Object.assign(Object.assign({},l),n);return"newEmail"in l&&(o.new_email=l==null?void 0:l.newEmail,delete o.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:t1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(a){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Ms})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async listUsers(a){var n,l,o,d,f,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&l!==void 0?l:"",per_page:(d=(o=a==null?void 0:a.perPage)===null||o===void 0?void 0:o.toString())!==null&&d!==void 0?d:""},xform:Np});if(b.error)throw b.error;const v=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(A=>{const O=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(A.split(";")[1].split("=")[1]);p[`${N}Page`]=O}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(ce(p))return{data:{users:[]},error:p};throw p}}async getUserById(a){yr(a);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Ms})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(a,n){yr(a);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:n,headers:this.headers,xform:Ms})}catch(l){if(ce(l))return{data:{user:null},error:l};throw l}}async deleteUser(a,n=!1){yr(a);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ms})}catch(l){if(ce(l))return{data:{user:null},error:l};throw l}}async _listFactors(a){yr(a.userId);try{const{data:n,error:l}=await ge(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:l}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _deleteFactor(a){yr(a.userId),yr(a.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _listOAuthClients(a){var n,l,o,d,f,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&l!==void 0?l:"",per_page:(d=(o=a==null?void 0:a.perPage)===null||o===void 0?void 0:o.toString())!==null&&d!==void 0?d:""},xform:Np});if(b.error)throw b.error;const v=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(A=>{const O=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(A.split(";")[1].split("=")[1]);p[`${N}Page`]=O}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(ce(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(a){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _getOAuthClient(a){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _updateOAuthClient(a,n){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:n,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ce(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(a){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(a){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}}function Tp(r={}){return{getItem:a=>r[a]||null,setItem:(a,n)=>{r[a]=n},removeItem:a=>{delete r[a]}}}const br={debug:!!(globalThis&&rb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ib extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class n1 extends ib{}async function r1(r,a,n){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,a);const l=new globalThis.AbortController;return a>0&&setTimeout(()=>{l.abort(),br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await n()}finally{br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(a===0)throw br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new n1(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(br.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function l1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ob(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function i1(r){return parseInt(r,16)}function o1(r){const a=new TextEncoder().encode(r);return"0x"+Array.from(a,l=>l.toString(16).padStart(2,"0")).join("")}function u1(r){var a;const{chainId:n,domain:l,expirationTime:o,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:g,resources:p,scheme:b,uri:v,version:S}=r;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((a=r.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const _=ob(r.address),A=b?`${b}://${l}`:l,O=r.statement?`${r.statement}
`:"",N=`${A} wants you to sign in with your Ethereum account:
${_}

${O}`;let U=`URI: ${v}
Version: ${S}
Chain ID: ${n}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(o&&(U+=`
Expiration Time: ${o.toISOString()}`),m&&(U+=`
Not Before: ${m.toISOString()}`),g&&(U+=`
Request ID: ${g}`),p){let D=`
Resources:`;for(const w of p){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);D+=`
- ${w}`}U+=D}return`${N}
${U}`}class lt extends Error{constructor({message:a,code:n,cause:l,name:o}){var d;super(a,{cause:l}),this.__isWebAuthnError=!0,this.name=(d=o??(l instanceof Error?l.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=n}}class Vo extends lt{constructor(a,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:a}),this.name="WebAuthnUnknownError",this.originalError=n}}function c1({error:r,options:a}){var n,l,o;const{publicKey:d}=a;if(!d)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(a.signal instanceof AbortSignal)return new lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((n=d.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(a.mediation==="conditional"&&((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new lt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const f=window.location.hostname;if(ub(f)){if(d.rp.id!==f)return new lt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function d1({error:r,options:a}){const{publicKey:n}=a;if(!n)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(a.signal instanceof AbortSignal)return new lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new lt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const l=window.location.hostname;if(ub(l)){if(n.rpId!==l)return new lt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class h1{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const f1=new h1;function m1(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:a,user:n,excludeCredentials:l}=r,o=Hr(r,["challenge","user","excludeCredentials"]),d=Sr(a).buffer,f=Object.assign(Object.assign({},n),{id:Sr(n.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:d,user:f});if(l&&l.length>0){m.excludeCredentials=new Array(l.length);for(let g=0;g<l.length;g++){const p=l[g];m.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Sr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function g1(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:a,allowCredentials:n}=r,l=Hr(r,["challenge","allowCredentials"]),o=Sr(a).buffer,d=Object.assign(Object.assign({},l),{challenge:o});if(n&&n.length>0){d.allowCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const m=n[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:Sr(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function p1(r){var a;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r;return{id:r.id,rawId:r.id,response:{attestationObject:yn(new Uint8Array(r.response.attestationObject)),clientDataJSON:yn(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function y1(r){var a;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r,l=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:yn(new Uint8Array(o.authenticatorData)),clientDataJSON:yn(new Uint8Array(o.clientDataJSON)),signature:yn(new Uint8Array(o.signature)),userHandle:o.userHandle?yn(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function ub(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Ep(){var r,a;return!!(jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.get)=="function")}async function b1(r){try{const a=await navigator.credentials.create(r);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Vo("Browser returned unexpected credential type",a)}:{data:null,error:new Vo("Empty credential response",a)}}catch(a){return{data:null,error:c1({error:a,options:r})}}}async function v1(r){try{const a=await navigator.credentials.get(r);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Vo("Browser returned unexpected credential type",a)}:{data:null,error:new Vo("Empty credential response",a)}}catch(a){return{data:null,error:d1({error:a,options:r})}}}const x1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},w1={userVerification:"preferred",hints:["security-key"]};function Qo(...r){const a=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),l={};for(const o of r)if(o)for(const d in o){const f=o[d];if(f!==void 0)if(Array.isArray(f))l[d]=f;else if(n(f))l[d]=f;else if(a(f)){const m=l[d];a(m)?l[d]=Qo(m,f):l[d]=Qo(f)}else l[d]=f}return l}function _1(r,a){return Qo(x1,r,a||{})}function S1(r,a){return Qo(w1,r,a||{})}class j1{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:n,friendlyName:l,signal:o},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:a,webauthn:n});if(!f)return{data:null,error:m};const g=o??f1.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${l}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=_1(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:b,error:v}=await b1({publicKey:p,signal:g});return b?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:v}}case"request":{const p=S1(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:b,error:v}=await v1(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:g}));return b?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:v}}}}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:n,webauthn:l}){return this.client.mfa.verify({factorId:n,challengeId:a,webauthn:l})}async _authenticate({factorId:a,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o}},d){if(!n)return{data:null,error:new Xl("rpId is required for WebAuthn authentication")};try{if(!Ep())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:a,webauthn:{rpId:n,rpOrigins:l},signal:o},{request:d});if(!f)return{data:null,error:m};const{webauthn:g}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:g.type,rpId:n,rpOrigins:l,credential_response:g.credential_response}})}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o},d){if(!n)return{data:null,error:new Xl("rpId is required for WebAuthn registration")};try{if(!Ep())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(b=>{var v;return(v=b.data)===null||v===void 0?void 0:v.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===a&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:g,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:n,rpOrigins:l},signal:o},{create:d});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:n,rpOrigins:l,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(f){return ce(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in register",f)}}}}l1();const k1={url:wj,storageKey:_j,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Cp(r,a,n){return await n()}const vr={};class Jl{get jwks(){var a,n;return(n=(a=vr[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(a){vr[this.storageKey]=Object.assign(Object.assign({},vr[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,n;return(n=(a=vr[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){vr[this.storageKey]=Object.assign(Object.assign({},vr[this.storageKey]),{cachedAt:a})}constructor(a){var n,l,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},k1),a);if(this.storageKey=d.storageKey,this.instanceID=(n=Jl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Jl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&jt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new s1({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=lb(d.fetch),this.lock=d.lock||Cp,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:jt()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=r1:this.lock=Cp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new j1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:rb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tp(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Tp(this.memoryStorage)),jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ab}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let n={},l="none";if(jt()&&(n=Lj(window.location.href),this._isImplicitGrantCallback(n)?l="implicit":await this._isPKCECallback(n)&&(l="pkce")),jt()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:d}=await this._getSessionFromURL(n,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Cj(d)){const g=(a=d.details)===null||a===void 0?void 0:a.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ce(n)?this._returnResult({error:n}):this._returnResult({error:new gn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var n,l,o;try{const d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(n=a==null?void 0:a.options)===null||n===void 0?void 0:n.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=a==null?void 0:a.options)===null||o===void 0?void 0:o.captchaToken}},xform:pa}),{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const g=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(d){if(ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(a){var n,l,o;try{let d;if("email"in a){const{email:b,password:v,options:S}=a;let _=null,A=null;this.flowType==="pkce"&&([_,A]=await pr(this.storage,this.storageKey)),d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:b,password:v,data:(n=S==null?void 0:S.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:_,code_challenge_method:A},xform:pa})}else if("phone"in a){const{phone:b,password:v,options:S}=a;d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:v,data:(l=S==null?void 0:S.data)!==null&&l!==void 0?l:{},channel:(o=S==null?void 0:S.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:pa})}else throw new Mo("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const g=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(d){if(ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(a){try{let n;if("email"in a){const{email:d,password:f,options:m}=a;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:kp})}else if("phone"in a){const{phone:d,password:f,options:m}=a;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:kp})}else throw new Mo("You must provide either an email or phone number and a password");const{data:l,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!l||!l.session||!l.user){const d=new gr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(a){var n,l,o,d;return await this._handleProviderSignIn(a.provider,{redirectTo:(n=a.options)===null||n===void 0?void 0:n.redirectTo,scopes:(l=a.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=a.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(d=a.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:n}=a;switch(n){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(a){var n,l,o,d,f,m,g,p,b,v,S;let _,A;if("message"in a)_=a.message,A=a.signature;else{const{chain:O,wallet:N,statement:U,options:D}=a;let w;if(jt())if(typeof N=="object")w=N;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")w=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=N}const k=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href),q=await w.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=ob(q[0]);let P=(l=D==null?void 0:D.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!P){const ee=await w.request({method:"eth_chainId"});P=i1(ee)}const X={domain:k.host,address:$,statement:U,uri:k.href,version:"1",chainId:P,nonce:(o=D==null?void 0:D.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(f=(d=D==null?void 0:D.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=D==null?void 0:D.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=D==null?void 0:D.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=D==null?void 0:D.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=D==null?void 0:D.signInWithEthereum)===null||b===void 0?void 0:b.resources};_=u1(X),A=await w.request({method:"personal_sign",params:[o1(_),$]})}try{const{data:O,error:N}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:A},!((v=a.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(S=a.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:pa});if(N)throw N;if(!O||!O.session||!O.user){const U=new gr;return this._returnResult({data:{user:null,session:null},error:U})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:N})}catch(O){if(ce(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(a){var n,l,o,d,f,m,g,p,b,v,S,_;let A,O;if("message"in a)A=a.message,O=a.signature;else{const{chain:N,wallet:U,statement:D,options:w}=a;let k;if(jt())if(typeof U=="object")k=U;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))k=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=U}const q=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const $=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),D?{statement:D}:null));let P;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")P=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)P=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)A=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),O=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${q.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(o=(l=w==null?void 0:w.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((f=w==null?void 0:w.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((m=w==null?void 0:w.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((g=w==null?void 0:w.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((p=w==null?void 0:w.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((v=(b=w==null?void 0:w.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||v===void 0)&&v.length?["Resources",...w.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const $=await k.signMessage(new TextEncoder().encode(A),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=$}}try{const{data:N,error:U}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:yn(O)},!((S=a.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(_=a.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:pa});if(U)throw U;if(!N||!N.session||!N.user){const D=new gr;return this._returnResult({data:{user:null,session:null},error:D})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:U})}catch(N){if(ce(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(a){const n=await hn(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(n??"").split("/");try{const{data:d,error:f}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:l},xform:pa});if(await As(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const m=new gr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:o??null}),error:f})}catch(d){if(ce(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(a){try{const{options:n,provider:l,token:o,access_token:d,nonce:f}=a,m=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:pa}),{data:g,error:p}=m;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const b=new gr;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(a){var n,l,o,d,f;try{if("email"in a){const{email:m,options:g}=a;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await pr(this.storage,this.storageKey));const{error:v}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in a){const{phone:m,options:g}=a,{data:p,error:b}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=g==null?void 0:g.data)!==null&&o!==void 0?o:{},create_user:(d=g==null?void 0:g.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(f=g==null?void 0:g.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new Mo("You must provide either an email or phone number.")}catch(m){if(ce(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(a){var n,l;try{let o,d;"options"in a&&(o=(n=a.options)===null||n===void 0?void 0:n.redirectTo,d=(l=a.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:m}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:d}}),redirectTo:o,xform:pa});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,p=f.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(o){if(ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(a){var n,l,o;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await pr(this.storage,this.storageKey));const m=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(l=(n=a.options)===null||n===void 0?void 0:n.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=a==null?void 0:a.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:e1});return this._returnResult(m)}catch(d){if(ce(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:n},error:l}=a;if(l)throw l;if(!n)throw new ga;const{error:o}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(a){if(ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const n=`${this.url}/resend`;if("email"in a){const{email:l,type:o,options:d}=a,{error:f}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:l,type:o,options:d}=a,{data:f,error:m}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Mo("You must provide either an email or phone number and a type")}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(a,n){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=n();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await a(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const n=await hn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?a=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const l=a.expires_at?a.expires_at*1e3-Date.now()<kd:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",a.expires_at),!l){if(this.userStorage){const f=await hn(this.userStorage,this.storageKey+"-user");f!=null&&f.user?a.user=f.user:a.user=Ed()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=Jj(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:o,error:d}=await this._callRefreshToken(a.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Ms}):await this._useSession(async n=>{var l,o,d;const{data:f,error:m}=n;if(m)throw m;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ga}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0,xform:Ms})})}catch(n){if(ce(n))return Ej(n)&&(await this._removeSession(),await As(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(a,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,n))}async _updateUser(a,n={}){try{return await this._useSession(async l=>{const{data:o,error:d}=l;if(d)throw d;if(!o.session)throw new ga;const f=o.session;let m=null,g=null;this.flowType==="pkce"&&a.email!=null&&([m,g]=await pr(this.storage,this.storageKey));const{data:p,error:b}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:g}),jwt:f.access_token,xform:Ms});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(ce(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new ga;const n=Date.now()/1e3;let l=n,o=!0,d=null;const{payload:f}=Td(a.access_token);if(f.exp&&(l=f.exp,o=l<=n),o){const{data:m,error:g}=await this._callRefreshToken(a.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:g}=await this._getUser(a.access_token);if(g)throw g;d={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:l-n,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(n){if(ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async n=>{var l;if(!a){const{data:f,error:m}=n;if(m)throw m;a=(l=f.session)!==null&&l!==void 0?l:void 0}if(!(a!=null&&a.refresh_token))throw new ga;const{data:o,error:d}=await this._callRefreshToken(a.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(a,n){try{if(!jt())throw new Uo("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Uo(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new bp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new bp("No code detected.");const{data:D,error:w}=await this._exchangeCodeForSession(a.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:d,refresh_token:f,expires_in:m,expires_at:g,token_type:p}=a;if(!d||!m||!f||!p)throw new Uo("No session defined in URL");const b=Math.round(Date.now()/1e3),v=parseInt(m);let S=b+v;g&&(S=parseInt(g));const _=S-b;_*1e3<=wr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${v}s`);const A=S-v;b-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,S,b):b-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,S,b);const{data:O,error:N}=await this._getUser(d);if(N)throw N;const U={provider_token:l,provider_refresh_token:o,access_token:d,expires_in:v,expires_at:S,refresh_token:f,token_type:p,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:a.type},error:null})}catch(l){if(ce(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const n=await hn(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&n)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async n=>{var l;const{data:o,error:d}=n;if(d)return this._returnResult({error:d});const f=(l=o.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:m}=await this.admin.signOut(f,a);if(m&&!(Tj(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return a!=="others"&&(await this._removeSession(),await As(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const n=zj(),l={id:n,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:l}}}async _emitInitialSession(a){return await this._useSession(async n=>{var l,o;try{const{data:{session:d},error:f}=n;if(f)throw f;await((l=this.stateChangeEmitters.get(a))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(d){await((o=this.stateChangeEmitters.get(a))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",d),console.error(d)}})}async resetPasswordForEmail(a,n={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await pr(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(ce(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var a;try{const{data:n,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(a=n.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var n;try{const{data:l,error:o}=await this._useSession(async d=>{var f,m,g,p,b;const{data:v,error:S}=d;if(S)throw S;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=a.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",_,{headers:this.headers,jwt:(b=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return jt()&&!(!((n=a.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),this._returnResult({data:{provider:a.provider,url:l==null?void 0:l.url},error:null})}catch(l){if(ce(l))return this._returnResult({data:{provider:a.provider,url:null},error:l});throw l}}async linkIdentityIdToken(a){return await this._useSession(async n=>{var l;try{const{error:o,data:{session:d}}=n;if(o)throw o;const{options:f,provider:m,token:g,access_token:p,nonce:b}=a,v=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=d==null?void 0:d.access_token)!==null&&l!==void 0?l:void 0,body:{provider:m,id_token:g,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:pa}),{data:S,error:_}=v;return _?this._returnResult({data:{user:null,session:null},error:_}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new gr}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:_}))}catch(o){if(ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(a){try{return await this._useSession(async n=>{var l,o;const{data:d,error:f}=n;if(f)throw f;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(o=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(a){const n=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(n,"begin");try{const l=Date.now();return await Hj(async o=>(o>0&&await Bj(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:pa})),(o,d)=>{const f=200*Math.pow(2,o);return d&&Nd(d)&&Date.now()+f-l<wr})}catch(l){if(this._debug(n,"error",l),ce(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(n,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,n){const l=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",n,"url",l),jt()&&!n.skipBrowserRedirect&&window.location.assign(l),{data:{provider:a,url:l},error:null}}async _recoverAndRefresh(){var a,n;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const o=await hn(this.storage,this.storageKey);if(o&&this.userStorage){let f=await hn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:o.user},await _r(this.userStorage,this.storageKey+"-user",f)),o.user=(a=f==null?void 0:f.user)!==null&&a!==void 0?a:Ed()}else if(o&&!o.user&&!o.user){const f=await hn(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(o.user=f.user,await As(this.storage,this.storageKey+"-user"),await _r(this.storage,this.storageKey,o)):o.user=Ed()}if(this._debug(l,"session from storage",o),!this._isValidSession(o)){this._debug(l,"session is not valid"),o!==null&&await this._removeSession();return}const d=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<kd;if(this._debug(l,`session has${d?"":" not"} expired with margin of ${kd}s`),d){if(this.autoRefreshToken&&o.refresh_token){const{error:f}=await this._callRefreshToken(o.refresh_token);f&&(console.error(f),Nd(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(o.access_token);!m&&(f!=null&&f.user)?(o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(l,"error",o),console.error(o);return}finally{this._debug(l,"end")}}async _callRefreshToken(a){var n,l;if(!a)throw new ga;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Fo;const{data:d,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!d.session)throw new ga;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(o,"error",d),ce(d)){const f={data:null,error:d};return Nd(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(a,n,l=!0){const o=`#_notifyAllSubscribers(${a})`;this._debug(o,"begin",n,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:a,session:n});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,n)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(o,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const n=Object.assign({},a),l=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&n.user&&await _r(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const d=Sp(o);await _r(this.storage,this.storageKey,d)}else{const o=Sp(n);await _r(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await As(this.storage,this.storageKey),await As(this.storage,this.storageKey+"-code-verifier"),await As(this.storage,this.storageKey+"-user"),this.userStorage&&await As(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),wr);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async n=>{const{data:{session:l}}=n;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-a)/wr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${wr}ms, refresh threshold is ${th} ticks`),o<=th&&await this._callRefreshToken(l.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof ib)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const n=`#_onVisibilityChanged(${a})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,n,l){const o=[`provider=${encodeURIComponent(n)}`];if(l!=null&&l.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,f]=await pr(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});o.push(m.toString())}if(l!=null&&l.queryParams){const d=new URLSearchParams(l.queryParams);o.push(d.toString())}return l!=null&&l.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${a}?${o.join("&")}`}async _unenroll(a){try{return await this._useSession(async n=>{var l;const{data:o,error:d}=n;return d?this._returnResult({data:null,error:d}):await ge(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(a){try{return await this._useSession(async n=>{var l,o;const{data:d,error:f}=n;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:g,error:p}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(a.factorType==="totp"&&g.type==="totp"&&(!((o=g==null?void 0:g.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var l;const{data:o,error:d}=n;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?p1(a.webauthn.credential_response):y1(a.webauthn.credential_response)})}:{code:a.code}),{data:m,error:g}=await ge(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var l;const{data:o,error:d}=n;if(d)return this._returnResult({data:null,error:d});const f=await ge(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:m1(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:g1(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(a){const{data:n,error:l}=await this._challenge({factorId:a.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:a.factorId,challengeId:n.id,code:a.code})}async _listFactors(){var a;const{data:{user:n},error:l}=await this.getUser();if(l)return{data:null,error:l};const o={all:[],phone:[],totp:[],webauthn:[]};for(const d of(a=n==null?void 0:n.factors)!==null&&a!==void 0?a:[])o.all.push(d),d.status==="verified"&&o[d.factor_type].push(d);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var a,n;const{data:{session:l},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Td(l.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((n=(a=l.user.factors)===null||a===void 0?void 0:a.filter(b=>b.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const p=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async n=>{const{data:{session:l},error:o}=n;return o?this._returnResult({data:null,error:o}):l?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:l.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new ga})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(a,n){try{return await this._useSession(async l=>{const{data:{session:o},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!o)return this._returnResult({data:null,error:new ga});const f=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(ce(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(a,n){try{return await this._useSession(async l=>{const{data:{session:o},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!o)return this._returnResult({data:null,error:new ga});const f=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(ce(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(a,n={keys:[]}){let l=n.keys.find(m=>m.kid===a);if(l)return l;const o=Date.now();if(l=this.jwks.keys.find(m=>m.kid===a),l&&this.jwks_cached_at+kj>o)return l;const{data:d,error:f}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=o,l=d.keys.find(m=>m.kid===a),!l)?null:l}async getClaims(a,n={}){try{let l=a;if(!l){const{data:_,error:A}=await this.getSession();if(A||!_.session)return this._returnResult({data:null,error:A});l=_.session.access_token}const{header:o,payload:d,signature:f,raw:{header:m,payload:g}}=Td(l);n!=null&&n.allowExpired||Ij(d.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:_}=await this.getUser(l);if(_)throw _;return{data:{claims:d,header:o,signature:f},error:null}}const b=Yj(o.alg),v=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,v,f,Mj(`${m}.${g}`)))throw new nh("Invalid JWT signature");return{data:{claims:d,header:o,signature:f},error:null}}catch(l){if(ce(l))return this._returnResult({data:null,error:l});throw l}}}Jl.nextInstanceID={};const N1=Jl;class T1 extends N1{constructor(a){super(a)}}class E1{constructor(a,n,l){var o,d,f;this.supabaseUrl=a,this.supabaseKey=n;const m=xj(a);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:hj,realtime:mj,auth:Object.assign(Object.assign({},fj),{storageKey:g}),global:dj},b=vj(l??{},p);this.storageKey=(o=b.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(v,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=yj(n,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new wS(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new oj(this.storageUrl.href,this.headers,this.fetch,l==null?void 0:l.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new yS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,n={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,n,l)}channel(a,n={config:{}}){return this.realtime.channel(a,n)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,n;if(this.accessToken)return await this.accessToken();const{data:l}=await this.auth.getSession();return(n=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:n,detectSessionInUrl:l,storage:o,userStorage:d,storageKey:f,flowType:m,lock:g,debug:p,throwOnError:b},v,S){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new T1({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),v),storageKey:f,autoRefreshToken:a,persistSession:n,detectSessionInUrl:l,storage:o,userStorage:d,flowType:m,lock:g,debug:p,throwOnError:b,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new qS(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a==null?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,l)=>{this._handleTokenChanged(n,"CLIENT",l==null?void 0:l.access_token)})}_handleTokenChanged(a,n,l){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const C1=(r,a,n)=>new E1(r,a,n);function O1(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const a=r.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}O1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const A1="https://uluxycppxlzdskyklgqt.supabase.co",R1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVsdXh5Y3BweGx6ZHNreWtsZ3F0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MDU5MzIsImV4cCI6MjA3ODA4MTkzMn0.pCmr1LEfsiPnvWKeTjGX4zGgUOYbwaLoKe1Qzy5jbdk",xt=C1(A1,R1),Eh={async getCustomers(){const{data:r,error:a}=await xt.from("customers").select("*").order("created_at",{ascending:!1});if(a)throw a;return r},async createCustomer(r){const{data:a,error:n}=await xt.from("customers").insert([r]).select().single();if(n)throw n;return a},async updateCustomer(r,a){const{data:n,error:l}=await xt.from("customers").update(a).eq("id",r).select().single();if(l)throw l;return n},async getParts(){const{data:r,error:a}=await xt.from("parts").select("*").order("name");if(a)throw a;return r},async createPart(r){const{data:a,error:n}=await xt.from("parts").insert([r]).select().single();if(n)throw n;return a},async updatePart(r,a){const{data:n,error:l}=await xt.from("parts").update(a).eq("id",r).select().single();if(l)throw l;return n},async getWorkOrders(){const{data:r,error:a}=await xt.from("work_orders").select("*").order("creationDate",{ascending:!1});if(a)throw a;return r},async createWorkOrder(r){const{data:a,error:n}=await xt.from("work_orders").insert([r]).select().single();if(n)throw n;return a},async updateWorkOrder(r,a){const{data:n,error:l}=await xt.from("work_orders").update(a).eq("id",r).select().single();if(l)throw l;return n},async getSales(){const{data:r,error:a}=await xt.from("sales").select("*").order("date",{ascending:!1});if(a)throw a;return r},async createSale(r){const{data:a,error:n}=await xt.from("sales").insert([r]).select().single();if(n)throw n;return a},async getCashTransactions(){const{data:r,error:a}=await xt.from("cash_transactions").select("*").order("date",{ascending:!1});if(a)throw a;return r},async createCashTransaction(r){const{data:a,error:n}=await xt.from("cash_transactions").insert([r]).select().single();if(n)throw n;return a},async getPaymentSources(){const{data:r,error:a}=await xt.from("payment_sources").select("*");if(a)throw a;return r},async updatePaymentSource(r,a){const{data:n,error:l}=await xt.from("payment_sources").update(a).eq("id",r).select().single();if(l)throw l;return n},async getInventoryTransactions(){const{data:r,error:a}=await xt.from("inventory_transactions").select("*").order("date",{ascending:!1});if(a)throw a;return r},async createInventoryTransaction(r){const{data:a,error:n}=await xt.from("inventory_transactions").insert([r]).select().single();if(n)throw n;return a}},cb=()=>Z_({queryKey:["workOrders"],queryFn:Eh.getWorkOrders,staleTime:120*1e3,gcTime:300*1e3}),D1=()=>{const r=Jo();return my({mutationFn:Eh.createWorkOrder,onSuccess:()=>{r.invalidateQueries({queryKey:["workOrders"]}),r.invalidateQueries({queryKey:["cashTransactions"]}),r.invalidateQueries({queryKey:["paymentSources"]})}})},M1=()=>{const r=Jo();return my({mutationFn:({id:a,updates:n})=>Eh.updateWorkOrder(a,n),onSuccess:()=>{r.invalidateQueries({queryKey:["workOrders"]}),r.invalidateQueries({queryKey:["cashTransactions"]}),r.invalidateQueries({queryKey:["paymentSources"]})}})};function U1(){const{parts:r,customers:a,upsertCustomer:n,setCashTransactions:l,setPaymentSources:o,paymentSources:d,currentBranchId:f}=On(),{data:m=[],isLoading:g}=cb(),p=D1(),b=M1(),[v,S]=j.useState(!1),[_,A]=j.useState(!1),[O,N]=j.useState(void 0),[U,D]=j.useState(""),[w,k]=j.useState("all"),[q,$]=j.useState("all"),P=[{id:"oil-change",name:"Thay du ng c",description:"Thay du v lc du ng c",duration:30,laborCost:3e5,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"}]},{id:"brake-service",name:"Sa phanh",description:"Thay m phanh v bo dng h thng phanh",duration:45,laborCost:505e3,parts:[{name:"M phanh trc",quantity:2,price:16e4,unit:"ci"},{name:"M phanh sau",quantity:2,price:12e4,unit:"ci"},{name:"Du phanh",quantity:1,price:25e3,unit:"chai"}]},{id:"cleaning",name:"V sinh kim phun",description:"V sinh v hiu chnh kim phun xng",duration:60,laborCost:15e4,parts:[{name:"Dung dch v sinh kim phun",quantity:1,price:5e4,unit:"chai"}]},{id:"oil-box",name:"Thay nht hp s",description:"Thay du hp s v kim tra",duration:25,laborCost:14e4,parts:[{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]},{id:"bug-check",name:"Thay bugi",description:"Thay bugi v kim tra h thng nh la",duration:20,laborCost:85e3,parts:[{name:"Bugi",quantity:1,price:35e3,unit:"ci"}]},{id:"full-maintenance",name:"Bo dng tng qut",description:"Bo dng nh k y ",duration:90,laborCost:57e4,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"},{name:"Lc khng kh",quantity:1,price:25e3,unit:"ci"},{name:"Bugi",quantity:1,price:35e3,unit:"ci"},{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]}],X=j.useMemo(()=>{let J=m;return q==="pending"?J=J.filter(re=>re.status==="Tip nhn"):q==="inProgress"?J=J.filter(re=>re.status==="ang sa"):q==="done"?J=J.filter(re=>re.status===" sa xong"):q==="delivered"&&(J=J.filter(re=>re.status==="Tr my")),U&&(J=J.filter(re=>{var ve,ze;return re.customerName.toLowerCase().includes(U.toLowerCase())||((ve=re.vehicleModel)==null?void 0:ve.toLowerCase().includes(U.toLowerCase()))||((ze=re.licensePlate)==null?void 0:ze.toLowerCase().includes(U.toLowerCase()))})),J.sort((re,ve)=>new Date(ve.creationDate).getTime()-new Date(re.creationDate).getTime())},[m,q,U]),ee=j.useMemo(()=>{const J=m.filter(H=>H.status==="Tip nhn").length,re=m.filter(H=>H.status==="ang sa").length,ve=m.filter(H=>H.status===" sa xong").length,ze=m.filter(H=>H.status==="Tr my").length,G=m.filter(H=>H.paymentStatus==="paid"&&new Date(H.creationDate).toDateString()===new Date().toDateString()).reduce((H,oe)=>H+oe.total,0),Z=m.filter(H=>H.paymentStatus==="paid"&&new Date(H.creationDate).toDateString()===new Date().toDateString()).reduce((H,oe)=>{var de;return H+(oe.total-(((de=oe.partsUsed)==null?void 0:de.reduce((C,Q)=>C+Q.price*Q.quantity,0))||0))},0);return{pending:J,inProgress:re,done:ve,delivered:ze,todayRevenue:G,todayProfit:Z}},[m]),se=J=>{N(J||{id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:"",technicianName:"",status:"Tip nhn",laborCost:0,discount:0,partsUsed:[],total:0,branchId:f,paymentStatus:"unpaid",creationDate:new Date().toISOString()}),S(!0)},fe=J=>{const re={id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:J.description,laborCost:J.laborCost,partsUsed:J.parts.map((ve,ze)=>({partId:`TEMPLATE-${ze}`,partName:ve.name,sku:"",quantity:ve.quantity,price:ve.price})),status:"Tip nhn",paymentStatus:"unpaid",discount:0,total:0,creationDate:new Date().toISOString(),branchId:f,technicianName:""};N(re),A(!1),S(!0)};return u.jsxs("div",{className:"space-y-6",children:[g&&u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"ang ti d liu..."})]})}),!g&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-6",children:[u.jsx(xr,{label:"Tip nhn",value:ee.pending,icon:"",color:"blue"}),u.jsx(xr,{label:"ang sa",value:ee.inProgress,icon:"",color:"orange"}),u.jsx(xr,{label:" sa xong",value:ee.done,icon:"",color:"green"}),u.jsx(xr,{label:"Tr my",value:ee.delivered,icon:"",color:"purple"}),u.jsx(xr,{label:"Doanh thu hm nay",value:`${pe(ee.todayRevenue).replace("","")}`,icon:"",color:"green"}),u.jsx(xr,{label:"Li nhun hm nay",value:`${pe(ee.todayProfit).replace("","")}`,icon:"",color:"blue"})]}),u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("div",{className:"flex-1 min-w-[200px]",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Tm theo m, tn, ST, xe, bin s...",value:U,onChange:J=>D(J.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400"}),u.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400",children:""})]})}),u.jsxs("select",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[u.jsx("option",{children:"Tt c ngy"}),u.jsx("option",{children:"Hm nay"}),u.jsx("option",{children:"7 ngy qua"}),u.jsx("option",{children:"30 ngy qua"})]}),u.jsxs("select",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[u.jsx("option",{children:"Tt c KTV"}),u.jsx("option",{children:"KTV 1"}),u.jsx("option",{children:"KTV 2"})]}),u.jsxs("select",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[u.jsx("option",{children:"Tt c thanh ton"}),u.jsx("option",{children:" thanh ton"}),u.jsx("option",{children:"Cha thanh ton"})]}),u.jsx("button",{className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium flex items-center gap-2",children:" Bo co"}),u.jsx("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm font-medium flex items-center gap-2",children:" Mu SC"}),u.jsx("button",{onClick:()=>se(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium flex items-center gap-2",children:" Thm Phiu"}),u.jsx("button",{className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium",children:" SMS QH"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center border-b border-slate-200 dark:border-slate-700",children:[u.jsx(Bl,{label:"Tt c",active:q==="all",onClick:()=>$("all")}),u.jsx(Bl,{label:"Tip nhn",active:q==="pending",onClick:()=>$("pending")}),u.jsx(Bl,{label:"ang sa",active:q==="inProgress",onClick:()=>$("inProgress")}),u.jsx(Bl,{label:" sa xong",active:q==="done",onClick:()=>$("done")}),u.jsx(Bl,{label:"Tr my",active:q==="delivered",onClick:()=>$("delivered")}),u.jsx("div",{className:"ml-auto px-4 py-3",children:u.jsx(Xo,{to:"/service-history",className:"px-3 py-1.5 bg-cyan-500 hover:bg-cyan-600 text-white rounded text-sm flex items-center gap-1 transition-colors",children:" Lch s SC"})})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M Phiu"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Khch hng"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Xe"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Ngy to"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Trng thi"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Tng chi ph"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"Hnh ng"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:X.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."})}):X.map(J=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[u.jsxs("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100 font-medium",children:["#",J.id.slice(-6)]}),u.jsxs("td",{className:"px-4 py-3",children:[u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:J.customerName}),u.jsx("div",{className:"text-xs text-slate-500",children:J.customerPhone})]}),u.jsxs("td",{className:"px-4 py-3",children:[u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:J.vehicleModel||"N/A"}),u.jsx("div",{className:"text-xs text-slate-500",children:J.licensePlate||""})]}),u.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:wa(J.creationDate,!0)}),u.jsx("td",{className:"px-4 py-3",children:u.jsx(L1,{status:J.status})}),u.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-slate-900 dark:text-slate-100",children:pe(J.total)}),u.jsx("td",{className:"px-4 py-3 text-center",children:u.jsx("button",{onClick:()=>se(J),className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs",children:"Xem"})})]},J.id))})]})})]}),_&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Mu sa cha thng dng"}),u.jsx("button",{onClick:()=>A(!1),className:"text-slate-400 hover:text-slate-600 text-2xl",children:""})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Chn mu sa cha  t ng in thng tin vo phiu sa cha"}),u.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:P.map(J=>u.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:J.name}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:J.description}),u.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[J.duration," pht"]})]}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:pe(J.laborCost+J.parts.reduce((re,ve)=>re+ve.price*ve.quantity,0))})})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[u.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Ph tng cn thit:"}),J.parts.map((re,ve)=>u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[u.jsxs("span",{children:[re.name," x",re.quantity," ",re.unit]}),u.jsx("span",{children:pe(re.price*re.quantity)})]},ve)),u.jsxs("div",{className:"flex gap-2 mt-3",children:[u.jsx("button",{onClick:()=>fe(J),className:"flex-1 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm",children:"p dng mu"}),u.jsx("button",{className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded text-sm",children:"To mi"}),u.jsx("button",{className:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded text-sm",children:"Sa mu"})]})]})]},J.id))})]})]})}),v&&O&&u.jsx(z1,{order:O,onClose:()=>{S(!1),N(void 0)},onSave:J=>{J.id&&(O!=null&&O.id)?b.mutate({id:J.id,updates:J}):p.mutate(J),S(!1),N(void 0)},parts:r,customers:a,upsertCustomer:n,setCashTransactions:l,setPaymentSources:o,paymentSources:d,currentBranchId:f})]})]})}const z1=({order:r,onClose:a,onSave:n,parts:l,customers:o,upsertCustomer:d,setCashTransactions:f,setPaymentSources:m,paymentSources:g,currentBranchId:p})=>{const[b,v]=j.useState(()=>r!=null&&r.id?r:{id:(r==null?void 0:r.id)||"",customerName:(r==null?void 0:r.customerName)||"",customerPhone:(r==null?void 0:r.customerPhone)||"",vehicleModel:(r==null?void 0:r.vehicleModel)||"",licensePlate:(r==null?void 0:r.licensePlate)||"",issueDescription:(r==null?void 0:r.issueDescription)||"",technicianName:(r==null?void 0:r.technicianName)||"",status:(r==null?void 0:r.status)||"Tip nhn",laborCost:(r==null?void 0:r.laborCost)||0,discount:(r==null?void 0:r.discount)||0,partsUsed:(r==null?void 0:r.partsUsed)||[],total:(r==null?void 0:r.total)||0,branchId:(r==null?void 0:r.branchId)||p,paymentStatus:(r==null?void 0:r.paymentStatus)||"unpaid",creationDate:(r==null?void 0:r.creationDate)||new Date().toISOString()}),[S,_]=j.useState(""),[A,O]=j.useState([]),[N,U]=j.useState(!1),[D,w]=j.useState(0),[k,q]=j.useState(!1),[$,P]=j.useState(0),[X,ee]=j.useState(!1),[se,fe]=j.useState(!1),[J,re]=j.useState({name:"",phone:"",vehicleModel:"",licensePlate:""}),[ve,ze]=j.useState(""),[G,Z]=j.useState(!1),[H,oe]=j.useState([]),[de,C]=j.useState({description:"",quantity:1,price:0});j.useEffect(()=>{r!=null&&r.partsUsed?O(r.partsUsed):O([]),r!=null&&r.customerName?ze(r.customerName):ze(""),r!=null&&r.depositAmount?(P(r.depositAmount),ee(!0)):(P(0),ee(!1)),r!=null&&r.additionalPayment?(w(r.additionalPayment),q(!0)):(w(0),q(!1))},[r]);const Q=o.filter(F=>{var Ae;return F.name.toLowerCase().includes(ve.toLowerCase())||((Ae=F.phone)==null?void 0:Ae.toLowerCase().includes(ve.toLowerCase()))});j.useEffect(()=>{const F=Ae=>{Ae.target.closest(".customer-search-container")||Z(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const W=A.reduce((F,Ae)=>F+(Ae.price||0)*(Ae.quantity||0),0),te=H.reduce((F,Ae)=>F+(Ae.price||0)*(Ae.quantity||0),0),ye=(b.laborCost||0)+W+te,we=b.discount||0,Ne=Math.max(0,ye-we);console.log(" Tnh ton:",{laborCost:b.laborCost,partsTotal:W,servicesTotal:te,subtotal:ye,discount:we,total:Ne});const tt=$||0,Me=k?D:0,ua=tt+Me,ca=Math.max(0,Ne-ua),Pr=()=>{b.customerName&&b.customerPhone&&(o.find(wt=>wt.phone===b.customerPhone)||d({id:`CUST-${Date.now()}`,name:b.customerName,phone:b.customerPhone,created_at:new Date().toISOString()}));let F="unpaid";ua>=Ne?F="paid":ua>0&&(F="partial");const Ae={id:b.id||`WO-${Date.now()}`,customerName:b.customerName||"",customerPhone:b.customerPhone||"",vehicleModel:b.vehicleModel||"",licensePlate:b.licensePlate||"",issueDescription:b.issueDescription||"",technicianName:b.technicianName||"",status:b.status||"Tip nhn",laborCost:b.laborCost||0,discount:we,partsUsed:A,total:Ne,branchId:p,depositAmount:$>0?$:void 0,depositDate:$>0&&!(r!=null&&r.depositDate)?new Date().toISOString():r==null?void 0:r.depositDate,paymentStatus:F,paymentMethod:b.paymentMethod,additionalPayment:Me>0?Me:void 0,totalPaid:ua>0?ua:void 0,remainingAmount:ca,creationDate:b.creationDate||new Date().toISOString()};if($>0&&!(r!=null&&r.depositAmount)&&b.paymentMethod){const it=`DEP-${Date.now()}`;f(wt=>[...wt,{id:it,type:"deposit",category:"service_deposit",amount:$,date:new Date().toISOString(),description:`t cc sa cha #${Ae.id.slice(-6)} - ${b.customerName}`,branchId:p,paymentSource:b.paymentMethod,reference:Ae.id}]),m(wt=>wt.map(dt=>dt.id===b.paymentMethod?{...dt,balance:{...dt.balance,[p]:(dt.balance[p]||0)+$}}:dt)),Ae.depositTransactionId=it}if(Me>0&&b.paymentMethod){const it=`PAY-${Date.now()}`;f(wt=>[...wt,{id:it,type:"income",category:"service_income",amount:Me,date:new Date().toISOString(),description:`Thu tin sa cha #${Ae.id.slice(-6)} - ${b.customerName}`,branchId:p,paymentSource:b.paymentMethod,reference:Ae.id}]),m(wt=>wt.map(dt=>dt.id===b.paymentMethod?{...dt,balance:{...dt.balance,[p]:(dt.balance[p]||0)+Me}}:dt)),Ae.cashTransactionId=it,Ae.paymentDate=new Date().toISOString()}n(Ae)},ri=F=>{const Ae=A.find(it=>it.partId===F.id);O(Ae?A.map(it=>it.partId===F.id?{...it,quantity:it.quantity+1}:it):[...A,{partId:F.id,partName:F.name,sku:F.sku||"",quantity:1,price:F.retailPrice[p]||0}]),U(!1),_("")},Sa=l.filter(F=>{var Ae;return F.name.toLowerCase().includes(S.toLowerCase())||((Ae=F.sku)==null?void 0:Ae.toLowerCase().includes(S.toLowerCase()))});return u.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-5xl max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:b.id?"Chi tit phiu sa cha":"To phiu sa cha mi"}),u.jsx("button",{onClick:a,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-2xl",children:""})]}),u.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1",children:[u.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thng tin Khch hng & S c"}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Khch hng ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative customer-search-container",children:[u.jsx("input",{type:"text",placeholder:"Tm khch hng...",value:ve,onChange:F=>{ze(F.target.value),Z(!0),v({...b,customerName:F.target.value})},onFocus:()=>Z(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),G&&ve&&Q.length>0&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Q.map(F=>u.jsxs("button",{type:"button",onClick:()=>{v({...b,customerName:F.name,customerPhone:F.phone}),ze(F.name),Z(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-600 text-sm border-b border-slate-200 dark:border-slate-600 last:border-0",children:[u.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:F.name}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:F.phone})]},F.id))})]}),u.jsx("button",{type:"button",onClick:()=>fe(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium text-xl",title:"Thm khch hng mi",children:"+"})]}),b.customerName&&b.customerPhone&&u.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:b.customerName}),u.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[" ",b.customerPhone]}),(b.vehicleModel||b.licensePlate)&&u.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[" ",b.vehicleModel," ",b.licensePlate&&`- ${b.licensePlate}`]})]}),u.jsx("button",{type:"button",onClick:()=>{ze(""),v({...b,customerName:"",customerPhone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-red-500 text-sm",title:"Xa khch hng",children:""})]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S KM hin ti"}),u.jsx("input",{type:"number",placeholder:"15000",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t s c"}),u.jsx("textarea",{rows:4,placeholder:"Bo dng nh k, thay nht...",value:b.issueDescription||"",onChange:F=>v({...b,issueDescription:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Chi tit Dch v"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trng thi"}),u.jsxs("select",{value:b.status||"Tip nhn",onChange:F=>v({...b,status:F.target.value}),className:`w-full px-3 py-2 border rounded-lg font-medium ${b.status==="Tip nhn"?"bg-blue-100 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300":b.status==="ang sa"?"bg-orange-100 dark:bg-orange-900/30 border-orange-300 dark:border-orange-700 text-orange-700 dark:text-orange-300":b.status===" sa xong"?"bg-purple-100 dark:bg-purple-900/30 border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300":"bg-green-100 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300"}`,children:[u.jsx("option",{value:"Tip nhn",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tip nhn"}),u.jsx("option",{value:"ang sa",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"ang sa"}),u.jsx("option",{value:" sa xong",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:" sa xong"}),u.jsx("option",{value:"Tr my",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tr my"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"K thut vin"}),u.jsxs("select",{value:b.technicianName||"",onChange:F=>v({...b,technicianName:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[u.jsx("option",{value:"",children:"-- Chn k thut vin --"}),u.jsx("option",{children:"KTV 1"}),u.jsx("option",{children:"KTV 2"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ph dch v (Cng th)"}),u.jsx("input",{type:"number",placeholder:"100.000",value:b.laborCost||"",onChange:F=>v({...b,laborCost:Number(F.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ghi ch ni b"}),u.jsx("textarea",{rows:4,placeholder:"VD: Khch yu cu kim tra thm h thng in",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Ph tng s dng"}),u.jsx("button",{onClick:()=>U(!N),className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm flex items-center gap-1",children:" Thm ph tng"})]}),N&&u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Tm kim ph tng theo tn hoc SKU...",value:S,onChange:F=>_(F.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),S&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto z-10",children:Sa.length===0?u.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Khng tm thy ph tng"}):Sa.slice(0,10).map(F=>u.jsxs("button",{onClick:()=>ri(F),className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:F.name}),u.jsx("div",{className:"text-xs text-slate-500",children:F.sku})]}),u.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:pe(F.retailPrice[p]||0)})]},F.id))})]}),u.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Tn"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:".Gi"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"T.Tin"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-600",children:A.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-sm text-slate-400",children:"Cha c ph tng no"})}):A.map((F,Ae)=>u.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[u.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:F.partName}),u.jsx("td",{className:"px-4 py-2 text-center",children:u.jsx("input",{type:"number",min:"1",value:F.quantity,onChange:it=>{const wt=Number(it.target.value);O(A.map((dt,Gr)=>Gr===Ae?{...dt,quantity:wt}:dt))},className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),u.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:pe(F.price)}),u.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:pe(F.price*F.quantity)}),u.jsx("td",{className:"px-4 py-2 text-center",children:u.jsx("button",{onClick:()=>O(A.filter((it,wt)=>wt!==Ae)),className:"text-red-500 hover:text-red-700",children:""})})]},Ae))})]})})]}),u.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Bo gi (Gia cng, t hng)"}),u.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M t"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"n gi"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thnh tin"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:u.jsx("button",{onClick:()=>{de.description&&de.price>0&&(oe([...H,{...de,id:`SRV-${Date.now()}`}]),C({description:"",quantity:1,price:0}))},className:"px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs",children:"Thm"})})]})}),u.jsxs("tbody",{children:[H.map(F=>u.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[u.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:F.description}),u.jsx("td",{className:"px-4 py-2 text-center text-sm text-slate-900 dark:text-slate-100",children:F.quantity}),u.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:pe(F.price)}),u.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:pe(F.price*F.quantity)}),u.jsx("td",{className:"px-4 py-2 text-center",children:u.jsx("button",{onClick:()=>oe(H.filter(Ae=>Ae.id!==F.id)),className:"text-red-500 hover:text-red-700 text-sm",children:""})})]},F.id)),u.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[u.jsx("td",{className:"px-4 py-2",children:u.jsx("input",{type:"text",placeholder:"M t...",value:de.description,onChange:F=>C({...de,description:F.target.value}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("input",{type:"number",value:de.quantity,onChange:F=>C({...de,quantity:Number(F.target.value)}),className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("input",{type:"number",placeholder:"n gi",value:de.price||"",onChange:F=>C({...de,price:Number(F.target.value)}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),u.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-400",children:de.price>0?pe(de.price*de.quantity):"Thnh tin"}),u.jsx("td",{className:"px-4 py-2 text-center"})]})]})]})})]}),u.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:u.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[u.jsxs("div",{className:"space-y-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thanh ton"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:X,onChange:F=>{ee(F.target.checked),F.target.checked||P(0)},disabled:!!(r!=null&&r.depositAmount),className:"w-4 h-4"}),u.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["t cc ",r!=null&&r.depositAmount?`( cc: ${pe(r.depositAmount)})`:""]})]}),X&&!(r!=null&&r.depositAmount)&&u.jsx("div",{className:"pl-6",children:u.jsx("input",{type:"number",placeholder:"S tin t cc",value:$||"",onChange:F=>P(Number(F.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),u.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:"Phng thc thanh ton:"}),u.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:b.paymentMethod==="cash",onChange:F=>v({...b,paymentMethod:"cash"}),className:"w-4 h-4"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:" Tin mt"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:b.paymentMethod==="bank",onChange:F=>v({...b,paymentMethod:"bank"}),className:"w-4 h-4"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:" Chuyn khon"})]})]})]}),u.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),b.status==="Tr my"&&u.jsxs(u.Fragment,{children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:k,onChange:F=>{q(F.target.checked),F.target.checked||w(0)},className:"w-4 h-4"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Thanh ton khi tr xe"})]}),k&&u.jsxs("div",{className:"pl-6 space-y-2",children:[u.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-400",children:"S tin thanh ton thm:"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",placeholder:"0",value:D||"",onChange:F=>w(Number(F.target.value)),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),u.jsx("button",{onClick:()=>w(0),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"0%"}),u.jsx("button",{onClick:()=>w(Math.round(ca*.5)),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"50%"}),u.jsx("button",{onClick:()=>w(ca),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"100%"})]})]})]})]}),b.status!=="Tr my"&&u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:'* Thanh ton khi tr xe ch kh dng khi trng thi l "Tr my"'})]}),u.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-700/30 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Tng kt"}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph dch v:"}),u.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe(b.laborCost||0)})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tin ph tng:"}),u.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe(W)})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gia cng/t hng:"}),u.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe(te)})]}),u.jsx("div",{className:"pt-2 border-t border-slate-300 dark:border-slate-600",children:u.jsxs("div",{className:"flex justify-between items-center text-sm",children:[u.jsx("span",{className:"text-red-600 font-medium",children:"Gim gi:"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",placeholder:"0",value:b.discount||"",onChange:F=>v({...b,discount:Number(F.target.value)}),className:"w-20 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),u.jsxs("select",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[u.jsx("option",{children:""}),u.jsx("option",{children:"%"})]})]})]})}),u.jsxs("div",{className:"pt-2 border-t-2 border-slate-400 dark:border-slate-500",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Tng cng:"}),u.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:pe(Ne)})]}),(tt>0||Me>0)&&u.jsxs("div",{className:"space-y-1 pt-2 border-t border-slate-300 dark:border-slate-600",children:[tt>0&&u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-green-600 dark:text-green-400",children:" t cc:"}),u.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",pe(tt)]})]}),Me>0&&u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Thanh ton thm:"}),u.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",pe(Me)]})]}),u.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-300 dark:border-slate-600",children:[u.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:ca>0?"Cn phi thu:":" thanh ton "}),u.jsx("span",{className:`text-lg font-bold ${ca>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:pe(ca)})]})]})]})]})]})})]}),u.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-end gap-3 bg-slate-50 dark:bg-slate-800/50 rounded-b-xl flex-shrink-0",children:[u.jsx("button",{onClick:a,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg",children:"Hy"}),u.jsx("button",{onClick:Pr,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",children:"Lu Phiu"})]})]}),se&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md p-6 m-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Thm khch hng"}),u.jsx("button",{onClick:()=>{fe(!1),re({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-xl",children:""})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn khch"}),u.jsx("input",{type:"text",placeholder:"Nhp tn khch",value:J.name,onChange:F=>re({...J,name:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),u.jsx("input",{type:"tel",placeholder:"VD: 09xxxx",value:J.phone,onChange:F=>re({...J,phone:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Xe"}),u.jsx("input",{type:"text",placeholder:"Dng xe",value:J.vehicleModel,onChange:F=>re({...J,vehicleModel:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bin s"}),u.jsx("input",{type:"text",placeholder:"VD: 59A1-123.45",value:J.licensePlate,onChange:F=>re({...J,licensePlate:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[u.jsx("button",{onClick:()=>{fe(!1),re({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Hy"}),u.jsx("button",{onClick:()=>{if(J.name&&J.phone){const F=`CUST-${Date.now()}`;d({id:F,name:J.name,phone:J.phone,created_at:new Date().toISOString()}),v({...b,customerName:J.name,customerPhone:J.phone,vehicleModel:J.vehicleModel,licensePlate:J.licensePlate}),ze(J.name),fe(!1),re({name:"",phone:"",vehicleModel:"",licensePlate:""})}},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",disabled:!J.name||!J.phone,children:"Lu"})]})]})})]})},xr=({label:r,value:a,icon:n,color:l})=>{const o={blue:"bg-blue-500/20 text-blue-600 dark:text-blue-400",orange:"bg-orange-500/20 text-orange-600 dark:text-orange-400",green:"bg-green-500/20 text-green-600 dark:text-green-400",purple:"bg-purple-500/20 text-purple-600 dark:text-purple-400"};return u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-12 h-12 rounded-lg ${o[l]} flex items-center justify-center text-2xl`,children:n}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:r}),u.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:a})]})]})})},Bl=({label:r,active:a,onClick:n})=>u.jsx("button",{onClick:n,className:`px-6 py-3 text-sm font-medium border-b-2 transition ${a?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:r}),L1=({status:r})=>{const a={"Tip nhn":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400","ang sa":"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400"," sa xong":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400","Tr my":"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"};return u.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${a[r]}`,children:r})},q1=({currentBranchId:r})=>{const{data:a=[],isLoading:n}=cb(),[l,o]=j.useState(""),[d,f]=j.useState("all"),[m,g]=j.useState(""),[p,b]=j.useState(""),[v,S]=j.useState(1),_=20,A=j.useMemo(()=>a.filter(w=>{var k,q,$,P,X,ee;if(w.branchId!==r)return!1;if(l){const se=l.toLowerCase();if(![(k=w.id)==null?void 0:k.toLowerCase(),(q=w.customerName)==null?void 0:q.toLowerCase(),($=w.customerPhone)==null?void 0:$.toLowerCase(),(P=w.vehicleModel)==null?void 0:P.toLowerCase(),(X=w.licensePlate)==null?void 0:X.toLowerCase(),(ee=w.issueDescription)==null?void 0:ee.toLowerCase()].some(J=>J==null?void 0:J.includes(se)))return!1}return!(d!=="all"&&w.status!==d||m&&w.creationDate<m||p&&w.creationDate>p)}).sort((w,k)=>new Date(k.creationDate||0).getTime()-new Date(w.creationDate||0).getTime()),[a,l,d,m,p,r]),O=Math.ceil(A.length/_),N=A.slice((v-1)*_,v*_),U=()=>{const k=[["M Phiu","Ngy to","Khch hng","Xe","Bin s","Trng thi","Tng chi ph"].join(","),...A.map(P=>{var X,ee;return[`#${((X=P.id)==null?void 0:X.slice(-6))||""}`,wa(P.creationDate,!0),P.customerName||"",P.vehicleModel||"",P.licensePlate||"",P.status||"",((ee=P.total)==null?void 0:ee.toString())||"0"].join(",")})].join(`
`),q=new Blob([k],{type:"text/csv;charset=utf-8;"}),$=document.createElement("a");if($.download!==void 0){const P=URL.createObjectURL(q);$.setAttribute("href",P),$.setAttribute("download",`lich-su-sua-chua-${new Date().toISOString().split("T")[0]}.csv`),$.style.visibility="hidden",document.body.appendChild($),$.click(),document.body.removeChild($)}},D=({status:w})=>{const k={"Tip nhn":{bg:"bg-blue-100 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300"},"ang sa":{bg:"bg-orange-100 dark:bg-orange-900/20",text:"text-orange-700 dark:text-orange-300"}," sa xong":{bg:"bg-purple-100 dark:bg-purple-900/20",text:"text-purple-700 dark:text-purple-300"},"Tr my":{bg:"bg-green-100 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300"}},q=k[w]||k["Tip nhn"];return u.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.bg} ${q.text}`,children:w})};return n?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 min-h-screen",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4 sm:mb-0",children:"Lch s sa cha"}),u.jsx("button",{onClick:U,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium flex items-center gap-2",children:" Xut CSV"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Tm theo m, tn, ST, xe, bin s...",value:l,onChange:w=>o(w.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),u.jsx("div",{children:u.jsxs("select",{value:d,onChange:w=>f(w.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[u.jsx("option",{value:"all",children:"Tt c trng thi"}),u.jsx("option",{value:"Tip nhn",children:"Tip nhn"}),u.jsx("option",{value:"ang sa",children:"ang sa"}),u.jsx("option",{value:" sa xong",children:" sa xong"}),u.jsx("option",{value:"Tr my",children:"Tr my"})]})}),u.jsx("div",{children:u.jsx("input",{type:"date",value:m,onChange:w=>g(w.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),u.jsx("div",{children:u.jsx("input",{type:"date",value:p,onChange:w=>b(w.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})})]}),u.jsxs("div",{className:"mb-4 text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",N.length," / ",A.length," phiu sa cha"]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"M Phiu"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Ngy to"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Khch hng"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Xe"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Bin s"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Trng thi"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Tng chi ph"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:N.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."})}):N.map((w,k)=>{var q;return u.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/30 ${k%2===0?"bg-white dark:bg-slate-800":"bg-slate-50/50 dark:bg-slate-700/20"}`,children:[u.jsxs("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100 font-medium",children:["#",((q=w.id)==null?void 0:q.slice(-6))||""]}),u.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:wa(w.creationDate,!0)}),u.jsxs("td",{className:"px-4 py-3",children:[u.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100 font-medium",children:w.customerName||"N/A"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.customerPhone||""})]}),u.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:w.vehicleModel||"N/A"}),u.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:w.licensePlate||"N/A"}),u.jsx("td",{className:"px-4 py-3",children:u.jsx(D,{status:w.status||"Tip nhn"})}),u.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-slate-900 dark:text-slate-100",children:pe(w.total||0)})]},w.id)})})]})}),O>1&&u.jsx("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 border-t border-slate-200 dark:border-slate-700 sm:px-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center",children:u.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Trang ",v," / ",O]})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>S(Math.max(1,v-1)),disabled:v===1,className:"px-3 py-1 text-sm bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Trc"}),Array.from({length:Math.min(5,O)},(w,k)=>{const q=Math.max(1,Math.min(v-2+k,O-4+k));return u.jsx("button",{onClick:()=>S(q),className:`px-3 py-1 text-sm rounded ${v===q?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:q},q)}),u.jsx("button",{onClick:()=>S(Math.min(O,v+1)),disabled:v===O,className:"px-3 py-1 text-sm bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Sau"})]})]})})]})]})},B1=()=>{const{customers:r,upsertCustomer:a,setCustomers:n}=On(),[l,o]=j.useState(""),[d,f]=j.useState(null),[m,g]=j.useState(!1),p=j.useMemo(()=>{const v=l.toLowerCase();return r.filter(S=>S.name.toLowerCase().includes(v)||S.phone&&S.phone.includes(v))},[r,l]),b=v=>{confirm("Xc nhn xo khch hng ny?")&&n(S=>S.filter(_=>_.id!==v))};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Qun l khch hng"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded text-sm",children:[u.jsx(sS,{className:"w-4 h-4"})," Import CSV"]}),u.jsxs("button",{onClick:()=>f({}),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm",children:[u.jsx(nS,{className:"w-4 h-4"})," Thm khch hng"]})]})]}),u.jsx("input",{type:"text",placeholder:"Tm theo tn hoc ST...",value:l,onChange:v=>o(v.target.value),className:"w-full border rounded px-3 py-2"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-800 text-left",children:[u.jsx("th",{className:"border p-2",children:"Tn khch hng"}),u.jsx("th",{className:"border p-2",children:"S in thoi"}),u.jsx("th",{className:"border p-2",children:"Ngy to"}),u.jsx("th",{className:"border p-2 text-center",children:"Thao tc"})]})}),u.jsxs("tbody",{children:[p.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"border p-2 text-center text-slate-500",children:"Cha c khch hng."})}),p.map(v=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800",children:[u.jsx("td",{className:"border p-2",children:v.name}),u.jsx("td",{className:"border p-2",children:v.phone||"--"}),u.jsx("td",{className:"border p-2",children:v.created_at?wa(v.created_at):"--"}),u.jsxs("td",{className:"border p-2 text-center space-x-2",children:[u.jsx("button",{onClick:()=>f(v),className:"text-blue-600 hover:underline text-xs",children:"Sa"}),u.jsx("button",{onClick:()=>b(v.id),className:"text-red-600 hover:underline text-xs",children:"Xo"})]})]},v.id))]})]})}),d&&u.jsx(H1,{customer:d,onSave:a,onClose:()=>f(null)}),m&&u.jsx($1,{onClose:()=>g(!1)})]})},H1=({customer:r,onSave:a,onClose:n})=>{const[l,o]=j.useState(r.name||""),[d,f]=j.useState(r.phone||""),m=g=>{g.preventDefault(),l.trim()&&(a({id:r.id,name:l.trim(),phone:d.trim()}),n())};return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:r.id?"Sa khch hng":"Thm khch hng mi"}),u.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-700",children:u.jsx(yy,{className:"w-6 h-6"})})]}),u.jsxs("form",{onSubmit:m,className:"space-y-3 text-sm",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"font-medium",children:"Tn khch hng *"}),u.jsx("input",{required:!0,value:l,onChange:g=>o(g.target.value),className:"mt-1 w-full border rounded px-3 py-2"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"font-medium",children:"S in thoi"}),u.jsx("input",{value:d,onChange:g=>f(g.target.value),className:"mt-1 w-full border rounded px-3 py-2"})]}),u.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[u.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border rounded hover:bg-slate-50",children:"Hu"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Lu"})]})]})]})})},$1=({onClose:r})=>{const{setCustomers:a}=On(),n=j.useRef(null),[l,o]=j.useState([]),[d,f]=j.useState(""),m=p=>{var S;const b=(S=p.target.files)==null?void 0:S[0];if(!b)return;f("");const v=new FileReader;v.onload=_=>{var k;const A=(k=_.target)==null?void 0:k.result;if(!A)return;const O=A.split(`
`).map(q=>q.trim()).filter(Boolean);if(O.length===0){f("File CSV trng.");return}const N=O[0].toLowerCase(),D=N.includes("name")||N.includes("phone")||N.includes("tn")||N.includes("st")?O.slice(1):O,w=[];for(const q of D){const $=q.split(",").map(P=>P.trim());$.length===0||!$[0]||w.push({name:$[0],phone:$[1]||void 0})}if(w.length===0){f("Khng tm thy d liu hp l trong CSV.");return}o(w)},v.readAsText(b)},g=()=>{if(l.length===0)return;const p=l.map(b=>({id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:b.name,phone:b.phone,created_at:new Date().toISOString()}));a(b=>[...p,...b]),alert(` import ${p.length} khch hng.`),r()};return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import khch hng t CSV"}),u.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-700",children:u.jsx(yy,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"space-y-3 text-sm",children:[u.jsxs("p",{className:"text-slate-600",children:["Chn file CSV vi ct u tin l ",u.jsx("strong",{children:"tn khch hng"}),", ct th hai l ",u.jsx("strong",{children:"s in thoi"})," (ty chn)."]}),u.jsx("p",{className:"text-slate-600 text-xs",children:'Dng u tin nu cha "name", "phone", "tn", "st" s t ng b qua (header).'}),u.jsx("input",{ref:n,type:"file",accept:".csv",onChange:m,className:"block w-full text-sm"}),d&&u.jsx("div",{className:"text-red-600 text-xs",children:d}),l.length>0&&u.jsxs("div",{className:"border rounded p-3 bg-slate-50 dark:bg-slate-900 max-h-64 overflow-y-auto",children:[u.jsxs("div",{className:"font-semibold mb-2",children:["Xem trc (",l.length," khch hng):"]}),u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-left border-b",children:[u.jsx("th",{className:"p-1",children:"Tn"}),u.jsx("th",{className:"p-1",children:"ST"})]})}),u.jsxs("tbody",{children:[l.slice(0,20).map((p,b)=>u.jsxs("tr",{className:"border-b",children:[u.jsx("td",{className:"p-1",children:p.name}),u.jsx("td",{className:"p-1",children:p.phone||"--"})]},b)),l.length>20&&u.jsx("tr",{children:u.jsxs("td",{colSpan:2,className:"p-1 text-slate-500",children:["... v ",l.length-20," khch hng na"]})})]})]})]}),u.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[u.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border rounded hover:bg-slate-50",children:"Hu"}),u.jsxs("button",{disabled:l.length===0,onClick:g,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:["Import ",l.length>0&&`(${l.length})`]})]})]})]})})},P1=()=>{var U,D;const{sales:r,parts:a,cartItems:n,cashTransactions:l,workOrders:o,customers:d,paymentSources:f,currentBranchId:m}=On(),g=j.useMemo(()=>new Date().toISOString().slice(0,10),[]),p=j.useMemo(()=>r.filter(w=>w.date.slice(0,10)===g),[r,g]),b=p.reduce((w,k)=>w+k.total,0),v=p.reduce((w,k)=>{const q=k.items.reduce(($,P)=>$+(P.costPrice||0)*P.quantity,0);return w+(k.total-q)},0),S=j.useMemo(()=>new Set(p.map(k=>k.customer.phone||k.customer.name)).size,[p]);a.reduce((w,k)=>w+(k.stock[m]||0),0);const _=((U=f.find(w=>w.id==="cash"))==null?void 0:U.balance[m])||0,A=((D=f.find(w=>w.id==="bank"))==null?void 0:D.balance[m])||0,O=j.useMemo(()=>{const w=[];return d.filter(q=>q.created_at&&new Date(q.created_at).toISOString().slice(0,10)===g).slice(0,2).forEach(q=>{const $=q.created_at?new Date(q.created_at):new Date,P=Math.floor((Date.now()-$.getTime())/36e5);w.push({text:`Khch hng ${q.name} t lch thay nht.`,time:P>0?`${P} gi trc`:"Va xong",icon:"customer"})}),p.slice(0,2).forEach(q=>{const $=new Date(q.date),P=Math.floor((Date.now()-$.getTime())/36e5);w.push({text:`Thanh ton n hng #${q.id.slice(-4)}.`,time:P>0?`${P} gi trc`:"Va xong",icon:"sale"})}),w.slice(0,2)},[d,p,g]),N=j.useMemo(()=>{var $;const w=[],k=o.filter(P=>P.status!=="Tr my"&&P.paymentStatus==="unpaid");if(k.length>0){const P=k[0];w.push({title:`Kim tra nh k xe SH ca anh ${P.customerName}`,status:"urgent"})}return a.filter(P=>(P.stock[m]||0)<5).length>0&&w.push({title:`Gi in xc nhn lch hn vi ch ${(($=d[0])==null?void 0:$.name)||"Mai"}`,status:"today"}),w.push({title:"t hng du nht Motul",status:"pending"}),w},[o,a,d,m]);return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"Nhn-Lm SmartCare"}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"CN1"})]})}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[u.jsx(Hl,{label:"Doanh thu hm nay",value:`${pe(b).replace("","")}`,icon:"",iconBg:"bg-blue-500/20",iconColor:"text-blue-400"}),u.jsx(Hl,{label:"Li nhun hm nay",value:`${pe(v).replace("","")}`,icon:"",iconBg:"bg-green-500/20",iconColor:"text-green-400"}),u.jsx(Hl,{label:"Lt khch hm nay",value:S,icon:"",iconBg:"bg-purple-500/20",iconColor:"text-purple-400"}),u.jsx(Hl,{label:"Ph tng sp ht",value:a.filter(w=>(w.stock[m]||0)<5).length,icon:"",iconBg:"bg-orange-500/20",iconColor:"text-orange-400"}),u.jsx(Hl,{label:"Tng doanh thu (Chi nhnh)",value:`${pe(r.reduce((w,k)=>w+k.total,0)).replace("","")}`,icon:"",iconBg:"bg-pink-500/20",iconColor:"text-pink-400"})]}),u.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[u.jsxs("div",{className:"lg:col-span-2 bg-slate-800/50 backdrop-blur rounded-xl p-6 border border-slate-700/50",children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Hot ng gn y"}),u.jsxs("div",{className:"space-y-4",children:[O.length===0&&u.jsx("p",{className:"text-slate-400 text-sm",children:"Cha c hot ng no hm nay."}),O.map((w,k)=>u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${w.icon==="customer"?"bg-purple-500/20":"bg-blue-500/20"}`,children:w.icon==="customer"?u.jsx("span",{className:"text-purple-400",children:""}):u.jsx(aS,{className:"w-5 h-5 text-blue-400"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-slate-200 text-sm",children:w.text}),u.jsxs("p",{className:"text-slate-500 text-xs mt-1 flex items-center gap-1",children:[" ",w.time]})]})]},k))]})]}),u.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl p-6 border border-slate-700/50",children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Tnh hnh ti chnh"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[u.jsx("span",{className:"text-slate-300 text-sm",children:"Tin mt CN1"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded",children:"Thu"}),u.jsx("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded",children:"Chi"}),u.jsxs("span",{className:"text-slate-100 text-sm font-semibold",children:[pe(_).replace("",""),""]})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[u.jsx("span",{className:"text-slate-300 text-sm",children:"Ngn hng CN1"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded",children:"Thu"}),u.jsx("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded",children:"Chi"}),u.jsxs("span",{className:"text-slate-100 text-sm font-semibold",children:[pe(A).replace("",""),""]})]})]})]})]})]}),u.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl p-6 border border-slate-700/50",children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Cng vic cn ch "}),u.jsx("div",{className:"space-y-3",children:N.map((w,k)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg hover:bg-slate-700/50 transition",children:[u.jsx("span",{className:"text-slate-200 text-sm",children:w.title}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:`px-3 py-1 rounded text-xs font-medium ${w.status==="urgent"?"bg-red-500/20 text-red-400":w.status==="today"?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:w.status==="urgent"?"Sp ti hn":w.status==="today"?"Hm nay":"Cn thc hin"}),u.jsx("button",{className:"px-3 py-1 bg-slate-600 hover:bg-slate-500 text-slate-200 rounded text-xs",children:"nh du xong"})]})]},k))})]})]})},Hl=({label:r,value:a,icon:n,iconBg:l,iconColor:o})=>u.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl p-4 border border-slate-700/50 hover:border-slate-600/50 transition",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-12 h-12 rounded-lg ${l} flex items-center justify-center text-2xl`,children:n}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs text-slate-400 mb-1",children:r}),u.jsx("p",{className:"text-xl font-bold text-slate-100 truncate",children:a})]})]})}),G1=()=>u.jsx(iS,{}),K1=()=>u.jsx(dS,{}),V1=()=>u.jsx(U1,{}),Q1=()=>u.jsx(q1,{currentBranchId:On().currentBranchId}),I1=()=>u.jsx(B1,{});function Y1(){const[r,a]=j.useState(!1),{theme:n,toggleTheme:l}=tS();return u.jsx("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50",children:u.jsx("div",{className:"max-w-[1600px] mx-auto px-6 py-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>a(!r),className:"w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 flex items-center justify-center transition",children:u.jsxs("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),u.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 py-2 z-50",children:[u.jsx("div",{className:"px-4 py-2 border-b border-slate-200 dark:border-slate-700",children:u.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ci t"})}),u.jsxs("button",{onClick:()=>{l(),a(!1)},className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-between text-sm text-slate-700 dark:text-slate-200",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[n==="dark"?"":"",u.jsxs("span",{children:["Ch  ",n==="dark"?"ti":"sng"]})]}),u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:n==="dark"?"Chuyn sang sng":"Chuyn sang ti"})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h1",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Nhn-Lm SmartCare"}),u.jsxs("select",{className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-200 cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:[u.jsx("option",{children:"CN1"}),u.jsx("option",{children:"CN2"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Rs,{to:"/dashboard",icon:"",label:"Tng quan"}),u.jsx(Rs,{to:"/service",icon:"",label:"Sa cha"}),u.jsx(Rs,{to:"/sales",icon:"",label:"Bn hng"}),u.jsx(Rs,{to:"/inventory",icon:"",label:"Qun l kho"}),u.jsx(Rs,{to:"/customers",icon:"",label:"Khch hng"}),u.jsx(Rs,{to:"/finance",icon:"",label:"Ti chnh"}),u.jsx(Rs,{to:"/payroll",icon:"",label:"Cng n"}),u.jsx(Rs,{to:"/reports",icon:"",label:"Bo co"})]}),u.jsx("div",{className:"w-10"})]})})})}const Rs=({to:r,icon:a,label:n})=>{const o=rs().pathname===r;return u.jsxs(Xo,{to:r,className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${o?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[u.jsx("span",{className:"text-2xl",children:a}),u.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:n})]})};function X1(){const[r,a]=j.useState(!1);return j.useEffect(()=>{a(!0)},[]),{ready:r}}const J1=new q_({defaultOptions:{queries:{staleTime:120*1e3,gcTime:300*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",retry:2}}});function Z1(){const{ready:r}=X1();return r?u.jsx(B_,{client:J1,children:u.jsx(eS,{children:u.jsx(W_,{children:u.jsxs(l_,{children:[u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors",children:[u.jsx(Y1,{}),u.jsx("main",{className:"max-w-[1600px] mx-auto p-6",children:u.jsxs(Lw,{children:[u.jsx(ma,{path:"/",element:u.jsx(Uw,{to:"/dashboard",replace:!0})}),u.jsx(ma,{path:"/dashboard",element:u.jsx(P1,{})}),u.jsx(ma,{path:"/sales",element:u.jsx(G1,{})}),u.jsx(ma,{path:"/inventory",element:u.jsx(K1,{})}),u.jsx(ma,{path:"/service",element:u.jsx(V1,{})}),u.jsx(ma,{path:"/service-history",element:u.jsx(Q1,{})}),u.jsx(ma,{path:"/customers",element:u.jsx(I1,{})}),u.jsx(ma,{path:"/finance",element:u.jsx("div",{className:"text-center py-12 text-slate-400",children:"Ti chnh - ang pht trin"})}),u.jsx(ma,{path:"/payroll",element:u.jsx("div",{className:"text-center py-12 text-slate-400",children:"Cng n - ang pht trin"})}),u.jsx(ma,{path:"/reports",element:u.jsx("div",{className:"text-center py-12 text-slate-400",children:"Bo co - ang pht trin"})})]})})]}),u.jsx(F_,{initialIsOpen:!1})]})})})}):null}Qx.createRoot(document.getElementById("root")).render(u.jsx(qx.StrictMode,{children:u.jsx(Z1,{})}));
